import{h as ce,u as q,m as j,j as me,c as m,w as l,r,i as ue,o as u,a as e,b as i,H as pe,d as a,s as p,t as x,e as Q,q as fe,f as z}from"./app.cc606831.js";import{_ as _e}from"./AuthenticatedLayout.0bc0b363.js";import{_ as G}from"./DialogConfirm.f96873bf.js";const ve={class:"row q-pb-xl"},ye={class:"column col-12 col-md-6 justify-center"},qe=a("div",{class:"app-fs-28 app-fw-700 app-lh-32 text-grey-8"}," Eventos ao vivo ",-1),be={class:"col-12 col-md-6 flex justify-end items-center"},xe=a("div",{class:"q-ml-sm app-fw-500 app-fs-14 app-lh-20"}," Excluir selecionados ",-1),ge=a("div",{class:"q-ml-sm app-fw-500 app-fs-14 app-lh-20"}," Novo evento ao vivo ",-1),ke={class:"row q-col-gutter-sm"},we={class:"col-12"},Ve={class:"col-12"},he={class:"col-12"},Ce={class:"text-red"},ze={class:"row items-center justify-end"},Ee={class:"col-12"},$e={class:"text-red"},De={class:"row items-center justify-end"},Pe={class:"col-12"},Ue={class:"flex flex-center q-pt-lg q-pa-md q-gutter-sm"},Ye=a("div",{class:"q-ml-sm app-fw-500 app-fs-14 app-lh-20"}," Filtrar ",-1),je=a("div",{class:"q-ml-sm app-fw-500 app-fs-14 app-lh-20 m-4"}," Limpar ",-1),Be=["onClick"],Le={class:"row items-center justify-center app-fw-700 app-fs-16"},Se={class:"row items-center justify-center app-fw-700 app-fs-16"},He=a("div",{class:"q-ml-sm"}," Editar ",-1),Oe=a("div",{class:"q-ml-sm"}," Visualizar ",-1),Ne=a("div",{class:"q-ml-sm"}," Excluir ",-1),Fe=a("div",{class:"q-ml-sm"}," Acompanhar ",-1),Me=a("div",{class:"q-ml-sm"}," Visualizar ",-1),Ae={class:"row items-center text-grey"},Ie={class:"row items-center text-grey"},Ge={__name:"Index",props:{liveEvents:Object,errors:Object,query:Object,responsible:Array,canLiveEventStore:Boolean,canLiveEventEdit:Boolean,canLiveEventDestroy:Boolean},setup(n){const f=n,w=ce(),J=[{name:"name",align:"left",label:"Nome",field:"name",style:"width: 40%"},{name:"responsible_name",align:"left",label:"Professor",field:d=>d.responsible.name,style:"width: 20%"},{name:"start_at",align:"left",label:"In\xEDcio",field:"start_at",style:"width: 20%"},{name:"end_at",align:"left",label:"T\xE9rmino",field:"end_at",style:"width: 20%"},{name:"actions",label:"A\xE7\xE3o"}],o=q({orderBy:f.query.orderBy,sort:f.query.sort,page:f.query.page,rowsPerPage:f.query.rowsPerPage,filters:{name:f.query.filters.name,start_at:f.query.filters.start_at,end_at:f.query.filters.end_at,responsible_id:f.query.filters.responsible_id?parseInt(f.query.filters.responsible_id):null}}),K=d=>{o.orderBy===d?o.sort=o.sort=="desc"?"asc":"desc":o.sort=="asc",o.orderBy=d,o.page=1,g()},b=d=>{o.filters[d]=null,g()},g=()=>{o.get(route("admin.live-event.index"),{preserveState:!0,preserveScroll:!0,onSuccess:()=>E.value=!1})},W=()=>q().get(route("admin.live-event.create")),X=d=>q().get(route("admin.live-event.edit",d)),B=d=>q().get(route("admin.live-event.show",d)),Z=d=>q().get(route("admin.live-event.follow",d));function ee(d){w.dialog({component:G,componentProps:{title:"Excluir evento",message:"Tem certeza que deseja excluir esse evento?"}}).onOk(()=>{q().delete(route("admin.live-event.destroy",d),{onSuccess:()=>{w.notify({type:"positive",message:"Evento exclu\xEDdo com sucesso",position:"top"})}})})}function te(){w.dialog({component:G,componentProps:{title:"Excluir selecionados",message:"Tem certeza que deseja excluir eventos selecionadas?"}}).onOk(()=>{q({ids:k.value.map(d=>d.id)}).post(route("admin.live-event.destroy-multiples"),{onSuccess:()=>{k.value=[],w.notify({type:"positive",message:"Eventos exclu\xEDdas com sucesso",position:"top"})}})})}const k=j([]),L=j(f.responsible),le=(d,s,$)=>{s(()=>L.value=f.responsible.filter(D=>D.name.toLowerCase().indexOf(d.toLowerCase())>-1))},S=me(()=>Object.values(f.query.filters).filter(d=>d).length),E=j(!1),se=()=>q().get(route("admin.live-event.index"));return(d,s)=>{const $=r("q-breadcrumbs-el"),D=r("q-breadcrumbs"),c=r("q-icon"),v=r("q-btn"),y=r("q-chip"),H=r("q-space"),oe=r("q-badge"),P=r("q-input"),U=r("q-select"),O=r("q-date"),N=r("q-time"),F=r("q-popup-proxy"),M=r("q-menu"),Y=r("q-card-section"),V=r("q-separator"),A=r("q-checkbox"),I=r("q-th"),R=r("q-td"),h=r("q-item-section"),C=r("q-item"),ae=r("q-list"),ne=r("q-table"),ie=r("q-pagination"),re=r("q-card"),T=ue("close-popup");return u(),m(_e,null,{default:l(()=>[e(i(pe),{title:"Eventos ao vivo"}),a("div",ve,[a("div",ye,[qe,e(D,{class:"text-grey q-mt-sm app-fs-13 app-fw-400 app-lh-16",gutter:"xs"},{default:l(()=>[e($,{label:"Home",class:"text-grey"}),e($,{label:"Eventos ao vivo",class:"text-primary"})]),_:1})]),a("div",be,[k.value.length>0&&n.canLiveEventDestroy?(u(),m(v,{key:0,color:"negative",class:"q-mr-md",rounded:"","no-caps":"",outline:"",onClick:te},{default:l(()=>[e(c,{name:"close",size:"xs"}),xe]),_:1})):p("",!0),n.canLiveEventStore?(u(),m(v,{key:1,rounded:"","no-caps":"",color:"primary",onClick:W},{default:l(()=>[e(c,{name:"add",size:"xs"}),ge]),_:1})):p("",!0)])]),e(re,{flat:"",class:"app-br-16"},{default:l(()=>[e(Y,{class:"row items-center q-py-sm q-px-lg"},{default:l(()=>[n.query.filters.title?(u(),m(y,{key:0,class:"adm-chip-primary",label:`Nome = ${n.query.filters.title}`},{default:l(()=>[e(c,{name:"cancel",size:"xs",onClick:s[0]||(s[0]=t=>b("title")),class:"q-ml-xs cursor-pointer"})]),_:1},8,["label"])):p("",!0),n.query.filters.responsible_id?(u(),m(y,{key:1,class:"adm-chip-primary",label:`Professor = ${n.responsible.filter(t=>t.id==n.query.filters.responsible_id).shift().name}`},{default:l(()=>[e(c,{name:"cancel",size:"xs",onClick:s[1]||(s[1]=t=>b("responsible_id")),class:"q-ml-xs cursor-pointer"})]),_:1},8,["label"])):p("",!0),n.query.filters.start_at?(u(),m(y,{key:2,class:"adm-chip-primary",label:`Inicio = ${n.query.filters.start_at}`},{default:l(()=>[e(c,{name:"cancel",size:"xs",onClick:s[2]||(s[2]=t=>b("start_at")),class:"q-ml-xs cursor-pointer"})]),_:1},8,["label"])):p("",!0),n.query.filters.end_at?(u(),m(y,{key:3,class:"adm-chip-primary",label:`Termina = ${n.query.filters.end_at}`},{default:l(()=>[e(c,{name:"cancel",size:"xs",onClick:s[3]||(s[3]=t=>b("end_at")),class:"q-ml-xs cursor-pointer"})]),_:1},8,["label"])):p("",!0),n.query.filters.active==1?(u(),m(y,{key:4,class:"adm-chip-primary",label:"Status = N\xE3o realizado"},{default:l(()=>[e(c,{name:"cancel",size:"xs",onClick:s[4]||(s[4]=t=>b("active")),class:"q-ml-xs cursor-pointer"})]),_:1})):p("",!0),n.query.filters.active==0?(u(),m(y,{key:5,class:"adm-chip-primary",label:"Status = Realizado"},{default:l(()=>[e(c,{name:"cancel",size:"xs",onClick:s[5]||(s[5]=t=>b("active")),class:"q-ml-xs cursor-pointer"})]),_:1})):p("",!0),e(H),e(v,{round:"",dense:"",flat:"",color:"primary"},{default:l(()=>[i(S)?(u(),m(oe,{key:0,color:"primary",floating:"",rounded:"",label:i(S)},null,8,["label"])):p("",!0),e(c,{name:"tune",class:"rotate-90"}),e(M,{style:{"min-width":"500px"},"max-width":"500px",class:"bg-white q-pa-md app-br-16",modelValue:E.value,"onUpdate:modelValue":s[15]||(s[15]=t=>E.value=t)},{default:l(()=>[a("div",ke,[a("div",we,[e(P,{outlined:"",modelValue:i(o).filters.name,"onUpdate:modelValue":s[6]||(s[6]=t=>i(o).filters.name=t),label:"Nome do evento ao vivo"},null,8,["modelValue"])]),a("div",Ve,[e(U,{options:L.value,"option-value":"id","option-label":"name","emit-value":"","map-options":"",outlined:"",modelValue:i(o).filters.responsible_id,"onUpdate:modelValue":s[7]||(s[7]=t=>i(o).filters.responsible_id=t),label:"Professor",clearable:"","use-input":"",onFilter:le},{"selected-item":l(t=>[e(y,{class:"adm-chip-primary q-my-none",label:t.opt.name,dense:""},{default:l(()=>[e(c,{name:"cancel",size:"xs",onClick:_=>t.removeAtIndex(t.index),class:"q-ml-xs cursor-pointer"},null,8,["onClick"])]),_:2},1032,["label"])]),_:1},8,["options","modelValue"])]),a("div",he,[e(P,{outlined:"",modelValue:i(o).filters.start_at,"onUpdate:modelValue":s[10]||(s[10]=t=>i(o).filters.start_at=t),mask:"##/##/#### ##:##",label:"Data e hora de inicio",placeholder:"dia/m\xEAs/ano hora:min","bottom-slots":Boolean(n.errors["filters.start_at"]),clearable:""},{hint:l(()=>[a("div",Ce,x(n.errors["filters.start_at"]),1)]),prepend:l(()=>[e(c,{name:"o_calendar_today"})]),default:l(()=>[e(F,{class:"row"},{default:l(()=>[e(O,{modelValue:i(o).filters.start_at,"onUpdate:modelValue":s[8]||(s[8]=t=>i(o).filters.start_at=t),mask:"DD/MM/YYYY HH:mm",flat:"",square:""},null,8,["modelValue"]),e(N,{modelValue:i(o).filters.start_at,"onUpdate:modelValue":s[9]||(s[9]=t=>i(o).filters.start_at=t),mask:"DD/MM/YYYY HH:mm",format24h:"",flat:"",square:""},{default:l(()=>[a("div",ze,[Q(e(v,{label:"Ok",color:"primary",flat:""},null,512),[[T]])])]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue","bottom-slots"])]),a("div",Ee,[e(P,{outlined:"",modelValue:i(o).filters.end_at,"onUpdate:modelValue":s[13]||(s[13]=t=>i(o).filters.end_at=t),mask:"##/##/#### ##:##",label:"Data e hora de t\xE9rmino","bottom-slots":Boolean(n.errors["filters.end_at"]),placeholder:"dia/m\xEAs/ano hora:min",clearable:""},{hint:l(()=>[a("div",$e,x(n.errors["filters.end_at"]),1)]),prepend:l(()=>[e(c,{name:"o_calendar_today"})]),default:l(()=>[e(F,{class:"row"},{default:l(()=>[e(O,{modelValue:i(o).filters.end_at,"onUpdate:modelValue":s[11]||(s[11]=t=>i(o).filters.end_at=t),mask:"DD/MM/YYYY HH:mm",flat:"",square:""},null,8,["modelValue"]),e(N,{modelValue:i(o).filters.end_at,"onUpdate:modelValue":s[12]||(s[12]=t=>i(o).filters.end_at=t),mask:"DD/MM/YYYY HH:mm",format24h:"",flat:"",square:""},{default:l(()=>[a("div",De,[Q(e(v,{label:"Ok",color:"primary",flat:""},null,512),[[T]])])]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue","bottom-slots"])]),a("div",Pe,[e(U,{options:[{label:"N\xE3o realizado",value:1},{label:"Realizado",value:0}],outlined:"",modelValue:i(o).filters.active,"onUpdate:modelValue":s[14]||(s[14]=t=>i(o).filters.active=t),label:"Status","map-options":"","emit-value":""},{"selected-item":l(t=>[e(y,{tabindex:t.tabindex,"text-color":"white",class:fe([{"adm-bg-positive":t.opt.value,"adm-bg-negative":!t.opt.value},"q-my-none"]),dense:""},{default:l(()=>[z(x(t.opt.label),1)]),_:2},1032,["tabindex","class"])]),_:1},8,["modelValue"])])]),a("div",Ue,[e(v,{color:"primary",rounded:"","no-caps":"",onClick:g},{default:l(()=>[e(c,{name:"check",size:"xs"}),Ye]),_:1}),e(v,{color:"primary",rounded:"",outline:"","no-caps":"",onClick:se},{default:l(()=>[e(c,{name:"close",size:"xs"}),je]),_:1})])]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(Y,{class:"q-py-none"},{default:l(()=>[e(V,{color:"grey-3"})]),_:1}),e(Y,{class:"q-py-none"},{default:l(()=>[e(ne,{rows:n.liveEvents.data,columns:J,flat:"",class:"text-grey-8",selected:k.value,"onUpdate:selected":s[16]||(s[16]=t=>k.value=t),selection:"multiple","hide-pagination":"",pagination:{rowsPerPage:i(o).rowsPerPage}},{"header-selection":l(t=>[e(A,{modelValue:t.selected,"onUpdate:modelValue":_=>t.selected=_},null,8,["modelValue","onUpdate:modelValue"])]),"body-selection":l(t=>[e(A,{"model-value":t.selected,"onUpdate:modelValue":(_,de)=>{Object.getOwnPropertyDescriptor(t,"selected").set(_,de)}},null,8,["model-value","onUpdate:modelValue"])]),"header-cell":l(t=>[e(I,{props:t},{default:l(()=>[a("div",{class:"app-fw-700 app-fs-16 cursor-pointer",onClick:_=>K(t.col.name)},[z(x(t.col.label)+" ",1),t.col.name===n.query.orderBy?(u(),m(c,{key:0,name:n.query.sort=="desc"?"keyboard_arrow_up":"keyboard_arrow_down"},null,8,["name"])):p("",!0)],8,Be)]),_:2},1032,["props"])]),"header-cell-actions":l(t=>[e(I,{props:t,"auto-width":""},{default:l(()=>[a("div",Le,x(t.col.label),1)]),_:2},1032,["props"])]),"body-cell-responsible_name":l(t=>[e(R,{props:t},{default:l(()=>[e(y,{class:"adm-chip-primary"},{default:l(()=>[z(x(t.row.responsible.name),1)]),_:2},1024)]),_:2},1032,["props"])]),"body-cell-actions":l(t=>[e(R,{props:t},{default:l(()=>[a("div",Se,[n.canLiveEventEdit||n.canLiveEventDestroy?(u(),m(v,{key:0,icon:"more_vert",flat:""},{default:l(()=>[e(M,{offset:[65,0]},{default:l(()=>[e(ae,null,{default:l(()=>[n.canLiveEventEdit?(u(),m(C,{key:0,clickable:"",onClick:_=>X(t.row.id),class:"text-grey-7 flex items-center"},{default:l(()=>[e(c,{name:"edit",size:"xs"}),e(h,{"no-wrap":""},{default:l(()=>[He]),_:1})]),_:2},1032,["onClick"])):p("",!0),e(V),e(C,{clickable:"",onClick:_=>B(t.row.id),class:"text-grey-7 flex items-center"},{default:l(()=>[e(c,{name:"visibility",size:"xs"}),e(h,{"no-wrap":""},{default:l(()=>[Oe]),_:1})]),_:2},1032,["onClick"]),e(V),n.canLiveEventDestroy?(u(),m(C,{key:1,clickable:"",onClick:_=>ee(t.row.id),class:"text-grey-7 flex flex-center"},{default:l(()=>[e(c,{name:"close",size:"xs"}),e(h,{"no-wrap":""},{default:l(()=>[Ne]),_:1})]),_:2},1032,["onClick"])):p("",!0),e(V),t.row.status!=="Finalizado"?(u(),m(C,{key:2,clickable:"",onClick:_=>Z(t.row.id),class:"text-grey-7 flex flex-center"},{default:l(()=>[e(c,{name:"live_tv",size:"xs"}),e(h,{"no-wrap":""},{default:l(()=>[Fe]),_:1})]),_:2},1032,["onClick"])):p("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):(u(),m(v,{key:1,onClick:_=>B(t.row.id),class:"text-grey-7 flex flex-center",flat:"","no-caps":""},{default:l(()=>[e(c,{name:"visibility",size:"xs"}),Me]),_:2},1032,["onClick"]))])]),_:2},1032,["props"])]),_:1},8,["rows","selected","pagination"]),a("div",Ae,[e(H),a("div",Ie,[z(" Resultado por p\xE1gina "),e(U,{options:[5,10,15],modelValue:i(o).rowsPerPage,"onUpdate:modelValue":[s[17]||(s[17]=t=>i(o).rowsPerPage=t),g],borderless:"",class:"q-ml-md"},null,8,["modelValue"])]),e(ie,{modelValue:i(o).page,"onUpdate:modelValue":[s[18]||(s[18]=t=>i(o).page=t),g],max:n.liveEvents.meta.last_page,"direction-links":"","boundary-links":"",color:"grey",input:"","icon-first":"keyboard_double_arrow_left","icon-last":"keyboard_double_arrow_right"},null,8,["modelValue","max"])])]),_:1})]),_:1})]),_:1})}}};export{Ge as default};
