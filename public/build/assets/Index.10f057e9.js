import{h as ce,u as q,m as S,j as H,c as u,w as l,k as de,r as n,o as c,a as t,b as r,H as ue,d as o,s as p,q as G,f as k,t as w,n as me,p as pe,F as fe}from"./app.cc606831.js";import{_ as ye}from"./AuthenticatedLayout.0bc0b363.js";import{_ as L}from"./DialogConfirm.f96873bf.js";const _e={class:"row q-pb-xl"},qe={class:"column col-12 col-md-6 justify-center"},ve=o("div",{class:"app-fs-28 app-fw-700 app-lh-32 text-grey-8"}," Usu\xE1rios ",-1),be={class:"col-12 col-md-6 flex justify-end items-center"},xe=o("div",{class:"q-ml-sm app-fw-500 app-fs-14 app-lh-20"}," Excluir selecionados ",-1),ge=o("div",{class:"q-ml-sm app-fw-500 app-fs-14 app-lh-20"}," Novo usu\xE1rio ",-1),ke={class:"row q-col-gutter-sm"},we={class:"col-12"},he={class:"col-12"},Ve={class:"col-12"},Ue={class:"col-12"},Ce={class:"col-12"},ze={class:"flex flex-center q-pt-lg q-pa-md q-gutter-sm"},Pe=o("div",{class:"q-ml-sm app-fw-500 app-fs-14 app-lh-20"}," Filtrar ",-1),$e=o("div",{class:"q-ml-sm app-fw-500 app-fs-14 app-lh-20 m-4"}," Limpar ",-1),Be=["onClick"],Se={class:"flex flex-center app-fw-700 app-fs-16"},Ee={class:"app-fw-700 app-fs-16"},je=o("div",{class:"q-ml-sm"}," Editar ",-1),Fe=o("div",{class:"q-ml-sm"}," Visualizar ",-1),Ne=o("div",{class:"q-ml-sm"}," Excluir ",-1),Oe=o("div",{class:"q-ml-sm"}," Visualizar ",-1),De={class:"row items-center text-grey"},Ie={class:"row items-center text-grey"},He={__name:"Index",props:{users:Object,errors:Object,query:Object,canUserStore:Boolean,canUserEdit:Boolean,canUserDestroy:Boolean,canRoleIndex:Boolean},setup(i){const f=i,h=ce(),Q=[{name:"name",align:"left",label:"Nome",field:"name",style:"width: 25%"},{name:"email",align:"left",label:"E-mail do usu\xE1rio",field:"email",style:"width: 25%"},{name:"roles_name",align:"left",label:"Grupos de permiss\xE3o",field:d=>d.roles,style:"width: 25%"},{name:"active",align:"left",label:"Status",field:"active",style:"width: 25%"},{name:"actions",label:"A\xE7\xE3o"}],a=q({orderBy:f.query.orderBy,sort:f.query.sort,page:f.query.page,rowsPerPage:f.query.rowsPerPage,filters:{name:f.query.filters.name,email:f.query.filters.email,cpf:f.query.filters.cpf,phone:f.query.filters.phone,active:f.query.filters.active}}),J=d=>{a.orderBy===d?a.sort=a.sort=="desc"?"asc":"desc":a.sort=="asc",a.orderBy=d,a.page=1,x()},b=d=>{a.filters[d]=null,x()},x=()=>{a.get(route("admin.user.index"),{preserveState:!0,preserveScroll:!0,onSuccess:()=>U.value=!1})},K=()=>q().get(route("admin.user.create")),M=d=>q().get(route("admin.user.edit",d)),E=d=>q().get(route("admin.user.show",d));function W(d){h.dialog({component:L,componentProps:{title:"Excluir usu\xE1rio",message:"Tem certeza que deseja excluir esse usu\xE1rio?"}}).onOk(()=>{q().delete(route("admin.user.destroy",d),{onSuccess:()=>{h.notify({type:"positive",message:"Usu\xE1rio exclu\xEDdo com sucesso",position:"top"})}})})}function X(){h.dialog({component:L,componentProps:{title:"Excluir selecionados",message:"Tem certeza que deseja excluir usu\xE1rios selecionados?"}}).onOk(()=>{q({ids:g.value.map(d=>d.id)}).post(route("admin.user.destroy-multiples"),{onSuccess:()=>{g.value=[],h.notify({type:"positive",message:"Usu\xE1rios exclu\xEDdos com sucesso",position:"top"})}})})}const g=S([]),j=H(()=>Object.values(f.query.filters).filter(d=>d).length),U=S(!1),F=S("users"),Y=()=>q().get(route("admin.role.index")),Z=()=>q().get(route("admin.user.index")),ee=H(()=>de().props.value.auth.user);return(d,s)=>{const N=n("q-breadcrumbs-el"),te=n("q-breadcrumbs"),m=n("q-icon"),v=n("q-btn"),O=n("q-tab"),le=n("q-tabs"),_=n("q-chip"),D=n("q-space"),se=n("q-badge"),V=n("q-input"),I=n("q-select"),A=n("q-menu"),C=n("q-card-section"),z=n("q-separator"),T=n("q-checkbox"),R=n("q-th"),P=n("q-td"),$=n("q-item-section"),B=n("q-item"),oe=n("q-list"),ae=n("q-table"),ne=n("q-pagination"),ie=n("q-card");return c(),u(ye,null,{default:l(()=>[t(r(ue),{title:"Usu\xE1rios"}),o("div",_e,[o("div",qe,[ve,t(te,{class:"text-grey q-mt-sm app-fs-13 app-fw-400 app-lh-16",gutter:"xs"},{default:l(()=>[t(N,{label:"Home",class:"text-grey"}),t(N,{label:"Usu\xE1rios",class:"text-primary"})]),_:1})]),o("div",be,[g.value.length>0&&i.canUserDestroy?(c(),u(v,{key:0,color:"negative",class:"q-mr-md",rounded:"","no-caps":"",outline:"",onClick:X},{default:l(()=>[t(m,{name:"close",size:"xs"}),xe]),_:1})):p("",!0),i.canUserStore?(c(),u(v,{key:1,color:"primary",rounded:"","no-caps":"",onClick:K},{default:l(()=>[t(m,{name:"add",size:"xs"}),ge]),_:1})):p("",!0)])]),t(ie,{flat:"",class:"app-br-16"},{default:l(()=>[i.canRoleIndex?(c(),u(le,{key:0,modelValue:F.value,"onUpdate:modelValue":s[0]||(s[0]=e=>F.value=e),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify","no-caps":""},{default:l(()=>[t(O,{name:"users",label:"Usu\xE1rios",class:"q-py-md"}),t(O,{name:"roles",label:"Grupos de usu\xE1rios",class:"q-py-md",onClick:Y})]),_:1},8,["modelValue"])):p("",!0),t(C,{class:"row items-center q-py-sm q-px-lg"},{default:l(()=>[i.query.filters.name?(c(),u(_,{key:0,class:"adm-chip-primary",label:`Nome = ${i.query.filters.name}`},{default:l(()=>[t(m,{name:"cancel",size:"xs",onClick:s[1]||(s[1]=e=>b("name")),class:"q-ml-xs cursor-pointer"})]),_:1},8,["label"])):p("",!0),i.query.filters.email?(c(),u(_,{key:1,class:"adm-chip-primary",label:`E-mail = ${i.query.filters.email}`},{default:l(()=>[t(m,{name:"cancel",size:"xs",onClick:s[2]||(s[2]=e=>b("email")),class:"q-ml-xs cursor-pointer"})]),_:1},8,["label"])):p("",!0),i.query.filters.cpf?(c(),u(_,{key:2,class:"adm-chip-primary",label:`CPF = ${i.query.filters.cpf}`},{default:l(()=>[t(m,{name:"cancel",size:"xs",onClick:s[3]||(s[3]=e=>b("cpf")),class:"q-ml-xs cursor-pointer"})]),_:1},8,["label"])):p("",!0),i.query.filters.phone?(c(),u(_,{key:3,class:"adm-chip-primary",label:`Telefone = ${i.query.filters.phone}`},{default:l(()=>[t(m,{name:"cancel",size:"xs",onClick:s[4]||(s[4]=e=>b("phone")),class:"q-ml-xs cursor-pointer"})]),_:1},8,["label"])):p("",!0),i.query.filters.active==1?(c(),u(_,{key:4,class:"adm-chip-primary",label:"Status = Ativo"},{default:l(()=>[t(m,{name:"cancel",size:"xs",onClick:s[5]||(s[5]=e=>b("active")),class:"q-ml-xs cursor-pointer"})]),_:1})):p("",!0),i.query.filters.active==0?(c(),u(_,{key:5,class:"adm-chip-primary",label:"Status = Inativo"},{default:l(()=>[t(m,{name:"cancel",size:"xs",onClick:s[6]||(s[6]=e=>b("active")),class:"q-ml-xs cursor-pointer"})]),_:1})):p("",!0),t(D),t(v,{round:"",dense:"",flat:"",color:"primary"},{default:l(()=>[r(j)?(c(),u(se,{key:0,color:"primary",floating:"",rounded:"",label:r(j)},null,8,["label"])):p("",!0),t(m,{name:"tune",class:"rotate-90"}),t(A,{style:{"min-width":"500px"},"max-width":"500px",class:"bg-white q-pa-md app-br-16",modelValue:U.value,"onUpdate:modelValue":s[12]||(s[12]=e=>U.value=e)},{default:l(()=>[o("div",ke,[o("div",we,[t(V,{outlined:"",modelValue:r(a).filters.name,"onUpdate:modelValue":s[7]||(s[7]=e=>r(a).filters.name=e),label:"Nome do usu\xE1rio"},null,8,["modelValue"])]),o("div",he,[t(V,{outlined:"",modelValue:r(a).filters.email,"onUpdate:modelValue":s[8]||(s[8]=e=>r(a).filters.email=e),label:"Email"},null,8,["modelValue"])]),o("div",Ve,[t(V,{outlined:"",modelValue:r(a).filters.cpf,"onUpdate:modelValue":s[9]||(s[9]=e=>r(a).filters.cpf=e),label:"CPF",mask:"###.###.###-##"},null,8,["modelValue"])]),o("div",Ue,[t(V,{outlined:"",modelValue:r(a).filters.phone,"onUpdate:modelValue":s[10]||(s[10]=e=>r(a).filters.phone=e),label:"Telefone do usu\xE1rio",mask:"(##) #########"},null,8,["modelValue"])]),o("div",Ce,[t(I,{options:[{label:"Ativo",value:1},{label:"Inativo",value:0}],outlined:"",modelValue:r(a).filters.active,"onUpdate:modelValue":s[11]||(s[11]=e=>r(a).filters.active=e),label:"Status","map-options":"","emit-value":""},{"selected-item":l(e=>[t(_,{tabindex:e.tabindex,"text-color":"white",class:G([{"adm-bg-positive":e.opt.value,"adm-bg-negative":!e.opt.value},"q-my-none"]),dense:""},{default:l(()=>[k(w(e.opt.label),1)]),_:2},1032,["tabindex","class"])]),_:1},8,["modelValue"])])]),o("div",ze,[t(v,{color:"primary",rounded:"","no-caps":"",onClick:x},{default:l(()=>[t(m,{name:"check",size:"xs"}),Pe]),_:1}),t(v,{color:"primary",rounded:"",outline:"","no-caps":"",onClick:Z},{default:l(()=>[t(m,{name:"close",size:"xs"}),$e]),_:1})])]),_:1},8,["modelValue"])]),_:1})]),_:1}),t(C,{class:"q-py-none"},{default:l(()=>[t(z,{color:"grey-3"})]),_:1}),t(C,{class:"q-py-none"},{default:l(()=>[t(ae,{rows:i.users.data,columns:Q,flat:"",class:"text-grey-8",selected:g.value,"onUpdate:selected":s[13]||(s[13]=e=>g.value=e),selection:"multiple","hide-pagination":"",pagination:{rowsPerPage:r(a).rowsPerPage}},{"header-selection":l(e=>[t(T,{modelValue:e.selected,"onUpdate:modelValue":y=>e.selected=y},null,8,["modelValue","onUpdate:modelValue"])]),"body-selection":l(e=>[t(T,{"model-value":e.selected,"onUpdate:modelValue":(y,re)=>{Object.getOwnPropertyDescriptor(e,"selected").set(y,re)}},null,8,["model-value","onUpdate:modelValue"])]),"header-cell":l(e=>[t(R,{props:e},{default:l(()=>[o("div",{class:"app-fw-700 app-fs-16 cursor-pointer",onClick:y=>J(e.col.name)},[k(w(e.col.label)+" ",1),e.col.name===i.query.orderBy?(c(),u(m,{key:0,name:i.query.sort=="desc"?"keyboard_arrow_up":"keyboard_arrow_down"},null,8,["name"])):p("",!0)],8,Be)]),_:2},1032,["props"])]),"header-cell-actions":l(e=>[t(R,{props:e,"auto-width":""},{default:l(()=>[o("div",Se,w(e.col.label),1)]),_:2},1032,["props"])]),"body-cell-roles_name":l(e=>[t(P,{props:e},{default:l(()=>[(c(!0),me(fe,null,pe(e.row.roles,y=>(c(),u(_,{class:"adm-chip-primary"},{default:l(()=>[k(w(y.name),1)]),_:2},1024))),256))]),_:2},1032,["props"])]),"body-cell-active":l(e=>[t(P,{props:e},{default:l(()=>[t(_,{"text-color":"white",class:G({"adm-bg-positive":e.row.active,"adm-bg-negative":!e.row.active})},{default:l(()=>[k(w(e.row.active?"Ativo":"Inativo"),1)]),_:2},1032,["class"])]),_:2},1032,["props"])]),"body-cell-actions":l(e=>[t(P,{props:e},{default:l(()=>[o("div",Ee,[i.canUserEdit||i.canUserDestroy?(c(),u(v,{key:0,icon:"more_vert",flat:""},{default:l(()=>[t(A,{offset:[65,0]},{default:l(()=>[t(oe,null,{default:l(()=>[i.canUserEdit?(c(),u(B,{key:0,clickable:"",onClick:y=>M(e.row.id),class:"text-grey-7 flex items-center"},{default:l(()=>[t(m,{name:"edit",size:"xs"}),t($,{"no-wrap":""},{default:l(()=>[je]),_:1})]),_:2},1032,["onClick"])):p("",!0),t(z),t(B,{clickable:"",onClick:y=>E(e.row.id),class:"text-grey-7 flex items-center"},{default:l(()=>[t(m,{name:"visibility",size:"xs"}),t($,{"no-wrap":""},{default:l(()=>[Fe]),_:1})]),_:2},1032,["onClick"]),t(z),i.canUserDestroy&&r(ee).id!==e.row.id?(c(),u(B,{key:1,clickable:"",onClick:y=>W(e.row.id),class:"text-grey-7 flex flex-center"},{default:l(()=>[t(m,{name:"close",size:"xs"}),t($,{"no-wrap":""},{default:l(()=>[Ne]),_:1})]),_:2},1032,["onClick"])):p("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):(c(),u(v,{key:1,onClick:y=>E(e.row.id),class:"text-grey-7 flex flex-center text-no-wrap",flat:"","no-caps":""},{default:l(()=>[t(m,{name:"visibility",size:"xs"}),Oe]),_:2},1032,["onClick"]))])]),_:2},1032,["props"])]),_:1},8,["rows","selected","pagination"]),o("div",De,[t(D),o("div",Ie,[k(" Resultado por p\xE1gina "),t(I,{options:[5,10,15],modelValue:r(a).rowsPerPage,"onUpdate:modelValue":[s[14]||(s[14]=e=>r(a).rowsPerPage=e),x],borderless:"",class:"q-ml-md"},null,8,["modelValue"])]),t(ne,{modelValue:r(a).page,"onUpdate:modelValue":[s[15]||(s[15]=e=>r(a).page=e),x],max:i.users.meta.last_page,"direction-links":"","boundary-links":"",color:"grey",input:"","icon-first":"keyboard_double_arrow_left","icon-last":"keyboard_double_arrow_right"},null,8,["modelValue","max"])])]),_:1})]),_:1})]),_:1})}}};export{He as default};
