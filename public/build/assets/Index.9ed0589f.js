import{h as ie,u as q,m as A,j as de,c as m,w as o,r as n,i as me,o as u,a as e,b as c,H as ue,d as s,s as f,f as V,t as h,e as F,q as pe}from"./app.cc606831.js";import{_ as _e}from"./AuthenticatedLayout.0bc0b363.js";import{_ as L}from"./DialogConfirm.f96873bf.js";import{_ as fe}from"./SummaryContents.48ef486f.js";const ye={class:"row q-pb-lg"},qe={class:"column col-12 col-md-6 justify-center"},be=s("div",{class:"app-fs-28 app-fw-700 app-lh-32 text-grey-8"}," Conte\xFAdos ",-1),xe={class:"col-12 col-md-6 flex justify-end items-center"},he=s("div",{class:"q-ml-sm app-fw-500 app-fs-14 app-lh-20"}," Excluir selecionados ",-1),ve=s("div",{class:"q-ml-sm app-fw-500 app-fs-14 app-lh-20"}," Novo conte\xFAdo ",-1),ge={class:"row q-col-gutter-sm"},we={class:"col-12"},ke={class:"col-12"},Ve={class:"text-red"},Ce={class:"row items-center justify-end"},De={class:"col-12"},ze={class:"text-red"},je={class:"row items-center justify-end"},Ue={class:"col-12"},Ee={class:"flex flex-center q-pt-lg q-pa-md q-gutter-sm"},$e=s("div",{class:"q-ml-sm app-fw-500 app-fs-14 app-lh-20"}," Filtrar ",-1),Me=s("div",{class:"q-ml-sm app-fw-500 app-fs-14 app-lh-20 m-4"}," Limpar ",-1),Ye=["onClick"],Be={class:"flex flex-center app-fw-700 app-fs-16"},Pe={class:"row items-center justify-center app-fw-700 app-fs-16"},Oe=s("div",{class:"q-ml-sm"}," Editar ",-1),Se=s("div",{class:"q-ml-sm"}," Visualizar ",-1),He=s("div",{class:"q-ml-sm"}," Excluir ",-1),Te=s("div",{class:"q-ml-sm"}," Visualizar ",-1),Ie={class:"row items-center text-grey"},Ne={class:"row items-center text-grey"},Qe={__name:"Index",props:{contents:Object,errors:Object,query:Object,contentReleasedThisMonth:Object,contentsMostViewed:Object,contentsExpiresIn60Days:Object,canContentStore:Boolean,canContentEdit:Boolean,canContentDestroy:Boolean},setup(r){const y=r,v=ie(),Q=[{name:"name",align:"left",label:"Nome",field:"name",style:"width: 25%"},{name:"category_name",align:"left",label:"Categoria",field:i=>i.category.name,style:"width: 10%"},{name:"sections_name",align:"left",label:"Se\xE7\xF5es",field:i=>i.sections,style:"width: 35%"},{name:"launch_start_at",align:"left",label:"Lan\xE7amento",field:"launch_start_at",style:"width: 15%"},{name:"end_at",align:"left",label:"Encerramento",field:"end_at",style:"width: 15%"},{name:"actions",label:"A\xE7\xE3o"}],l=q({orderBy:y.query.orderBy,sort:y.query.sort,page:y.query.page,rowsPerPage:y.query.rowsPerPage,filters:{name:y.query.filters.name,active:y.query.filters.active,launch_start_at:y.query.filters.launch_start_at,launch_end_at:y.query.filters.launch_end_at}}),G=i=>{l.orderBy===i?l.sort=l.sort=="desc"?"asc":"desc":l.sort=="asc",l.orderBy=i,l.page=1,w()},g=i=>{l.filters[i]=null,w()},w=()=>{l.get(route("admin.content.index"),{preserveState:!0,preserveScroll:!0,onSuccess:()=>C.value=!1})},J=()=>q().get(route("admin.content.create")),K=i=>q().get(route("admin.content.edit",i)),$=i=>q().get(route("admin.content.show",i)),W=()=>{axios.get(route("admin.content.export",l),{responseType:"blob"}).then(i=>{const a=window.URL.createObjectURL(new Blob([i.data])),b=document.createElement("a");b.href=a,b.setAttribute("download","conteudos.xlsx"),b.click()}).catch(i=>{v.notify({type:"negative",message:"Erro ao fazer a exporta\xE7\xE3o",position:"center"})})},X=i=>{v.dialog({component:L,componentProps:{title:"Excluir conte\xFAdo",message:"Ao excluir este conte\xFAdo, todos os epis\xF3dios, temporadas e extras ser\xE3o exclu\xEDdos tamb\xE9m. Tem certeza que deseja excluir conte\xFAdo?"}}).onOk(()=>{q().delete(route("admin.content.destroy",i),{preserveState:!0,preserveScroll:!0,onSuccess:()=>{v.notify({type:"positive",message:"Conte\xFAdo exclu\xEDdo com sucesso",position:"top"})}})})},Z=()=>{v.dialog({component:L,componentProps:{title:"Excluir selecionados",message:"Tem certeza que deseja excluir conte\xFAdos selecionadas?"}}).onOk(()=>{q({ids:k.value.map(i=>i.id)}).post(route("admin.content.destroy-multiples"),{onSuccess:()=>{k.value=[],v.notify({type:"positive",message:"Conte\xFAdo exclu\xEDdas com sucesso",position:"top"})}})})},k=A([]),M=de(()=>Object.values(y.query.filters).filter(i=>i).length),C=A(!1),ee=()=>q().get(route("admin.content.index"));return(i,a)=>{const b=n("q-breadcrumbs-el"),te=n("q-breadcrumbs"),d=n("q-icon"),p=n("q-btn"),x=n("q-chip"),Y=n("q-space"),oe=n("q-tooltip"),ae=n("q-badge"),D=n("q-input"),B=n("q-date"),P=n("q-time"),O=n("q-popup-proxy"),S=n("q-select"),H=n("q-menu"),z=n("q-card-section"),j=n("q-separator"),T=n("q-checkbox"),I=n("q-th"),N=n("q-td"),U=n("q-item-section"),E=n("q-item"),le=n("q-list"),se=n("q-table"),ne=n("q-pagination"),re=n("q-card"),R=me("close-popup");return u(),m(_e,null,{default:o(()=>[e(c(ue),{title:"Conte\xFAdos"}),s("div",ye,[s("div",qe,[be,e(te,{class:"text-grey q-mt-sm app-fs-13 app-fw-400 app-lh-16",gutter:"xs"},{default:o(()=>[e(b,{label:"Home",class:"text-grey"}),e(b,{label:"Conte\xFAdos",class:"text-primary"})]),_:1})]),s("div",xe,[k.value.length>0?(u(),m(p,{key:0,color:"negative",class:"q-mr-md",rounded:"","no-caps":"",outline:"",onClick:Z},{default:o(()=>[e(d,{name:"close",size:"xs"}),he]),_:1})):f("",!0),e(p,{color:"primary",rounded:"","no-caps":"",onClick:J},{default:o(()=>[e(d,{name:"add",size:"xs"}),ve]),_:1})])]),e(fe,{contentReleasedThisMonth:r.contentReleasedThisMonth,contentsMostViewed:r.contentsMostViewed,contentsExpiresIn60Days:r.contentsExpiresIn60Days},null,8,["contentReleasedThisMonth","contentsMostViewed","contentsExpiresIn60Days"]),e(re,{flat:"",class:"app-br-16"},{default:o(()=>[e(z,{class:"row items-center q-py-sm q-px-lg"},{default:o(()=>[r.query.filters.name?(u(),m(x,{key:0,class:"adm-chip-primary",label:`Nome = ${r.query.filters.name}`},{default:o(()=>[e(d,{name:"cancel",size:"xs",onClick:a[0]||(a[0]=t=>g("name")),class:"q-ml-xs cursor-pointer"})]),_:1},8,["label"])):f("",!0),r.query.filters.launch_start_at?(u(),m(x,{key:1,class:"adm-chip-primary",label:`Inicio = ${r.query.filters.launch_start_at}`},{default:o(()=>[e(d,{name:"cancel",size:"xs",onClick:a[1]||(a[1]=t=>g("launch_start_at")),class:"q-ml-xs cursor-pointer"})]),_:1},8,["label"])):f("",!0),r.query.filters.launch_end_at?(u(),m(x,{key:2,class:"adm-chip-primary",label:`Termina = ${r.query.filters.launch_end_at}`},{default:o(()=>[e(d,{name:"cancel",size:"xs",onClick:a[2]||(a[2]=t=>g("launch_end_at")),class:"q-ml-xs cursor-pointer"})]),_:1},8,["label"])):f("",!0),r.query.filters.active==1?(u(),m(x,{key:3,class:"adm-chip-primary",label:"Status = Ativo"},{default:o(()=>[e(d,{name:"cancel",size:"xs",onClick:a[3]||(a[3]=t=>g("active")),class:"q-ml-xs cursor-pointer"})]),_:1})):f("",!0),r.query.filters.active==0?(u(),m(x,{key:4,class:"adm-chip-primary",label:"Status = Inativo"},{default:o(()=>[e(d,{name:"cancel",size:"xs",onClick:a[4]||(a[4]=t=>g("active")),class:"q-ml-xs cursor-pointer"})]),_:1})):f("",!0),e(Y),e(p,{round:"",dense:"",flat:"",color:"primary",onClick:W},{default:o(()=>[e(d,{name:"save_alt"}),e(oe,{anchor:"center left",self:"center right",offset:[10,10],class:"text-body2 bg-grey-10"},{default:o(()=>[V(" Exportar todos os registros filtrados ")]),_:1})]),_:1}),e(p,{round:"",dense:"",flat:"",color:"primary"},{default:o(()=>[c(M)?(u(),m(ae,{key:0,color:"primary",floating:"",rounded:"",label:c(M)},null,8,["label"])):f("",!0),e(d,{name:"tune",class:"rotate-90"}),e(H,{style:{"min-width":"500px"},"max-width":"500px",class:"bg-white q-pa-md app-br-16",modelValue:C.value,"onUpdate:modelValue":a[13]||(a[13]=t=>C.value=t)},{default:o(()=>[s("div",ge,[s("div",we,[e(D,{outlined:"",modelValue:c(l).filters.name,"onUpdate:modelValue":a[5]||(a[5]=t=>c(l).filters.name=t),label:"Nome do conte\xFAdo"},null,8,["modelValue"])]),s("div",ke,[e(D,{outlined:"",modelValue:c(l).filters.launch_start_at,"onUpdate:modelValue":a[8]||(a[8]=t=>c(l).filters.launch_start_at=t),mask:"##/##/#### ##:##",label:"Data e hora de inicio",placeholder:"dia/m\xEAs/ano hora:min","bottom-slots":Boolean(r.errors["filters.launch_start_at"]),clearable:""},{hint:o(()=>[s("div",Ve,h(r.errors["filters.launch_start_at"]),1)]),prepend:o(()=>[e(d,{name:"o_calendar_today"})]),default:o(()=>[e(O,{class:"row"},{default:o(()=>[e(B,{modelValue:c(l).filters.launch_start_at,"onUpdate:modelValue":a[6]||(a[6]=t=>c(l).filters.launch_start_at=t),mask:"DD/MM/YYYY HH:mm",flat:"",square:""},null,8,["modelValue"]),e(P,{modelValue:c(l).filters.launch_start_at,"onUpdate:modelValue":a[7]||(a[7]=t=>c(l).filters.launch_start_at=t),mask:"DD/MM/YYYY HH:mm",format24h:"",flat:"",square:""},{default:o(()=>[s("div",Ce,[F(e(p,{label:"Ok",color:"primary",flat:""},null,512),[[R]])])]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue","bottom-slots"])]),s("div",De,[e(D,{outlined:"",modelValue:c(l).filters.launch_end_at,"onUpdate:modelValue":a[11]||(a[11]=t=>c(l).filters.launch_end_at=t),mask:"##/##/#### ##:##",label:"Data e hora de t\xE9rmino","bottom-slots":Boolean(r.errors["filters.launch_end_at"]),placeholder:"dia/m\xEAs/ano hora:min",clearable:""},{hint:o(()=>[s("div",ze,h(r.errors["filters.launch_end_at"]),1)]),prepend:o(()=>[e(d,{name:"o_calendar_today"})]),default:o(()=>[e(O,{class:"row"},{default:o(()=>[e(B,{modelValue:c(l).filters.launch_end_at,"onUpdate:modelValue":a[9]||(a[9]=t=>c(l).filters.launch_end_at=t),mask:"DD/MM/YYYY HH:mm",flat:"",square:""},null,8,["modelValue"]),e(P,{modelValue:c(l).filters.launch_end_at,"onUpdate:modelValue":a[10]||(a[10]=t=>c(l).filters.launch_end_at=t),mask:"DD/MM/YYYY HH:mm",format24h:"",flat:"",square:""},{default:o(()=>[s("div",je,[F(e(p,{label:"Ok",color:"primary",flat:""},null,512),[[R]])])]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue","bottom-slots"])]),s("div",Ue,[e(S,{options:[{label:"Ativo",value:1},{label:"Inativo",value:0}],outlined:"",modelValue:c(l).filters.active,"onUpdate:modelValue":a[12]||(a[12]=t=>c(l).filters.active=t),label:"Status","map-options":"","emit-value":"",clearable:""},{"selected-item":o(t=>[e(x,{tabindex:t.tabindex,"text-color":"white",class:pe([{"adm-bg-positive":t.opt.value,"adm-bg-negative":!t.opt.value},"q-my-none"]),dense:""},{default:o(()=>[V(h(t.opt.label),1)]),_:2},1032,["tabindex","class"])]),_:1},8,["modelValue"])])]),s("div",Ee,[e(p,{color:"primary",rounded:"","no-caps":"",onClick:w},{default:o(()=>[e(d,{name:"check",size:"xs"}),$e]),_:1}),e(p,{color:"primary",rounded:"",outline:"","no-caps":"",onClick:ee},{default:o(()=>[e(d,{name:"close",size:"xs"}),Me]),_:1})])]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(z,{class:"q-py-none"},{default:o(()=>[e(j,{color:"grey-3"})]),_:1}),e(z,{class:"q-py-none"},{default:o(()=>[e(se,{rows:r.contents.data,columns:Q,flat:"",class:"text-grey-8",selected:k.value,"onUpdate:selected":a[14]||(a[14]=t=>k.value=t),selection:"multiple","hide-pagination":"",pagination:{rowsPerPage:c(l).rowsPerPage}},{"header-selection":o(t=>[e(T,{modelValue:t.selected,"onUpdate:modelValue":_=>t.selected=_},null,8,["modelValue","onUpdate:modelValue"])]),"body-selection":o(t=>[e(T,{"model-value":t.selected,"onUpdate:modelValue":(_,ce)=>{Object.getOwnPropertyDescriptor(t,"selected").set(_,ce)}},null,8,["model-value","onUpdate:modelValue"])]),"header-cell":o(t=>[e(I,{props:t},{default:o(()=>[s("div",{class:"app-fw-700 app-fs-16 cursor-pointer",onClick:_=>G(t.col.name)},[V(h(t.col.label)+" ",1),t.col.name===r.query.orderBy?(u(),m(d,{key:0,name:r.query.sort=="desc"?"keyboard_arrow_up":"keyboard_arrow_down"},null,8,["name"])):f("",!0)],8,Ye)]),_:2},1032,["props"])]),"header-cell-actions":o(t=>[e(I,{props:t,"auto-width":""},{default:o(()=>[s("div",Be,h(t.col.label),1)]),_:2},1032,["props"])]),"body-cell-sections_name":o(t=>[e(N,{props:t},{default:o(()=>[V(h(t.row.sections.map(_=>_.name).join(", ")),1)]),_:2},1032,["props"])]),"body-cell-actions":o(t=>[e(N,{props:t},{default:o(()=>[s("div",Pe,[r.canContentEdit||r.canContentDestroy?(u(),m(p,{key:0,icon:"more_vert",flat:""},{default:o(()=>[e(H,{offset:[65,0]},{default:o(()=>[e(le,null,{default:o(()=>[r.canContentEdit?(u(),m(E,{key:0,clickable:"",onClick:_=>K(t.row.id),class:"text-grey-7 flex items-center"},{default:o(()=>[e(d,{name:"edit",size:"xs"}),e(U,{"no-wrap":""},{default:o(()=>[Oe]),_:1})]),_:2},1032,["onClick"])):f("",!0),e(j),e(E,{clickable:"",onClick:_=>$(t.row.id),class:"text-grey-7 flex items-center"},{default:o(()=>[e(d,{name:"visibility",size:"xs"}),e(U,{"no-wrap":""},{default:o(()=>[Se]),_:1})]),_:2},1032,["onClick"]),e(j),r.canContentDestroy?(u(),m(E,{key:1,clickable:"",onClick:_=>X(t.row.id),class:"text-grey-7 flex flex-center"},{default:o(()=>[e(d,{name:"close",size:"xs"}),e(U,{"no-wrap":""},{default:o(()=>[He]),_:1})]),_:2},1032,["onClick"])):f("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):(u(),m(p,{key:1,onClick:_=>$(t.row.id),class:"text-grey-7 flex flex-center text-no-wrap",flat:"","no-caps":""},{default:o(()=>[e(d,{name:"visibility",size:"xs"}),Te]),_:2},1032,["onClick"]))])]),_:2},1032,["props"])]),_:1},8,["rows","selected","pagination"]),s("div",Ie,[e(Y),s("div",Ne,[V(" Resultado por p\xE1gina "),e(S,{options:[5,10,15],modelValue:c(l).rowsPerPage,"onUpdate:modelValue":[a[15]||(a[15]=t=>c(l).rowsPerPage=t),w],borderless:"",class:"q-ml-md"},null,8,["modelValue"])]),e(ne,{modelValue:c(l).page,"onUpdate:modelValue":[a[16]||(a[16]=t=>c(l).page=t),w],max:r.contents.meta.last_page,"direction-links":"","boundary-links":"",color:"grey",input:"","icon-first":"keyboard_double_arrow_left","icon-last":"keyboard_double_arrow_right"},null,8,["modelValue","max"])])]),_:1})]),_:1})]),_:1})}}};export{Qe as default};
