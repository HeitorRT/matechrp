import{j as P,k as F,m as j,L as D,l as E,P as B,K as S,r as o,o as _,c as p,w as t,f as M,t as b,s as N,a as e,d as n,h as R,n as H,p as T,q as I,F as U,b as K,u as C,g as O}from"./app.cc606831.js";import{_ as Q}from"./AdminDialog.1d33fa88.js";const Y={class:"column q-pa-md"},G={class:"row justify-between q-pb-md q-px-md"},J=n("div",{class:"text-white app-fs-19 app-fw-700 app-lh-24"}," Suas notica\xE7\xF5es ",-1),W={class:"text-white app-fs-19 app-fw-700 app-lh-24 row justify-between"},X={class:"text-white app-fs-19 app-fw-400 app-lh-24 q-my-sm"},Z={class:"student-text-grey app-fs-19 app-fw-400 app-lh-24"},ee={class:"column q-pa-md"},te=["onClick"],se=n("div",{class:"text-white app-fs-19 app-fw-700 app-lh-24"}," N\xE3o receber mais este tipo de notifica\xE7\xE3o. ",-1),oe=[se],ae=n("div",{class:"text-white app-fs-19 app-fw-700 app-lh-24 row justify-center"}," Sem notifica\xE7\xE3o no momento. ",-1),ne={__name:"Notification",setup(V){const m=P(()=>F().props.value.auth.user),u=j(!1),i=j(!1);var w=new Pusher("d115b284a9d9df8fddca",{cluster:"us2"}).subscribe(`pusher-notification-${m.value.id}`);w.bind(`meu-evento-${m.value.id}`,function(a){f()});const g=a=>{D.put(route("student.notification.not-show-me-notification",a)).then(s=>{k(a)})},k=a=>{D.put(route("student.notification.make-notification-as-read",a)).then(s=>{f()})},$=()=>{D.put(route("student.notification.make-all-notification-as-read")).then(a=>{f()})},f=()=>{D.get(route("student.notification.index")).then(a=>{i.value=[],a.data.notifications.forEach(s=>{var l,r;i.value.push({id:s.id,title:s.title,text:s.text,send_at_by_pusher:(l=s.send_at_by_pusher)!=null?l:new Date,send_at_by_pusher_format:d((r=s.send_at_by_pusher)!=null?r:new Date)})})})},d=a=>{if(!a)return"";let s=E.getDateDiff(new Date,new Date(a),"minutes");if(s<60)return`Enviado a ${s} ${s===1?"minuto":"minutos"}`;let l=E.getDateDiff(new Date,new Date(a),"hours");if(l<24)return`Enviado a ${l} ${l===1?"hora":"horas"}`;let r=E.getDateDiff(new Date,new Date(a),"days");return`Enviado a ${r} ${r===1?"dia":"dias"}`};return B(()=>u.value,(a,s)=>{a&&i.value.forEach(l=>l.send_at_by_pusher_format=d(l.send_at_by_pusher))}),S(()=>{f(),window.addEventListener("scroll",()=>u.value=!1)}),(a,s)=>{const l=o("q-badge"),r=o("q-icon"),h=o("q-card-section"),x=o("q-menu"),q=o("q-card"),L=o("q-item"),z=o("q-virtual-scroll");return _(),p(r,{class:"q-mx-sm cursor-pointer",size:"28px",color:"white",name:"o_notifications"},{default:t(()=>[i.value.length>0?(_(),p(l,{key:0,rounded:"",color:"red",floating:"",transparent:""},{default:t(()=>[M(b(i.value.length),1)]),_:1})):N("",!0),e(x,{modelValue:u.value,"onUpdate:modelValue":s[2]||(s[2]=c=>u.value=c),offset:[0,5],class:"app-br-16 student-bg-dark",style:{width:"674px"}},{default:t(()=>[n("div",Y,[n("div",G,[J,e(r,{name:"o_cancel",size:"24px",color:"white",onClick:s[0]||(s[0]=c=>u.value=!1),class:"cursor-pointer"})]),i.value.length>0?(_(),p(z,{key:0,style:{"max-height":"300px"},items:i.value,separator:"",dark:""},{default:t(({item:c,index:A})=>[e(L,{class:"q-px-none cursor-pointer"},{default:t(()=>[e(q,{class:"transparent fit row",flat:""},{default:t(()=>[e(h,{class:"q-py-lg col-11",onClick:v=>k(c.id)},{default:t(()=>[n("div",W,b(c.title),1),n("div",X,b(c.text),1),n("div",Z,b(c.send_at_by_pusher_format),1)]),_:2},1032,["onClick"]),c.mandatory?N("",!0):(_(),p(h,{key:0,class:"flex justify-center cursor-pointer col-1"},{default:t(()=>[e(r,{name:"more_vert",size:"24px",color:"white"},{default:t(()=>[e(x,{offset:[0,5],class:"app-br-16 student-bg-purple",style:{width:"460px"}},{default:t(()=>[n("div",ee,[n("div",{class:"row q-px-md cursor-pointer",onClick:v=>g(c.id)},oe,8,te)])]),_:2},1024)]),_:2},1024)]),_:2},1024))]),_:2},1024)]),_:2},1024)]),_:1},8,["items"])):(_(),p(q,{key:1,class:"transparent fit row",flat:""},{default:t(()=>[e(h,{class:"q-py-lg cursor-pointer col-11"},{default:t(()=>[ae]),_:1})]),_:1})),i.value.length>0?(_(),p(q,{key:2,class:"transparent fit row",flat:""},{default:t(()=>[e(h,{class:"q-py-lg col-11"},{default:t(()=>[n("small",{class:"text-white cursor-pointer",onClick:s[1]||(s[1]=c=>$())}," marcar todas como lido ")]),_:1})]),_:1})):N("",!0)])]),_:1},8,["modelValue"])]),_:1})}}},le=["onClick"],re=["src"],ie={class:"row no-wrap student-bg-dark"},ce={class:"column items-center"},ue=n("div",{class:"q-ml-sm app-fs-19 app-fw-400 app-lh-24"}," Editar perfil",-1),_e=n("div",{class:"q-ml-sm app-fs-19 app-fw-400 app-lh-24"}," Logout",-1),pe={__name:"Index",setup(V){const m=R(),u=P(()=>F().props.value.auth.user),i=()=>{m.dialog({component:Q,componentProps:{title:"Logout",message:"Deseja realmente sair da \xE1rea do aluno?",confirm:!0}}).onOk(()=>{C().post(route("student.auth.logout"))})},y=()=>C().get(route("student.search")),w=()=>C().get(route("student.edit-profile")),g=d=>C().get(route(d)),k=P(()=>u.value.profile_image?u.value.profile_image:"/img/student/avatar.png"),$=j(0);S(()=>{window.addEventListener("scroll",()=>$.value=window.scrollY)});const f=[{label:"Pagina Inicial",route:"student.home"},{label:"Filmes",route:"student.movie"},{label:"S\xE9ries",route:"student.serie"},{label:"Lives",route:"student.live"},{label:"MasterClass",route:"student.test"},{label:"Cin\xE9 Deb\xE1t",route:"student.test"},{label:"Agenda",route:"student.test"},{label:"Loja",route:"student.test"},{label:"Suporte",route:"student.test"}];return(d,a)=>{const s=o("q-img"),l=o("q-space"),r=o("q-icon"),h=o("q-avatar"),x=o("q-item-section"),q=o("q-item"),L=o("q-separator"),z=o("q-list"),c=o("q-menu"),A=o("q-toolbar");return _(),p(A,{class:I(["text-white student-topbar",{"student-bg-dark":$.value>150}])},{default:t(()=>[e(s,{src:"/img/student/logo_ligia_academy.png",class:"student-topbar-logo q-mr-xl"}),e(l),(_(),H(U,null,T(f,v=>n("div",{class:I(["q-mr-xl app-lh-24 app-fs-19 cursor-pointer",{"app-fw-700":d.route().current(v.route),"app-fw-400":!d.route().current(v.route)}]),onClick:de=>g(v.route)},b(v.label),11,le)),64)),e(l),e(ne),e(r,{name:"search",size:"28px",class:"q-mx-sm cursor-pointer",onClick:y}),e(h,{size:"40px",class:"q-mx-sm"},{default:t(()=>[n("img",{src:K(k)},null,8,re)]),_:1}),e(r,{name:"keyboard_arrow_down",size:"28px",class:"q-ml-sm cursor-pointer"},{default:t(()=>[e(c,{class:"app-br-16 student-bg-dark"},{default:t(()=>[n("div",ie,[n("div",ce,[e(z,null,{default:t(()=>[e(q,{clickable:"",onClick:w,class:"student-text-grey flex items-center"},{default:t(()=>[e(r,{name:"o_edit",size:"21px"}),e(x,{"no-wrap":""},{default:t(()=>[ue]),_:1})]),_:1}),e(L,{dark:""}),e(q,{clickable:"",onClick:i,class:"student-text-grey flex items-center"},{default:t(()=>[e(r,{name:"close",size:"xs"}),e(x,{"no-wrap":""},{default:t(()=>[_e]),_:1})]),_:1})]),_:1})])])]),_:1})]),_:1})]),_:1},8,["class"])}}};const he={__name:"AuthenticatedLayout",setup(V){return(m,u)=>{const i=o("q-header"),y=o("q-page"),w=o("q-page-container"),g=o("q-layout");return _(),p(g,{view:"lHh lpr lFf"},{default:t(()=>[e(i,null,{default:t(()=>[e(pe)]),_:1}),e(w,null,{default:t(()=>[e(y,null,{default:t(()=>[O(m.$slots,"default")]),_:3})]),_:3})]),_:3})}}};export{he as _};
