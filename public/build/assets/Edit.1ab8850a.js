import{_ as ce}from"./AuthenticatedLayout.0bc0b363.js";import{h as ue,u as Q,j as O,m as q,c as D,w as n,r as _,i as pe,o as c,a,b as o,H as _e,d as l,s as h,t as u,e as X,n as v,f as z,B,C as L,D as S,p as ve,F as be}from"./app.cc606831.js";import{u as Z}from"./index.common.8f199d34.js";import{_ as fe}from"./DialogConfirm.f96873bf.js";const he={class:"row q-mb-lg"},ge={class:"column col-12 col-md-6 justify-center"},ye=l("div",{class:"app-fs-28 app-fw-700 app-lh-32 text-grey-8"}," Editar evento ao vivo ",-1),ke={class:"col-12 col-md-6 flex justify-end items-center"},xe=l("div",{class:"q-ml-sm app-fw-500 app-fs-14 app-lh-20"}," Excluir evento ",-1),qe=l("div",{class:"q-ml-sm app-fw-500 app-fs-14 app-lh-20"}," Salvar ",-1),Ve={class:"bg-white q-py-lg q-px-lg app-br-16"},Ce={class:"row q-col-gutter-lg"},Ee=l("div",{class:"col-12 items-center q-mt-xs"},[l("div",{class:"q-ml-sm text-grey-8 app-fw-700 app-lh-32 app-fs-23"}," Informa\xE7\xF5es ")],-1),we={class:"col-12 col-xl-6"},Ue={class:"text-red"},De={class:"col-12 col-xl-2 col-md-4"},Oe={class:"text-red"},ze={class:"row items-center justify-end"},Be={class:"col-12 col-xl-2 col-md-4"},Le={class:"text-red"},Se={class:"row items-center justify-end"},Ye={class:"col-12 col-xl-2 col-md-4"},je={class:"col-12 col-md-12"},Ie={class:"text-red"},Re={class:"col-12 col-md-6"},Ae={class:"text-red"},He={class:"col-12 col-md-6"},Me={class:"text-red"},Pe={class:"col-12"},Te={class:"text-red"},$e={class:"col-12"},Ne={key:0,class:"col-12 col-md-5"},Fe={class:"text-red"},Qe={key:1,class:"col-12 col-md-4"},Xe={class:"text-red"},Ze={key:2,class:"col-12 col-md-3"},Ge={class:"text-red"},Je={class:"col-12 items-center q-mt-xs"},Ke={class:"q-ml-sm text-grey-8 app-fw-700 app-lh-32 app-fs-23"},We={key:3,class:"col-12 col-md-12"},et={class:"absolute-bottom text-subtitle2 row items-center"},tt={key:4,class:"col-12"},ot=l("div",{class:"q-mt-sm"}," Clique aqui ou arraste sua imagem ",-1),st=l("div",{class:"col-12 items-center"},[l("div",{class:"q-ml-sm text-grey-8 app-fw-700 app-lh-32 app-fs-23"}," Material ")],-1),lt={class:"absolute-bottom text-subtitle2 row items-center"},at={class:"column"},nt={class:"text-caption"},it={class:"text-caption"},dt={class:"col-12"},rt={key:0,class:"q-mt-sm"},mt={key:1,class:"q-mt-sm"},ct={class:"col-12"},ut={key:5,class:"col-12 col-md-5"},pt={class:"text-red"},_t={key:6,class:"col-12 col-md-7"},vt={class:"text-red"},bt={key:7,class:"col-12"},ft={class:"text-red"},qt={__name:"Edit",props:{liveEvent:Object,errors:Object,responsible:Array,campaigns:Array,linkableTypes:Object,contents:Array,seasonsOrChapters:Array,canLiveEventDestroy:Boolean},setup(d){const i=d,C=ue(),e=Q({id:i.liveEvent.id,name:i.liveEvent.name,description:i.liveEvent.description,event_type:i.liveEvent.event_type,embed:i.liveEvent.embed,responsible_id:i.liveEvent.responsible_id,number_of_students:i.liveEvent.number_of_students,start_at:i.liveEvent.start_at,end_at:i.liveEvent.end_at,has_live_offer:i.liveEvent.has_live_offer,name_offer:i.liveEvent.name_offer,description_offer:i.liveEvent.description_offer,embed_offer:i.liveEvent.embed_offer,group_ids:i.liveEvent.group_ids,student_ids:i.liveEvent.student_ids,campaign_ids:i.liveEvent.campaign_ids,materials:i.liveEvent.materials,image:i.liveEvent.image,linkable_id:i.liveEvent.linkable_id,linkable_type:i.liveEvent.linkable_type,content_id:i.liveEvent.content_id,has_link_with_content:i.liveEvent.has_link_with_content}),E=Z({onDrop:(r,s)=>{e.image=r[0],s.length>0&&C.notify({message:"Insira apenas uma imagem",position:"center"})},accept:["image/*"],maxFiles:1}),Y=O(()=>e.image?typeof e.image=="object"?URL.createObjectURL(e.image):e.image:""),G=()=>e.image=null,{getRootProps:J,getInputProps:K,isDragActive:W}=Z({onDrop:(r,s)=>{for(var m=0;m<r.length;m++)e.materials.push({id:null,name:r[m].name,size:r[m].size,link:URL.createObjectURL(r[m]),uploadedFile:r[m],is_image:r[m].type.includes("image")})}}),ee=r=>{e.materials=[...e.materials.slice(0,r),...e.materials.slice(r+1)]},te="https://i.pinimg.com/564x/04/54/7c/04547c2b354abb70a85ed8a2d1b33e5f.jpg",oe=()=>{e.transform(r=>({...r,_method:"put"})).post(route("admin.live-event.update",e.id),{preserveState:!0,preserveScroll:!0,onSuccess:()=>{C.notify({type:"positive",message:"Evento ao vivo atualizado com sucesso",position:"top"}),e.materials=i.liveEvent.materials}})};function se(){C.dialog({component:fe,componentProps:{title:"Excluir evento",message:"Tem certeza que deseja excluir esse evento?"}}).onOk(()=>{Q().delete(route("admin.live-event.destroy",e.id),{onSuccess:()=>{C.notify({type:"positive",message:"Evento exclu\xEDdo com sucesso",position:"top"})}})})}const j=q(i.responsible),le=(r,s,m)=>{s(()=>j.value=i.responsible.filter(b=>b.name.toLowerCase().indexOf(r.toLowerCase())>-1))},I=q(i.campaigns),ae=(r,s,m)=>{s(()=>I.value=i.campaigns.filter(b=>b.name.toLowerCase().indexOf(r.toLowerCase())>-1))},R=q(i.contents),ne=(r,s,m)=>{s(()=>R.value=i.contents.filter(b=>b.name.toLowerCase().indexOf(r.toLowerCase())>-1))},ie=O(()=>e.linkable_type==="season"?g.value?"Carregando epis\xF3dios":y.value.length===0?"Conte\xFAdo n\xE3o possu\xED temporadas":"Selecione a temporada":e.linkable_type==="chapter"?g.value?"Carregando epis\xF3dios":y.value.length===0?"Conte\xFAdo n\xE3o possu\xED epis\xF3dios":"Selecione o epis\xF3dio":"Selecione"),w=q(i.seasonsOrChapters),y=q(i.seasonsOrChapters),g=q(!1),de=(r,s,m)=>{s(()=>w.value=y.value.filter(b=>b.name.toLowerCase().indexOf(r.toLowerCase())>-1))},A=()=>{if(e.linkable_id=null,w.value=[],y.value=[],g.value=!0,e.linkable_type!=="content"){let r=route("admin.quizz.linkables",{content:e.content_id,type:e.linkable_type});axios.get(r).then(s=>{s.data.items.forEach(m=>{w.value.push({id:m.id,name:m.name}),y.value.push({id:m.id,name:m.name})}),g.value=!1})}else g.value=!1},re=O(()=>{let r=new Array;for(const s in i.linkableTypes)r.push({label:i.linkableTypes[s],value:s});return r});return(r,s)=>{const m=_("q-breadcrumbs-el"),b=_("q-breadcrumbs"),p=_("q-icon"),k=_("q-btn"),f=_("q-input"),H=_("q-date"),M=_("q-time"),P=_("q-popup-proxy"),U=_("q-chip"),V=_("q-select"),T=_("q-checkbox"),me=_("q-tooltip"),$=_("q-img"),N=pe("close-popup");return c(),D(ce,null,{default:n(()=>[a(o(_e),{title:"Evento ao vivo | Editar"}),l("div",he,[l("div",ge,[ye,a(b,{class:"text-grey q-mt-sm app-fs-13 app-fw-400 app-lh-16",gutter:"xs"},{default:n(()=>[a(m,{label:"Home",class:"text-grey"}),a(m,{label:"Eventos ao vivo",class:"text-grey"}),a(m,{label:"Editar evento ao vivo",class:"text-primary"})]),_:1})]),l("div",ke,[d.canLiveEventDestroy?(c(),D(k,{key:0,color:"negative",class:"q-mr-md",rounded:"","no-caps":"",outline:"",onClick:se},{default:n(()=>[a(p,{name:"close",size:"xs"}),xe]),_:1})):h("",!0),a(k,{color:"primary",rounded:"","no-caps":"",onClick:oe,disabled:o(e).processing},{default:n(()=>[a(p,{name:"check",size:"xs"}),qe]),_:1},8,["disabled"])])]),l("div",Ve,[l("div",Ce,[Ee,l("div",we,[a(f,{outlined:"",modelValue:o(e).name,"onUpdate:modelValue":s[0]||(s[0]=t=>o(e).name=t),label:"Nome do evento *","bottom-slots":Boolean(d.errors.name)},{hint:n(()=>[l("div",Ue,u(d.errors.name),1)]),_:1},8,["modelValue","bottom-slots"])]),l("div",De,[a(f,{outlined:"",modelValue:o(e).start_at,"onUpdate:modelValue":s[3]||(s[3]=t=>o(e).start_at=t),mask:"##/##/#### ##:##",label:"Data e hora de inicio *","bottom-slots":Boolean(d.errors.start_at),clearable:""},{prepend:n(()=>[a(p,{name:"o_calendar_today"})]),hint:n(()=>[l("div",Oe,u(d.errors.start_at),1)]),default:n(()=>[a(P,{class:"row"},{default:n(()=>[a(H,{modelValue:o(e).start_at,"onUpdate:modelValue":s[1]||(s[1]=t=>o(e).start_at=t),mask:"DD/MM/YYYY HH:mm",flat:"",square:""},null,8,["modelValue"]),a(M,{modelValue:o(e).start_at,"onUpdate:modelValue":s[2]||(s[2]=t=>o(e).start_at=t),mask:"DD/MM/YYYY HH:mm",format24h:"",flat:"",square:""},{default:n(()=>[l("div",ze,[X(a(k,{label:"Ok",color:"primary",flat:""},null,512),[[N]])])]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue","bottom-slots"])]),l("div",Be,[a(f,{outlined:"",modelValue:o(e).end_at,"onUpdate:modelValue":s[6]||(s[6]=t=>o(e).end_at=t),mask:"##/##/#### ##:##",label:"Data e hora de t\xE9rmino *","bottom-slots":Boolean(d.errors.end_at),clearable:""},{prepend:n(()=>[a(p,{name:"o_calendar_today"})]),hint:n(()=>[l("div",Le,u(d.errors.end_at),1)]),default:n(()=>[a(P,{class:"row"},{default:n(()=>[a(H,{modelValue:o(e).end_at,"onUpdate:modelValue":s[4]||(s[4]=t=>o(e).end_at=t),mask:"DD/MM/YYYY HH:mm",flat:"",square:""},null,8,["modelValue"]),a(M,{modelValue:o(e).end_at,"onUpdate:modelValue":s[5]||(s[5]=t=>o(e).end_at=t),mask:"DD/MM/YYYY HH:mm",format24h:"",flat:"",square:""},{default:n(()=>[l("div",Se,[X(a(k,{label:"Ok",color:"primary",flat:""},null,512),[[N]])])]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue","bottom-slots"])]),l("div",Ye,[a(f,{outlined:"",modelValue:o(e).event_type,"onUpdate:modelValue":s[7]||(s[7]=t=>o(e).event_type=t),label:"Tipo",disable:""},null,8,["modelValue"])]),l("div",je,[a(f,{outlined:"",modelValue:o(e).description,"onUpdate:modelValue":s[8]||(s[8]=t=>o(e).description=t),label:"Descri\xE7\xE3o do evento","bottom-slots":Boolean(d.errors.description)},{hint:n(()=>[l("div",Ie,u(d.errors.description),1)]),_:1},8,["modelValue","bottom-slots"])]),l("div",Re,[a(V,{options:j.value,"option-value":"id","option-label":"name","emit-value":"","map-options":"",outlined:"",modelValue:o(e).responsible_id,"onUpdate:modelValue":s[9]||(s[9]=t=>o(e).responsible_id=t),label:"Respons\xE1vel pelo evento *","bottom-slots":Boolean(d.errors.responsible_id),clearable:"","use-input":"",onFilter:le,"stack-label":""},{hint:n(()=>[l("div",Ae,u(d.errors.responsible_id),1)]),"selected-item":n(t=>[a(U,{class:"adm-chip-primary q-my-none",label:t.opt.name,dense:""},{default:n(()=>[a(p,{name:"cancel",size:"xs",onClick:x=>t.removeAtIndex(t.index),class:"q-ml-xs cursor-pointer"},null,8,["onClick"])]),_:2},1032,["label"])]),_:1},8,["options","modelValue","bottom-slots"])]),l("div",He,[a(V,{options:I.value,"option-value":"id","option-label":"name","emit-value":"","map-options":"",outlined:"",modelValue:o(e).campaign_ids,"onUpdate:modelValue":s[10]||(s[10]=t=>o(e).campaign_ids=t),label:"Campanhas","bottom-slots":Boolean(d.errors.campaign_ids),multiple:"",clearable:"","use-chips":"","use-input":"",onFilter:ae},{hint:n(()=>[l("div",Me,u(d.errors.campaign_ids),1)]),"selected-item":n(t=>[a(U,{class:"adm-chip-primary q-my-none",label:t.opt.name,dense:""},{default:n(()=>[a(p,{name:"cancel",size:"xs",onClick:x=>t.removeAtIndex(t.index),class:"q-ml-xs cursor-pointer"},null,8,["onClick"])]),_:2},1032,["label"])]),_:1},8,["options","modelValue","bottom-slots"])]),l("div",Pe,[a(f,{outlined:"",modelValue:o(e).embed,"onUpdate:modelValue":s[11]||(s[11]=t=>o(e).embed=t),label:"Link embed *","bottom-slots":Boolean(d.errors.embed)},{hint:n(()=>[l("div",Te,u(d.errors.embed),1)]),_:1},8,["modelValue","bottom-slots"])]),l("div",$e,[a(T,{modelValue:o(e).has_link_with_content,"onUpdate:modelValue":s[12]||(s[12]=t=>o(e).has_link_with_content=t),label:"Vincular encontro \xE0 um conte\xFAdo"},null,8,["modelValue"])]),o(e).has_link_with_content?(c(),v("div",Ne,[a(V,{options:R.value,"option-value":"id","option-label":"name","emit-value":"","map-options":"",outlined:"",modelValue:o(e).content_id,"onUpdate:modelValue":[s[13]||(s[13]=t=>o(e).content_id=t),A],label:"Vincular ao conte\xFAdo","bottom-slots":Boolean(d.errors.content_id),clearable:"","use-input":"",onFilter:ne},{hint:n(()=>[l("div",Fe,u(d.errors.content_id),1)]),"selected-item":n(t=>[a(U,{class:"adm-chip-primary q-my-none",label:t.opt.name,dense:""},{default:n(()=>[a(p,{name:"cancel",size:"xs",onClick:x=>t.removeAtIndex(t.index),class:"q-ml-xs cursor-pointer"},null,8,["onClick"])]),_:2},1032,["label"])]),_:1},8,["options","modelValue","bottom-slots"])])):h("",!0),o(e).has_link_with_content?(c(),v("div",Qe,[o(e).content_id?(c(),D(V,{key:0,options:o(re),"emit-value":"","map-options":"",outlined:"",modelValue:o(e).linkable_type,"onUpdate:modelValue":[s[14]||(s[14]=t=>o(e).linkable_type=t),A],label:"Momento de vincula\xE7\xE3o do evento","bottom-slots":Boolean(d.errors.linkable_type)},{hint:n(()=>[l("div",Xe,u(d.errors.linkable_type),1)]),_:1},8,["options","modelValue","bottom-slots"])):h("",!0)])):h("",!0),o(e).has_link_with_content?(c(),v("div",Ze,[o(e).linkable_type!=="content"?(c(),D(V,{key:0,options:w.value,"option-value":"id","option-label":"name","emit-value":"","map-options":"",outlined:"",modelValue:o(e).linkable_id,"onUpdate:modelValue":s[15]||(s[15]=t=>o(e).linkable_id=t),label:o(ie),"bottom-slots":Boolean(d.errors.linkable_id),onFilter:de,"use-input":"",loading:g.value,disable:g.value||y.value.length===0},{hint:n(()=>[l("div",Ge,u(d.errors.linkable_id),1)]),"selected-item":n(t=>[a(U,{class:"adm-chip-primary q-my-none",label:t.opt.name,dense:""},{default:n(()=>[a(p,{name:"cancel",size:"xs",onClick:x=>t.removeAtIndex(t.index),class:"q-ml-xs cursor-pointer"},null,8,["onClick"])]),_:2},1032,["label"])]),_:1},8,["options","modelValue","label","bottom-slots","loading","disable"])):h("",!0)])):h("",!0),l("div",Je,[l("div",Ke,[z(" Imagem de capa "),a(p,{name:"help_outline",size:"xs",class:"cursor-pointer"},{default:n(()=>[a(me,{anchor:"center right",self:"center left",offset:[10,10],class:"text-body2 bg-grey-10"},{default:n(()=>[z(" Tamanho recomendado: 800px X 600px ")]),_:1})]),_:1})])]),o(Y)?(c(),v("div",We,[a($,{src:o(Y),style:{height:"400px"},class:"app-br-16"},{default:n(()=>[l("div",et,[a(p,{name:"o_photo",size:"md",class:"q-mr-md"}),a(k,{color:"white",class:"absolute",style:{top:"8px",right:"8px"},flat:"",icon:"close",size:"md",onClick:G}),l("div",B({class:"flex cursor-pointer"},o(E).getRootProps()),[l("input",L(S(o(E).getInputProps())),null,16),z(" Alterar imagem ")],16)])]),_:1},8,["src"])])):(c(),v("div",tt,[l("div",B(o(E).getRootProps(),{class:"column flex-center q-py-lg text-grey adm-border-dashed-blue app-br-16"}),[l("input",L(S(o(E).getInputProps())),null,16),a(p,{name:"o_photo",size:"md"}),ot],16)])),st,(c(!0),v(be,null,ve(o(e).materials,(t,x)=>(c(),v("div",{class:"col-12 col-md-3",key:`material-${x}}}`},[a($,{src:t.is_image?t.link:te,style:{height:"240px"},class:"app-br-16"},{default:n(()=>{var F;return[l("div",lt,[a(p,{name:"attach_file",size:"md",class:"rotate-225 q-mr-md"}),l("div",at,[l("span",nt,u(t.name.length>25?t.name.slice(0,25)+"...":t.name),1),l("span",it," ("+u((F=t.size)!=null?F:0)+" kb) ",1)]),a(k,{color:"white",class:"absolute",style:{top:"8px",right:"8px"},flat:"",icon:"close",size:"md",onClick:ht=>ee(x)},null,8,["onClick"])])]}),_:2},1032,["src"])]))),128)),l("div",dt,[l("div",B(o(J)(),{class:"column flex-center q-py-lg text-grey adm-border-dashed-blue app-br-16"}),[l("input",L(S(o(K)())),null,16),a(p,{name:"attach_file",size:"md",class:"rotate-225"}),o(W)?(c(),v("div",rt," Selecionando... ")):(c(),v("div",mt," Clique aqui ou arraste seus arquivos "))],16)]),l("div",ct,[a(T,{modelValue:o(e).has_live_offer,"onUpdate:modelValue":s[16]||(s[16]=t=>o(e).has_live_offer=t),label:"Oferta ao vivo"},null,8,["modelValue"])]),o(e).has_live_offer?(c(),v("div",ut,[a(f,{outlined:"",modelValue:o(e).name_offer,"onUpdate:modelValue":s[17]||(s[17]=t=>o(e).name_offer=t),label:"Nome da oferta","bottom-slots":Boolean(d.errors.name_offer)},{hint:n(()=>[l("div",pt,u(d.errors.name_offer),1)]),_:1},8,["modelValue","bottom-slots"])])):h("",!0),o(e).has_live_offer?(c(),v("div",_t,[a(f,{outlined:"",modelValue:o(e).embed_offer,"onUpdate:modelValue":s[18]||(s[18]=t=>o(e).embed_offer=t),label:"Link da oferta","bottom-slots":Boolean(d.errors.embed_offer)},{hint:n(()=>[l("div",vt,u(d.errors.embed_offer),1)]),_:1},8,["modelValue","bottom-slots"])])):h("",!0),o(e).has_live_offer?(c(),v("div",bt,[a(f,{outlined:"",modelValue:o(e).description_offer,"onUpdate:modelValue":s[19]||(s[19]=t=>o(e).description_offer=t),label:"Descri\xE7\xE3o da oferta","bottom-slots":Boolean(d.errors.description_offer)},{hint:n(()=>[l("div",ft,u(d.errors.description_offer),1)]),_:1},8,["modelValue","bottom-slots"])])):h("",!0)])])]),_:1})}}};export{qt as default};
