import{h as ne,u as q,m as H,j as re,c as m,w as t,r as n,i as ie,o as u,a as e,b as i,H as ce,d as s,s as _,t as v,e as M,f as A}from"./app.cc606831.js";import{_ as de}from"./AuthenticatedLayout.0bc0b363.js";import{_ as I}from"./DialogConfirm.f96873bf.js";const me={class:"row q-pb-xl"},ue={class:"column col-12 col-md-6 justify-center"},pe=s("div",{class:"app-fs-28 app-fw-700 app-lh-32 text-grey-8"}," Campanhas ",-1),_e={class:"col-12 col-md-6 flex justify-end items-center"},fe=s("div",{class:"q-ml-sm app-fw-500 app-fs-14 app-lh-20"}," Excluir selecionados ",-1),ye=s("div",{class:"q-ml-sm app-fw-500 app-fs-14 app-lh-20"}," Nova campanha ",-1),qe={class:"row q-col-gutter-sm"},ge={class:"col-12"},be={class:"col-12"},xe={class:"text-red"},ve={class:"row items-center justify-end"},he={class:"col-12"},we={class:"text-red"},ke={class:"row items-center justify-end"},Ve={class:"flex flex-center q-pt-lg q-pa-md q-gutter-sm"},Ce=s("div",{class:"q-ml-sm app-fw-500 app-fs-14 app-lh-20"}," Filtrar ",-1),De=s("div",{class:"q-ml-sm app-fw-500 app-fs-14 app-lh-20 m-4"}," Limpar ",-1),je=["onClick"],Pe={class:"row items-center justify-center app-fw-700 app-fs-16"},$e={class:"row items-center justify-center app-fw-700 app-fs-16"},Be=s("div",{class:"q-ml-sm"}," Editar ",-1),ze=s("div",{class:"q-ml-sm"}," Visualizar ",-1),Ue=s("div",{class:"q-ml-sm"}," Excluir ",-1),Oe=s("div",{class:"q-ml-sm"}," Visualizar ",-1),Se={class:"row items-center text-grey"},Ee={class:"row items-center text-grey"},He={__name:"Index",props:{campaigns:Object,errors:Object,query:Object,canCampaignStore:Boolean,canCampaignEdit:Boolean,canCampaignDestroy:Boolean},setup(r){const f=r,x=ne(),T=[{name:"name",align:"left",label:"Nome",field:"name",style:"width: 40%"},{name:"start_at",align:"left",label:"In\xEDcio",field:"start_at",style:"width: 30%"},{name:"end_at",align:"left",label:"T\xE9rmino",field:"end_at",style:"width: 30%"},{name:"actions",label:"A\xE7\xE3o"}],l=q({orderBy:f.query.orderBy,sort:f.query.sort,page:f.query.page,rowsPerPage:f.query.rowsPerPage,filters:{name:f.query.filters.name,start_at:f.query.filters.start_at,end_at:f.query.filters.end_at}}),L=c=>{l.orderBy===c?l.sort=l.sort=="desc"?"asc":"desc":l.sort=="asc",l.orderBy=c,l.page=1,g()},h=c=>{l.filters[c]=null,g()},g=()=>{l.get(route("admin.campaign.index"),{preserveState:!0,preserveScroll:!0,onSuccess:()=>w.value=!1})},Q=()=>q().get(route("admin.campaign.create")),R=c=>q().get(route("admin.campaign.edit",c)),$=c=>q().get(route("admin.campaign.show",c));function G(c){x.dialog({component:I,componentProps:{title:"Excluir campanha",message:c.orders_count>0?`H\xE1 ${c.orders_count} pedidos vinculados a esta campanha. Deseja realmente excluir?`:"Deseja realmente excluir?"}}).onOk(()=>{q().delete(route("admin.campaign.destroy",c.id),{onSuccess:()=>{x.notify({type:"positive",message:"Campanha exclu\xEDdo com sucesso",position:"top"})}})})}function J(){x.dialog({component:I,componentProps:{title:"Excluir selecionados",message:"Ao excluir as campanhas selecionadas, todas as campanhas vinculadas, ser\xE3o desvinculadas. Deseja realmente excluir?"}}).onOk(()=>{q({ids:b.value.map(c=>c.id)}).post(route("admin.campaign.destroy-multiples"),{onSuccess:()=>{b.value=[],x.notify({type:"positive",message:"Campanhas exclu\xEDdas com sucesso",position:"top"})}})})}const b=H([]),B=re(()=>Object.values(f.query.filters).filter(c=>c).length),w=H(!1),K=()=>q().get(route("admin.campaign.index"));return(c,o)=>{const z=n("q-breadcrumbs-el"),W=n("q-breadcrumbs"),d=n("q-icon"),p=n("q-btn"),k=n("q-chip"),U=n("q-space"),X=n("q-badge"),V=n("q-input"),O=n("q-date"),S=n("q-popup-proxy"),E=n("q-menu"),C=n("q-card-section"),D=n("q-separator"),N=n("q-checkbox"),Y=n("q-th"),j=n("q-item-section"),P=n("q-item"),Z=n("q-list"),ee=n("q-td"),te=n("q-table"),ae=n("q-select"),se=n("q-pagination"),oe=n("q-card"),F=ie("close-popup");return u(),m(de,null,{default:t(()=>[e(i(ce),{title:"Campanhas"}),s("div",me,[s("div",ue,[pe,e(W,{class:"text-grey q-mt-sm app-fs-13 app-fw-400 app-lh-16",gutter:"xs"},{default:t(()=>[e(z,{label:"Home",class:"text-grey"}),e(z,{label:"Campanhas",class:"text-primary"})]),_:1})]),s("div",_e,[b.value.length>0&&r.canCampaignDestroy?(u(),m(p,{key:0,color:"negative",class:"q-mr-md",rounded:"","no-caps":"",outline:"",onClick:J},{default:t(()=>[e(d,{name:"close",size:"xs"}),fe]),_:1})):_("",!0),r.canCampaignStore?(u(),m(p,{key:1,color:"primary",rounded:"","no-caps":"",onClick:Q},{default:t(()=>[e(d,{name:"add",size:"xs"}),ye]),_:1})):_("",!0)])]),e(oe,{flat:"",class:"app-br-16"},{default:t(()=>[e(C,{class:"row items-center q-py-sm q-px-lg"},{default:t(()=>[r.query.filters.name?(u(),m(k,{key:0,class:"adm-chip-primary",label:`Nome = ${r.query.filters.name}`},{default:t(()=>[e(d,{name:"cancel",size:"xs",onClick:o[0]||(o[0]=a=>h("name")),class:"q-ml-xs cursor-pointer"})]),_:1},8,["label"])):_("",!0),r.query.filters.start_at?(u(),m(k,{key:1,class:"adm-chip-primary",label:`Inicio = ${r.query.filters.start_at}`},{default:t(()=>[e(d,{name:"cancel",size:"xs",onClick:o[1]||(o[1]=a=>h("start_at")),class:"q-ml-xs cursor-pointer"})]),_:1},8,["label"])):_("",!0),r.query.filters.end_at?(u(),m(k,{key:2,class:"adm-chip-primary",label:`Termina = ${r.query.filters.end_at}`},{default:t(()=>[e(d,{name:"cancel",size:"xs",onClick:o[2]||(o[2]=a=>h("end_at")),class:"q-ml-xs cursor-pointer"})]),_:1},8,["label"])):_("",!0),e(U),e(p,{round:"",dense:"",flat:"",color:"primary"},{default:t(()=>[i(B)?(u(),m(X,{key:0,color:"primary",floating:"",rounded:"",label:i(B)},null,8,["label"])):_("",!0),e(d,{name:"tune",class:"rotate-90"}),e(E,{style:{"min-width":"500px"},"max-width":"500px",class:"bg-white q-pa-md app-br-16",modelValue:w.value,"onUpdate:modelValue":o[8]||(o[8]=a=>w.value=a)},{default:t(()=>[s("div",qe,[s("div",ge,[e(V,{outlined:"",modelValue:i(l).filters.name,"onUpdate:modelValue":o[3]||(o[3]=a=>i(l).filters.name=a),label:"Nome da campanha"},null,8,["modelValue"])]),s("div",be,[e(V,{outlined:"",modelValue:i(l).filters.start_at,"onUpdate:modelValue":o[5]||(o[5]=a=>i(l).filters.start_at=a),mask:"##/##/####",label:"Data final","bottom-slots":Boolean(r.errors["filters.start_at"]),clearable:""},{prepend:t(()=>[e(d,{name:"o_calendar_today"})]),hint:t(()=>[s("div",xe,v(r.errors["filters.start_at"]),1)]),default:t(()=>[e(S,null,{default:t(()=>[e(O,{modelValue:i(l).filters.start_at,"onUpdate:modelValue":o[4]||(o[4]=a=>i(l).filters.start_at=a),mask:"DD/MM/YYYY",square:""},{default:t(()=>[s("div",ve,[M(e(p,{label:"Ok",color:"primary",flat:""},null,512),[[F]])])]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue","bottom-slots"])]),s("div",he,[e(V,{outlined:"",modelValue:i(l).filters.end_at,"onUpdate:modelValue":o[7]||(o[7]=a=>i(l).filters.end_at=a),mask:"##/##/####",label:"Data final","bottom-slots":Boolean(r.errors["filters.end_at"]),clearable:""},{prepend:t(()=>[e(d,{name:"o_calendar_today"})]),hint:t(()=>[s("div",we,v(r.errors["filters.end_at"]),1)]),default:t(()=>[e(S,null,{default:t(()=>[e(O,{modelValue:i(l).filters.end_at,"onUpdate:modelValue":o[6]||(o[6]=a=>i(l).filters.end_at=a),mask:"DD/MM/YYYY",square:""},{default:t(()=>[s("div",ke,[M(e(p,{label:"Ok",color:"primary",flat:""},null,512),[[F]])])]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue","bottom-slots"])])]),s("div",Ve,[e(p,{color:"primary",rounded:"","no-caps":"",onClick:g},{default:t(()=>[e(d,{name:"check",size:"xs"}),Ce]),_:1}),e(p,{color:"primary",rounded:"",outline:"","no-caps":"",onClick:K},{default:t(()=>[e(d,{name:"close",size:"xs"}),De]),_:1})])]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(C,{class:"q-py-none"},{default:t(()=>[e(D,{color:"grey-3"})]),_:1}),e(C,{class:"q-py-none"},{default:t(()=>[e(te,{rows:r.campaigns.data,columns:T,flat:"",class:"text-grey-8",selected:b.value,"onUpdate:selected":o[9]||(o[9]=a=>b.value=a),selection:"multiple","hide-pagination":"",pagination:{rowsPerPage:i(l).rowsPerPage}},{"header-selection":t(a=>[e(N,{modelValue:a.selected,"onUpdate:modelValue":y=>a.selected=y},null,8,["modelValue","onUpdate:modelValue"])]),"body-selection":t(a=>[e(N,{"model-value":a.selected,"onUpdate:modelValue":(y,le)=>{Object.getOwnPropertyDescriptor(a,"selected").set(y,le)}},null,8,["model-value","onUpdate:modelValue"])]),"header-cell":t(a=>[e(Y,{props:a},{default:t(()=>[s("div",{class:"app-fw-700 app-fs-16 cursor-pointer",onClick:y=>L(a.col.name)},[A(v(a.col.label)+" ",1),a.col.name===r.query.orderBy?(u(),m(d,{key:0,name:r.query.sort=="desc"?"keyboard_arrow_up":"keyboard_arrow_down"},null,8,["name"])):_("",!0)],8,je)]),_:2},1032,["props"])]),"header-cell-actions":t(a=>[e(Y,{props:a,"auto-width":""},{default:t(()=>[s("div",Pe,v(a.col.label),1)]),_:2},1032,["props"])]),"body-cell-actions":t(a=>[e(ee,{props:a},{default:t(()=>[s("div",$e,[r.canCampaignEdit||r.canCampaignDestroy?(u(),m(p,{key:0,icon:"more_vert",flat:""},{default:t(()=>[e(E,{offset:[65,0]},{default:t(()=>[e(Z,null,{default:t(()=>[r.canCampaignEdit?(u(),m(P,{key:0,clickable:"",onClick:y=>R(a.row.id),class:"text-grey-7 flex items-center"},{default:t(()=>[e(d,{name:"edit",size:"xs"}),e(j,{"no-wrap":""},{default:t(()=>[Be]),_:1})]),_:2},1032,["onClick"])):_("",!0),e(D),e(P,{clickable:"",onClick:y=>$(a.row.id),class:"text-grey-7 flex items-center"},{default:t(()=>[e(d,{name:"visibility",size:"xs"}),e(j,{"no-wrap":""},{default:t(()=>[ze]),_:1})]),_:2},1032,["onClick"]),e(D),r.canCampaignDestroy?(u(),m(P,{key:1,clickable:"",onClick:y=>G(a.row),class:"text-grey-7 flex flex-center"},{default:t(()=>[e(d,{name:"close",size:"xs"}),e(j,{"no-wrap":""},{default:t(()=>[Ue]),_:1})]),_:2},1032,["onClick"])):_("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):(u(),m(p,{key:1,onClick:y=>$(a.row.id),class:"text-grey-7 flex flex-center",flat:"","no-caps":""},{default:t(()=>[e(d,{name:"visibility",size:"xs"}),Oe]),_:2},1032,["onClick"]))])]),_:2},1032,["props"])]),_:1},8,["rows","selected","pagination"]),s("div",Se,[e(U),s("div",Ee,[A(" Resultado por p\xE1gina "),e(ae,{options:[5,10,15],modelValue:i(l).rowsPerPage,"onUpdate:modelValue":[o[10]||(o[10]=a=>i(l).rowsPerPage=a),g],borderless:"",class:"q-ml-md"},null,8,["modelValue"])]),e(se,{modelValue:i(l).page,"onUpdate:modelValue":[o[11]||(o[11]=a=>i(l).page=a),g],max:r.campaigns.meta.last_page,"direction-links":"","boundary-links":"",color:"grey",input:"","icon-first":"keyboard_double_arrow_left","icon-last":"keyboard_double_arrow_right"},null,8,["modelValue","max"])])]),_:1})]),_:1})]),_:1})}}};export{He as default};
