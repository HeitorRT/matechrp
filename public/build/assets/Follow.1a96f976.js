import{_ as N}from"./AuthenticatedLayout.0bc0b363.js";import{h as T,m as k,j as V,c as S,w as r,l as p,r as c,o as n,a as o,b as _,H,d as l,t as m,s as d,n as i,p as $,F as A,u as U,f as Q}from"./app.cc606831.js";const G={class:"row q-mb-lg"},J={class:"column col-12 col-md-6 justify-center"},K={class:"app-fs-28 app-fw-700 app-lh-32 text-grey-8"},P={class:"col-12 col-md-6 flex justify-end items-center"},R={class:"q-ml-sm app-fw-500 app-fs-14 app-lh-20"},W={key:1,class:"q-mx-md text-primary"},X={key:2,class:"q-mx-md text-red app-fw-600"},Y={class:"bg-white q-py-lg q-px-lg app-br-16"},Z={class:"row q-col-gutter-lg"},ee={key:0,class:"col-12"},te=["innerHTML"],ae={key:1,class:"col-12 items-center q-mt-xs"},le=l("div",{class:"q-ml-sm text-grey-8 app-fw-700 app-lh-32 app-fs-23"}," Oferta ",-1),se=[le],oe={key:2,class:"col-12 col-md-5"},ne={key:3,class:"col-12 col-md-7"},ie={key:4,class:"col-12"},de={key:5,class:"col-12 items-center"},ce=l("div",{class:"q-ml-sm text-grey-8 app-fw-700 app-lh-32 app-fs-23"}," Material ",-1),re=[ce],me={class:"absolute-bottom text-subtitle2 row items-center"},ve={class:"column"},ue={class:"text-caption"},fe={class:"text-caption"},pe={__name:"Follow",props:{liveEvent:Object,errors:Object},setup(e){const v=e,C=T(),D="https://i.pinimg.com/564x/04/54/7c/04547c2b354abb70a85ed8a2d1b33e5f.jpg",B=()=>{U().put(route("admin.live-event.toggle-offer-availability",v.liveEvent.id),{preserveScroll:!0,onSuccess:()=>{let t=v.liveEvent.offer_available?"liberada":"encerrar";C.notify({type:"positive",message:`Oferta ${t}`,position:"top"})}})},I=t=>{const a=document.createElement("a");a.href=t.link,a.setAttribute("download",t.name),a.click()},g=()=>{let t=v.liveEvent.start_at.match(/(\d\d)\/(\d\d)\/(\d\d\d\d) (\d\d):(\d\d)/),a=p.buildDate({year:t[3],month:t[2],day:t[1],hours:t[4],minutes:t[5],seconds:0});return p.getDateDiff(Date.now(),a,"seconds")},u=k(g()),O=V(()=>u.value>0?new Date(u.value*1e3).toISOString().slice(11,19):"00:00:00"),y=()=>{let t=v.liveEvent.end_at.match(/(\d\d)\/(\d\d)\/(\d\d\d\d) (\d\d):(\d\d)/),a=p.buildDate({year:t[3],month:t[2],day:t[1],hours:t[4],minutes:t[5],seconds:0});return new Date>a},f=k(y()),E=V(()=>u.value>0&&!f.value);let j=setInterval(()=>{f.value=y(),f.value?clearInterval(j):u.value=g()},1e3);return(t,a)=>{const h=c("q-breadcrumbs-el"),z=c("q-breadcrumbs"),q=c("q-icon"),x=c("q-btn"),b=c("q-input"),F=c("q-tooltip"),L=c("q-img");return n(),S(N,null,{default:r(()=>[o(_(H),{title:e.liveEvent.name},null,8,["title"]),l("div",G,[l("div",J,[l("div",K,m(e.liveEvent.name),1),o(z,{class:"text-grey q-mt-sm app-fs-13 app-fw-400 app-lh-16",gutter:"xs"},{default:r(()=>[o(h,{label:"Home",class:"text-grey"}),o(h,{label:"Eventos ao vivo",class:"text-grey"}),o(h,{label:e.liveEvent.name,class:"text-primary"},null,8,["label"])]),_:1})]),l("div",P,[_(E)&&e.liveEvent.has_live_offer?(n(),S(x,{key:0,color:e.liveEvent.offer_available?"warning":"primary",rounded:"","no-caps":"",onClick:B,unelevated:""},{default:r(()=>[o(q,{name:e.liveEvent.offer_available?"money_off":"attach_money",size:"xs"},null,8,["name"]),l("div",R,m(e.liveEvent.offer_available?"Encerrar oferta":"Liberar oferta"),1)]),_:1},8,["color"])):d("",!0),_(E)?(n(),i("div",W,m(_(O)),1)):d("",!0),f.value?(n(),i("div",X," Finalizado ")):d("",!0)])]),l("div",Y,[l("div",Z,[e.liveEvent.embed?(n(),i("div",ee,[l("div",{innerHTML:e.liveEvent.embed,class:"app-player-iframe"},null,8,te)])):d("",!0),e.liveEvent.has_live_offer?(n(),i("div",ae,se)):d("",!0),e.liveEvent.has_live_offer?(n(),i("div",oe,[o(b,{outlined:"",modelValue:e.liveEvent.name_offer,"onUpdate:modelValue":a[0]||(a[0]=s=>e.liveEvent.name_offer=s),label:"Nome da oferta",disable:""},null,8,["modelValue"])])):d("",!0),e.liveEvent.has_live_offer?(n(),i("div",ne,[o(b,{outlined:"",modelValue:e.liveEvent.embed_offer,"onUpdate:modelValue":a[1]||(a[1]=s=>e.liveEvent.embed_offer=s),label:"Link da oferta",disable:""},null,8,["modelValue"])])):d("",!0),e.liveEvent.has_live_offer?(n(),i("div",ie,[o(b,{outlined:"",modelValue:e.liveEvent.description_offer,"onUpdate:modelValue":a[2]||(a[2]=s=>e.liveEvent.description_offer=s),label:"Descri\xE7\xE3o da oferta",disable:""},null,8,["modelValue"])])):d("",!0),e.liveEvent.materials.length>0?(n(),i("div",de,re)):d("",!0),(n(!0),i(A,null,$(e.liveEvent.materials,(s,M)=>(n(),i("div",{class:"col-12 col-md-3",key:`material-${M}}}`},[o(L,{src:s.is_image?s.link:D,style:{height:"240px"},class:"app-br-16"},{default:r(()=>{var w;return[l("div",me,[o(q,{name:"attach_file",size:"md",class:"rotate-225 q-mr-md"}),l("div",ve,[l("span",ue,m(s.name.length>25?s.name.slice(0,25)+"...":s.name),1),l("span",fe," ("+m((w=s.size)!=null?w:0)+" kb) ",1)]),o(x,{color:"white",class:"absolute",style:{top:"8px",right:"8px"},flat:"",icon:"file_download",size:"md",onClick:_e=>I(s),dense:""},{default:r(()=>[o(F,{anchor:"center left",self:"center right",offset:[10,10],class:"text-body2 bg-grey-10"},{default:r(()=>[Q(" Clique para fazer o download ")]),_:1})]),_:2},1032,["onClick"])])]}),_:2},1032,["src"])]))),128))])])]),_:1})}}};export{pe as default};
