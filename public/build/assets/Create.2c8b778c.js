import{_ as N}from"./AuthenticatedLayout.0bc0b363.js";import{h as O,u as H,l as I,m as k,j as V,c as E,w as n,r as u,o as q,a as s,b as l,H as R,d as a,t as r,q as L,f as w,M as Q,n as C,L as G}from"./app.cc606831.js";const J={class:"row q-mb-lg"},K={class:"column col-12 col-md-6 justify-center"},W=a("div",{class:"app-fs-28 app-fw-700 app-lh-32 text-grey-8"}," Cadastrar novo pedido ",-1),X={class:"col-12 col-md-6 flex justify-end items-center"},Z=a("div",{class:"q-ml-sm app-fw-500 app-fs-14 app-lh-20"}," Salvar pedido ",-1),ee={class:"bg-white q-py-lg q-px-lg app-br-16"},te={class:"row q-col-gutter-lg"},oe=a("div",{class:"col-12 items-center q-mt-xs"},[a("div",{class:"q-ml-sm text-grey-8 app-fw-700 app-lh-32 app-fs-23"}," Pedido do aluno ")],-1),le={class:"col-12 col-md-4"},se={class:"text-red"},ae={class:"col-12 col-md-4"},ne={class:"text-red"},de={class:"col-12 col-md-4"},ie={class:"col-12 col-md-4"},ue={class:"text-red"},me={class:"col-12 col-md-4"},re={class:"text-red"},ce={class:"col-12 col-md-4"},pe={class:"text-red"},_e=a("div",{class:"col-12 items-center q-mt-xs"},[a("div",{class:"q-ml-sm text-grey-8 app-fw-700 app-lh-32 app-fs-23"}," Dados do aluno ")],-1),be={class:"col-12 col-md-3"},he={class:"col-12 col-md-6"},ve={key:0,class:"text-red"},fe={key:1,class:"text-grey"},ge={class:"col-12 col-md-3"},Ve={class:"col-12 col-md-9"},qe={class:"col-12 col-md-3"},ye={class:"col-12 col-md-5"},xe={class:"col-12 col-md-7"},ke={class:"text-red"},we=a("div",{class:"col-12 items-center q-mt-xs"},[a("div",{class:"q-ml-sm text-grey-8 app-fw-700 app-lh-32 app-fs-23"}," Dados do cliente ")],-1),Ce={class:"col-12 col-md-6"},Ue={class:"col-12 col-md-6"},De={class:"col-12"},Be={__name:"Create",props:{errors:Object,paymentMethods:Object,statuses:Object,campaigns:Object},setup(i){const c=i,U=O(),o=H({id:null,student:null,campaign_id:null,status:"adimplente",payment_value:0,payment_method:"boleto",term_accepted:null,text_terms_acceptance:null,registration_type:null,hiring_start_at:I.formatDate(Date.now(),"DD/MM/YYYY"),hiring_end_at:null,invoices:null,student_id:null,student:{id:null,name:null,email:null,cpf:null,phone:null,customer_cpf:null,customer_phone:null,equal_data:!1}}),D=()=>{o.post(route("admin.order.store"),{onSuccess:()=>{U.notify({type:"positive",message:"Pedido cadastrada com sucesso",position:"top"})}})},Y=k(c.campaigns),M=V(()=>{let d=new Array;for(const e in c.paymentMethods)d.push({label:c.paymentMethods[e],value:e});return d}),B=V(()=>{let d=new Array;for(const e in c.statuses)d.push({label:c.statuses[e],value:e});return d}),S=d=>{switch(d){case"adimplente":return"adm-bg-positive";case"cancelado":return"adm-bg-error";case"nao_renovou":return"adm-bg-negative";case"vencido":return"adm-bg-caution";default:return"bg-white"}},v=V(()=>"Anual"),_=k([]),j=(d,e,b)=>{if(d.length<4){b();return}e(()=>{_.value=[],G.get(route("admin.student.search"),{params:{name:d}}).then(f=>{_.value=f.data.students})})},P=()=>{let d=_.value.filter(e=>e.id==o.student_id);o.student.cpf=d.length>0?d[0].cpf:null,o.student.email=d.length>0?d[0].email:null,o.student.phone=d.length>0?d[0].phone:null,o.student.customer_cpf=d.length>0?d[0].customer_cpf:null,o.student.customer_phone=d.length>0?d[0].customer_phone:null,o.student.equal_data=d.length>0?d[0].equal_data:null};return(d,e)=>{const b=u("q-breadcrumbs-el"),f=u("q-breadcrumbs"),p=u("q-icon"),A=u("q-btn"),g=u("q-chip"),h=u("q-select"),m=u("q-input"),y=u("q-date"),x=u("q-popup-proxy"),F=u("q-item-section"),T=u("q-item"),$=u("q-checkbox");return q(),E(N,null,{default:n(()=>[s(l(R),{title:"Pedido | Cadastrar"}),a("div",J,[a("div",K,[W,s(f,{class:"text-grey q-mt-sm app-fs-13 app-fw-400 app-lh-16",gutter:"xs"},{default:n(()=>[s(b,{label:"Home",class:"text-grey"}),s(b,{label:"Cadastrar novo pedido",class:"text-primary"})]),_:1})]),a("div",X,[s(A,{color:"primary",rounded:"","no-caps":"",onClick:D},{default:n(()=>[s(p,{name:"check",size:"xs"}),Z]),_:1})])]),a("div",ee,[a("div",te,[oe,a("div",le,[s(h,{options:l(B),outlined:"",modelValue:l(o).status,"onUpdate:modelValue":e[0]||(e[0]=t=>l(o).status=t),label:"Status do pedido","map-options":"","emit-value":"","bottom-slots":Boolean(i.errors.status),disable:""},{hint:n(()=>[a("div",se,r(i.errors.status),1)]),"selected-item":n(t=>[s(g,{"text-color":"white",class:L([S(t.opt.value),"q-my-none"])},{default:n(()=>[w(r(t.opt.label),1)]),_:2},1032,["class"])]),_:1},8,["options","modelValue","bottom-slots"])]),a("div",ae,[s(h,{options:l(M),outlined:"",modelValue:l(o).payment_method,"onUpdate:modelValue":e[1]||(e[1]=t=>l(o).payment_method=t),label:"Forma de pagamento","map-options":"","emit-value":"","bottom-slots":Boolean(i.errors.payment_method)},{hint:n(()=>[a("div",ne,r(i.errors.payment_method),1)]),_:1},8,["options","modelValue","bottom-slots"])]),a("div",de,[s(m,{outlined:"",modelValue:l(v),"onUpdate:modelValue":e[2]||(e[2]=t=>Q(v)?v.value=t:null),label:"Tipo de cadastrado",disable:""},null,8,["modelValue"])]),a("div",ie,[s(m,{outlined:"",modelValue:l(o).payment_value,"onUpdate:modelValue":e[3]||(e[3]=t=>l(o).payment_value=t),label:"Valor pago",mask:"#.##","fill-mask":"0","reverse-fill-mask":"","bottom-slots":Boolean(i.errors.payment_value),prefix:"R$"},{hint:n(()=>[a("div",ue,r(i.errors.payment_value),1)]),_:1},8,["modelValue","bottom-slots"])]),a("div",me,[s(m,{outlined:"",modelValue:l(o).hiring_start_at,"onUpdate:modelValue":e[5]||(e[5]=t=>l(o).hiring_start_at=t),mask:"##/##/####",label:"Data da contrata\xE7\xE3o","bottom-slots":Boolean(i.errors.hiring_start_at)},{prepend:n(()=>[s(p,{name:"o_calendar_today"})]),hint:n(()=>[a("div",re,r(i.errors.hiring_start_at),1)]),default:n(()=>[s(x,{class:"row"},{default:n(()=>[s(y,{modelValue:l(o).hiring_start_at,"onUpdate:modelValue":e[4]||(e[4]=t=>l(o).hiring_start_at=t),mask:"DD/MM/YYYY",flat:"",square:""},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue","bottom-slots"])]),a("div",ce,[s(m,{outlined:"",modelValue:l(o).hiring_end_at,"onUpdate:modelValue":e[7]||(e[7]=t=>l(o).hiring_end_at=t),mask:"##/##/####",label:"Data final da contrata\xE7\xE3o","bottom-slots":Boolean(i.errors.hiring_end_at)},{prepend:n(()=>[s(p,{name:"o_calendar_today"})]),hint:n(()=>[a("div",pe,r(i.errors.hiring_end_at),1)]),default:n(()=>[s(x,{class:"row"},{default:n(()=>[s(y,{modelValue:l(o).hiring_end_at,"onUpdate:modelValue":e[6]||(e[6]=t=>l(o).hiring_end_at=t),mask:"DD/MM/YYYY",flat:"",square:""},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue","bottom-slots"])]),_e,a("div",be,[s(m,{outlined:"",modelValue:l(o).student_id,"onUpdate:modelValue":e[8]||(e[8]=t=>l(o).student_id=t),label:"ID do aluno",disable:""},null,8,["modelValue"])]),a("div",he,[s(h,{"option-value":"id","option-label":"name",options:_.value,outlined:"",modelValue:l(o).student_id,"onUpdate:modelValue":[e[9]||(e[9]=t=>l(o).student_id=t),P],label:"Aluno","map-options":"","emit-value":"","bottom-slots":!0,"use-input":"",onFilter:j},{hint:n(()=>[i.errors.student_id?(q(),C("div",ve,r(i.errors.student_id),1)):(q(),C("div",fe," Digite ao menos 4 caracteres para procurar o aluno "))]),"selected-item":n(t=>[s(g,{class:"adm-chip-primary q-my-none",label:t.opt.name,dense:""},{default:n(()=>[s(p,{name:"cancel",size:"xs",onClick:z=>t.removeAtIndex(t.index),class:"q-ml-xs cursor-pointer"},null,8,["onClick"])]),_:2},1032,["label"])]),"no-option":n(()=>[s(T,null,{default:n(()=>[s(F,{class:"text-grey"},{default:n(()=>[w(" Nenhum resultado encontrado ")]),_:1})]),_:1})]),_:1},8,["options","modelValue"])]),a("div",ge,[s(m,{outlined:"",modelValue:l(o).student.cpf,"onUpdate:modelValue":e[10]||(e[10]=t=>l(o).student.cpf=t),label:"CPF do aluno",mask:"###.###.###-##",disable:""},null,8,["modelValue"])]),a("div",Ve,[s(m,{outlined:"",modelValue:l(o).student.email,"onUpdate:modelValue":e[11]||(e[11]=t=>l(o).student.email=t),label:"E-mail do aluno",disable:""},null,8,["modelValue"])]),a("div",qe,[s(m,{outlined:"",modelValue:l(o).student.phone,"onUpdate:modelValue":e[12]||(e[12]=t=>l(o).student.phone=t),label:"Telefone do aluno",mask:"(##) #########",disable:""},null,8,["modelValue"])]),a("div",ye,[s(m,{outlined:"",label:"Produto",disable:""})]),a("div",xe,[s(h,{options:Y.value,"option-value":"id","option-label":"name","emit-value":"","map-options":"",outlined:"",modelValue:l(o).campaign_id,"onUpdate:modelValue":e[13]||(e[13]=t=>l(o).campaign_id=t),label:"Campanha","bottom-slots":Boolean(i.errors.campaign_id)},{hint:n(()=>[a("div",ke,r(i.errors.campaign_id),1)]),"selected-item":n(t=>[s(g,{class:"adm-chip-primary q-my-none",label:t.opt.name,dense:""},{default:n(()=>[s(p,{name:"cancel",size:"xs",onClick:z=>t.removeAtIndex(t.index),class:"q-ml-xs cursor-pointer"},null,8,["onClick"])]),_:2},1032,["label"])]),_:1},8,["options","modelValue","bottom-slots"])]),we,a("div",Ce,[s(m,{outlined:"",modelValue:l(o).student.customer_cpf,"onUpdate:modelValue":e[14]||(e[14]=t=>l(o).student.customer_cpf=t),label:"CPF do cliente",mask:"###.###.###-##",disable:""},null,8,["modelValue"])]),a("div",Ue,[s(m,{outlined:"",modelValue:l(o).student.customer_phone,"onUpdate:modelValue":e[15]||(e[15]=t=>l(o).student.customer_phone=t),label:"Telefone do cliente",mask:"(##) #########",disable:""},null,8,["modelValue"])]),a("div",De,[s($,{modelValue:l(o).student.equal_data,"onUpdate:modelValue":e[16]||(e[16]=t=>l(o).student.equal_data=t),label:"Dados iguais para cliente e aluno",disable:""},null,8,["modelValue"])])])])]),_:1})}}};export{Be as default};
