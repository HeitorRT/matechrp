import{_ as $}from"./AuthenticatedLayout.0bc0b363.js";import{h as A,u as x,m as F,j as T,c as Y,w as a,r as i,i as Q,o as b,a as e,b as s,H as X,d as t,s as Z,t as g,e as P,f as h,n as z,B as j,C as B,D as H}from"./app.cc606831.js";import{u as G}from"./index.common.8f199d34.js";import{_ as J}from"./AdminDialog.1d33fa88.js";const K={class:"row q-mb-lg"},W={class:"column col-12 col-md-6 justify-center"},ee=t("div",{class:"app-fs-28 app-fw-700 app-lh-32 text-grey-8"}," Editar pop-up ",-1),te={class:"col-12 col-md-6 flex justify-end items-center"},oe=t("div",{class:"q-ml-sm app-fw-500 app-fs-14 app-lh-20"}," Excluir pop-up ",-1),se=t("div",{class:"q-ml-sm app-fw-500 app-fs-14 app-lh-20"}," Salvar ",-1),ae={class:"bg-white q-py-lg q-px-lg app-br-16"},le={class:"row q-col-gutter-lg"},ne=t("div",{class:"col-12 items-center q-mt-xs"},[t("div",{class:"q-ml-sm text-grey-8 app-fw-700 app-lh-32 app-fs-23"}," Dados do pop-up ")],-1),ie={class:"col-12 col-md-12"},re={class:"text-red"},ce={class:"col-12 col-xl-6 col-md-6"},de={class:"text-red"},pe={class:"row items-center justify-end"},me={class:"col-12 col-xl-6 col-md-6"},ue={class:"text-red"},_e={class:"row items-center justify-end"},fe={class:"col-12 col-md-12"},be={class:"text-red"},ge={class:"col-12 items-center q-mt-xs"},qe={class:"q-ml-sm text-grey-8 app-fw-700 app-lh-32 app-fs-23"},ve={key:0,class:"col-12"},xe={class:"absolute-bottom text-subtitle2 row items-center"},he={key:1,class:"col-12"},ye=t("div",{class:"q-mt-sm"}," Clique aqui ou arraste sua imagem ",-1),Ve={class:"col-12 flex justify-end items-center"},ke=t("div",{class:"q-ml-sm app-fw-500 app-fs-14 app-lh-20"}," Voltar ",-1),ze={__name:"Edit",props:{popup:Object,errors:Object,contents:Array,canPopupDestroy:Boolean},setup(r){const d=r,u=A(),o=x({id:d.popup.id,description:d.popup.description,image:d.popup.image,start_at:d.popup.start_at,end_at:d.popup.end_at,content_ids:d.popup.content_ids}),U=()=>{o.transform(p=>({...p,_method:"put"})).post(route("admin.popup.update",o.id),{preserveState:!0,preserveScroll:!0,onSuccess:()=>{u.notify({type:"positive",message:"Pop-up atualizado com sucesso",position:"top"})}})};function M(){u.dialog({component:J,componentProps:{title:"Excluir pop-up",message:"Tem certeza que deseja excluir esse pop-up?",confirm:!0}}).onOk(()=>{x().delete(route("admin.popup.destroy",o.id),{onSuccess:()=>{u.notify({type:"positive",message:"Pop-up exclu\xEDdo com sucesso",position:"top"})}})})}const y=F(d.contents),E=(p,l,f)=>{l(()=>y.value=d.contents.filter(q=>q.name.toLowerCase().indexOf(p.toLowerCase())>-1))},I=()=>x().get(route("admin.popup.index")),V=T(()=>o.image==null?"":typeof o.image=="object"?URL.createObjectURL(o.image):o.image),_=G({onDrop:(p,l)=>{o.image=p[0],l.length>0&&u.notify({message:"Insira apenas uma imagem",position:"center"})},accept:["image/*"],maxFiles:1}),O=()=>o.image=null;return(p,l)=>{const f=i("q-breadcrumbs-el"),q=i("q-breadcrumbs"),c=i("q-icon"),m=i("q-btn"),v=i("q-input"),k=i("q-date"),w=i("q-time"),D=i("q-popup-proxy"),S=i("q-chip"),R=i("q-select"),L=i("q-tooltip"),N=i("q-img"),C=Q("close-popup");return b(),Y($,null,{default:a(()=>[e(s(X),{title:"Popup | Editar"}),t("div",K,[t("div",W,[ee,e(q,{class:"text-grey q-mt-sm app-fs-13 app-fw-400 app-lh-16",gutter:"xs"},{default:a(()=>[e(f,{label:"Home",class:"text-grey"}),e(f,{label:"Popup",class:"text-grey"}),e(f,{label:"Editar pop-up",class:"text-primary"})]),_:1})]),t("div",te,[r.canPopupDestroy?(b(),Y(m,{key:0,color:"negative",class:"q-mr-md",rounded:"","no-caps":"",outline:"",onClick:M},{default:a(()=>[e(c,{name:"close",size:"xs"}),oe]),_:1})):Z("",!0),e(m,{color:"primary",rounded:"","no-caps":"",onClick:U,disabled:s(o).processing},{default:a(()=>[e(c,{name:"check",size:"xs"}),se]),_:1},8,["disabled"])])]),t("div",ae,[t("div",le,[ne,t("div",ie,[e(v,{outlined:"",modelValue:s(o).description,"onUpdate:modelValue":l[0]||(l[0]=n=>s(o).description=n),label:"Descri\xE7\xE3o *","bottom-slots":Boolean(r.errors.description)},{hint:a(()=>[t("div",re,g(r.errors.description),1)]),_:1},8,["modelValue","bottom-slots"])]),t("div",ce,[e(v,{outlined:"",modelValue:s(o).start_at,"onUpdate:modelValue":l[3]||(l[3]=n=>s(o).start_at=n),mask:"##/##/#### ##:##",label:"Data e hora de in\xEDcio","bottom-slots":Boolean(r.errors.start_at),clearable:""},{prepend:a(()=>[e(c,{name:"o_calendar_today"})]),hint:a(()=>[t("div",de,g(r.errors.start_at),1)]),default:a(()=>[e(D,{class:"row"},{default:a(()=>[e(k,{modelValue:s(o).start_at,"onUpdate:modelValue":l[1]||(l[1]=n=>s(o).start_at=n),mask:"DD/MM/YYYY HH:mm",flat:"",square:""},null,8,["modelValue"]),e(w,{modelValue:s(o).start_at,"onUpdate:modelValue":l[2]||(l[2]=n=>s(o).start_at=n),mask:"DD/MM/YYYY HH:mm",format24h:"",flat:"",square:""},{default:a(()=>[t("div",pe,[P(e(m,{label:"Ok",color:"primary",flat:""},null,512),[[C]])])]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue","bottom-slots"])]),t("div",me,[e(v,{outlined:"",modelValue:s(o).end_at,"onUpdate:modelValue":l[6]||(l[6]=n=>s(o).end_at=n),mask:"##/##/#### ##:##",label:"Data e hora de t\xE9rmino","bottom-slots":Boolean(r.errors.end_at),clearable:""},{prepend:a(()=>[e(c,{name:"o_calendar_today"})]),hint:a(()=>[t("div",ue,g(r.errors.end_at),1)]),default:a(()=>[e(D,{class:"row"},{default:a(()=>[e(k,{modelValue:s(o).end_at,"onUpdate:modelValue":l[4]||(l[4]=n=>s(o).end_at=n),mask:"DD/MM/YYYY HH:mm",flat:"",square:""},null,8,["modelValue"]),e(w,{modelValue:s(o).end_at,"onUpdate:modelValue":l[5]||(l[5]=n=>s(o).end_at=n),mask:"DD/MM/YYYY HH:mm",format24h:"",flat:"",square:""},{default:a(()=>[t("div",_e,[P(e(m,{label:"Ok",color:"primary",flat:""},null,512),[[C]])])]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue","bottom-slots"])]),t("div",fe,[e(R,{options:y.value,"option-value":"id","option-label":"name","emit-value":"","map-options":"",outlined:"",modelValue:s(o).content_ids,"onUpdate:modelValue":l[7]||(l[7]=n=>s(o).content_ids=n),label:"Conte\xFAdo","bottom-slots":Boolean(r.errors.content_ids),clearable:"","use-input":"",onFilter:E,multiple:""},{hint:a(()=>[t("div",be,g(r.errors.content_ids),1)]),"selected-item":a(n=>[e(S,{class:"adm-chip-primary q-my-none",label:n.opt.name,dense:""},{default:a(()=>[e(c,{name:"cancel",size:"xs",onClick:we=>n.removeAtIndex(n.index),class:"q-ml-xs cursor-pointer"},null,8,["onClick"])]),_:2},1032,["label"])]),_:1},8,["options","modelValue","bottom-slots"])]),t("div",ge,[t("div",qe,[h(" Imagem "),e(c,{name:"help_outline",size:"xs",class:"cursor-pointer"},{default:a(()=>[e(L,{anchor:"center right",self:"center left",offset:[10,10],class:"text-body2 bg-grey-10"},{default:a(()=>[h(" Tamanho recomendado: 800px X 600px ")]),_:1})]),_:1})])]),s(V)?(b(),z("div",ve,[e(N,{src:s(V),style:{height:"400px"},class:"app-br-16"},{default:a(()=>[t("div",xe,[e(c,{name:"o_photo",size:"md",class:"q-mr-md"}),e(m,{color:"white",class:"absolute",style:{top:"8px",right:"8px"},flat:"",icon:"close",size:"md",onClick:O}),t("div",j({class:"flex cursor-pointer"},s(_).getRootProps()),[t("input",B(H(s(_).getInputProps())),null,16),h(" Alterar imagem ")],16)])]),_:1},8,["src"])])):(b(),z("div",he,[t("div",j(s(_).getRootProps(),{class:"column flex-center q-py-lg text-grey adm-border-dashed-blue app-br-16"}),[t("input",B(H(s(_).getInputProps())),null,16),e(c,{name:"o_photo",size:"md"}),ye],16)])),t("div",Ve,[e(m,{color:"primary",class:"q-mr-md",rounded:"","no-caps":"",outline:"",onClick:I},{default:a(()=>[e(c,{name:"chevron_left",size:"xs"}),ke]),_:1})])])])]),_:1})}}};export{ze as default};
