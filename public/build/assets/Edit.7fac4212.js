import{_ as Z}from"./AuthenticatedLayout.0bc0b363.js";import{h as ee,m as P,u as j,j as x,c as F,w as n,r as i,i as te,o as h,a as t,b as a,H as oe,d as e,t as r,q as se,f as ae,M as le,e as z,n as y,p as B,F as O,l as ne}from"./app.cc606831.js";import{_ as de}from"./DialogConfirm.f96873bf.js";const ie={class:"row q-mb-lg"},re={class:"column col-12 col-md-6 justify-center"},ce=e("div",{class:"app-fs-28 app-fw-700 app-lh-32 text-grey-8"}," Pedido do aluno ",-1),me={class:"col-12 col-md-6 flex justify-end items-center"},ue=e("div",{class:"q-ml-sm app-fw-500 app-fs-14 app-lh-20"}," Notas fiscais ",-1),pe=e("div",{class:"q-ml-sm app-fw-500 app-fs-14 app-lh-20"}," Cancelar recorr\xEAncia ",-1),_e=e("div",{class:"q-ml-sm app-fw-500 app-fs-14 app-lh-20"}," Atualizar pedido ",-1),fe={class:"bg-white q-py-lg q-px-lg app-br-16"},he={class:"row q-col-gutter-lg"},ve=e("div",{class:"col-12 items-center q-mt-xs"},[e("div",{class:"q-ml-sm text-grey-8 app-fw-700 app-lh-32 app-fs-23"}," Pedido do aluno ")],-1),be={class:"col-12 col-md-4"},ge={class:"text-red"},qe={class:"col-12 col-md-4"},xe={class:"text-red"},ye={class:"col-12 col-md-4"},Ve={class:"col-12 col-md-4"},we={class:"text-red"},ke={class:"col-12 col-md-4"},De={class:"text-red"},Ue={class:"row items-center justify-end"},Ye={class:"col-12 col-md-4"},Ce={class:"text-red"},Me={class:"row items-center justify-end"},Pe=e("div",{class:"col-12 items-center q-mt-xs"},[e("div",{class:"q-ml-sm text-grey-8 app-fw-700 app-lh-32 app-fs-23"}," Dados do aluno ")],-1),je={class:"col-12 col-md-3"},Fe={class:"col-12 col-md-6"},ze={class:"col-12 col-md-3"},Be={class:"col-12 col-md-9"},Oe={class:"col-12 col-md-3"},Se={class:"col-12 col-md-5"},Ae={class:"col-12 col-md-4"},Te={class:"col-12 col-md-3"},$e=e("div",{class:"col-12 items-center q-mt-xs"},[e("div",{class:"q-ml-sm text-grey-8 app-fw-700 app-lh-32 app-fs-23"}," Dados do cliente ")],-1),Ne={class:"col-12 col-md-6"},Re={class:"col-12 col-md-6"},Ee={class:"col-12"},He={class:"bg-white q-py-lg q-px-lg app-br-16 q-mt-lg"},Ie=e("div",{class:"col-12 items-center q-mt-xs"},[e("div",{class:"q-ml-sm text-grey-8 app-fw-700 app-lh-32 app-fs-23"}," Parcelas do pedido ")],-1),Le={class:"bg-white q-mt-lg"},Qe={class:"row full-width"},Ge={class:"col-2 app-fw-700 text-grey-7 q-pa-lg"},Je={class:"col-7 app-fw-700 q-pa-lg text-grey-7"},Ke=e("div",{class:"col-2 flex items-center justify-end"},null,-1),We={class:"q-pa-md"},Xe=e("thead",null,[e("tr",null,[e("th",{class:"text-left"},[e("div",{class:"app-fw-600 app-fw-15"}," C\xF3digo ")]),e("th",{class:"text-left"},[e("div",{class:"app-fw-600 app-fw-15"}," Forma de pagamento ")]),e("th",{class:"text-left"},[e("div",{class:"app-fw-600 app-fw-15"}," Status ")]),e("th",{class:"text-left"},[e("div",{class:"app-fw-600 app-fw-15"}," Parcela ")]),e("th",{class:"text-left"},[e("div",{class:"app-fw-600 app-fw-15"}," Valor ")]),e("th",{class:"text-left"},[e("div",{class:"app-fw-600 app-fw-15"}," Cria\xE7\xE3o ")]),e("th",{class:"text-left"},[e("div",{class:"app-fw-600 app-fw-15"}," Vencimento ")]),e("th",{class:"text-left"},[e("div",{class:"app-fw-600 app-fw-15"}," Vencimento original ")]),e("th",{class:"text-left"},[e("div",{class:"app-fw-600 app-fw-15"}," Pagamento ")]),e("th",{class:"text-left"}," A\xE7\xF5es ")])],-1),Ze={class:"text-left"},et={class:"text-uppercase"},tt={class:"text-uppercase"},ot={style:{width:"5%"}},st=e("div",{class:"q-ml-sm"}," Ver ",-1),at=e("div",{class:"q-ml-sm"}," Excluir ",-1),it={__name:"Edit",props:{order:Object,errors:Object,paymentMethods:Object,statuses:Object,campaigns:Object,installmentYears:Object,installments:Array},setup(u){const d=u,b=ee();P("titles");const l=j({id:d.order.id,student:d.order.student,campaign_id:d.order.campaign_id,status:d.order.status,payment_value:d.order.payment_value,payment_method:d.order.payment_method,term_accepted:d.order.term_accepted,text_terms_acceptance:d.order.text_terms_acceptance,registration_type:d.order.registration_type,hiring_start_at:d.order.hiring_start_at,hiring_end_at:d.order.hiring_end_at,invoices:d.order.invoices,student_id:d.order.student_id,student:{id:d.order.student.id,name:d.order.student.name,email:d.order.student.email,cpf:d.order.student.cpf,phone:d.order.student.phone,active:d.order.student.active,customer_cpf:d.order.student.customer_cpf,customer_phone:d.order.student.customer_phone,equal_data:d.order.student.equal_data}}),S=()=>{l.put(route("admin.order.update",l.id),{onSuccess:()=>{b.notify({type:"positive",message:"Pedido atualizado com sucesso",position:"top"})}})},A=()=>{b.dialog({component:de,componentProps:{title:"Cancelar recorr\xEAncia?",message:"Tem certeza que deseja cancelar recorr\xEAncia?"}}).onOk(()=>{j().post(route("admin.order.cancel",d.order.id),{preserveState:!0,preserveScroll:!0,onSuccess:()=>{b.notify({type:"positive",message:"Recorr\xEAncia cancelada com sucesso",position:"top"}),l.status=d.order.status}})})},T=P(d.campaigns),$=x(()=>{let c=new Array;for(const o in d.paymentMethods)c.push({label:d.paymentMethods[o],value:o});return c}),N=x(()=>{let c=new Array;for(const o in d.statuses)c.push({label:d.statuses[o],value:o});return c}),R=c=>{switch(c){case"adimplente":return"adm-bg-positive";case"cancelado":return"adm-bg-error";case"nao_renovou":return"adm-bg-negative";case"vencido":return"adm-bg-caution";default:return"bg-white"}},g=x(()=>d.order.registration_type.replace(/^./,c=>c.toUpperCase())),v=c=>ne.formatDate(new Date(c),"DD/MM/YYYY"),E=c=>parseFloat(c).toFixed(2).replace(".",",");return(c,o)=>{const V=i("q-breadcrumbs-el"),H=i("q-breadcrumbs"),_=i("q-icon"),f=i("q-btn"),w=i("q-chip"),q=i("q-select"),m=i("q-input"),k=i("q-date"),D=i("q-time"),U=i("q-popup-proxy"),I=i("q-checkbox"),Y=i("q-item"),L=i("q-separator"),Q=i("q-list"),G=i("q-menu"),J=i("q-markup-table"),K=i("q-expansion-item"),W=i("q-card-section"),X=i("q-card"),C=te("close-popup");return h(),F(Z,null,{default:n(()=>[t(a(oe),{title:"Aluno | Pedido"}),e("div",ie,[e("div",re,[ce,t(H,{class:"text-grey q-mt-sm app-fs-13 app-fw-400 app-lh-16",gutter:"xs"},{default:n(()=>[t(V,{label:"Home",class:"text-grey"}),t(V,{label:"Pedido do aluno",class:"text-primary"})]),_:1})]),e("div",me,[t(f,{color:"indigo-8",class:"q-mr-md",rounded:"","no-caps":"",outline:""},{default:n(()=>[t(_,{name:"attach_money",size:"xs"}),ue]),_:1}),t(f,{color:"negative",class:"q-mr-md",rounded:"","no-caps":"",outline:"",onClick:A},{default:n(()=>[t(_,{name:"close",size:"xs"}),pe]),_:1}),t(f,{color:"primary",rounded:"","no-caps":"",onClick:S},{default:n(()=>[t(_,{name:"check",size:"xs"}),_e]),_:1})])]),e("div",fe,[e("div",he,[ve,e("div",be,[t(q,{options:a(N),outlined:"",modelValue:a(l).status,"onUpdate:modelValue":o[0]||(o[0]=s=>a(l).status=s),label:"Status do pedido","map-options":"","emit-value":"","bottom-slots":Boolean(u.errors.status)},{hint:n(()=>[e("div",ge,r(u.errors.status),1)]),"selected-item":n(s=>[t(w,{"text-color":"white",class:se([R(s.opt.value),"q-my-none"])},{default:n(()=>[ae(r(s.opt.label),1)]),_:2},1032,["class"])]),_:1},8,["options","modelValue","bottom-slots"])]),e("div",qe,[t(q,{options:a($),outlined:"",modelValue:a(l).payment_method,"onUpdate:modelValue":o[1]||(o[1]=s=>a(l).payment_method=s),label:"Forma de pagamento","map-options":"","emit-value":"","bottom-slots":Boolean(u.errors.payment_method)},{hint:n(()=>[e("div",xe,r(u.errors.payment_method),1)]),_:1},8,["options","modelValue","bottom-slots"])]),e("div",ye,[t(m,{outlined:"",modelValue:a(g),"onUpdate:modelValue":o[2]||(o[2]=s=>le(g)?g.value=s:null),label:"Tipo de cadastrado",disable:""},null,8,["modelValue"])]),e("div",Ve,[t(m,{outlined:"",modelValue:a(l).payment_value,"onUpdate:modelValue":o[3]||(o[3]=s=>a(l).payment_value=s),label:"Valor pago",mask:"#,##","fill-mask":"0","reverse-fill-mask":"","bottom-slots":Boolean(u.errors.payment_value),prefix:"R$"},{hint:n(()=>[e("div",we,r(u.errors.payment_value),1)]),_:1},8,["modelValue","bottom-slots"])]),e("div",ke,[t(m,{outlined:"",modelValue:a(l).hiring_start_at,"onUpdate:modelValue":o[6]||(o[6]=s=>a(l).hiring_start_at=s),mask:"##/##/####",label:"Data da contrata\xE7\xE3o","bottom-slots":Boolean(u.errors.hiring_start_at)},{prepend:n(()=>[t(_,{name:"o_calendar_today"})]),hint:n(()=>[e("div",De,r(u.errors.hiring_start_at),1)]),default:n(()=>[t(U,{class:"row"},{default:n(()=>[t(k,{modelValue:a(l).hiring_start_at,"onUpdate:modelValue":o[4]||(o[4]=s=>a(l).hiring_start_at=s),mask:"DD/MM/YYYY",flat:"",square:""},null,8,["modelValue"]),t(D,{modelValue:a(l).hiring_start_at,"onUpdate:modelValue":o[5]||(o[5]=s=>a(l).hiring_start_at=s),mask:"DD/MM/YYYY",format24h:"",flat:"",square:""},{default:n(()=>[e("div",Ue,[z(t(f,{label:"Ok",color:"primary",flat:""},null,512),[[C]])])]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue","bottom-slots"])]),e("div",Ye,[t(m,{outlined:"",modelValue:a(l).hiring_end_at,"onUpdate:modelValue":o[9]||(o[9]=s=>a(l).hiring_end_at=s),mask:"##/##/####",label:"Data final da contrata\xE7\xE3o","bottom-slots":Boolean(u.errors.hiring_end_at)},{prepend:n(()=>[t(_,{name:"o_calendar_today"})]),hint:n(()=>[e("div",Ce,r(u.errors.hiring_end_at),1)]),default:n(()=>[t(U,{class:"row"},{default:n(()=>[t(k,{modelValue:a(l).hiring_end_at,"onUpdate:modelValue":o[7]||(o[7]=s=>a(l).hiring_end_at=s),mask:"DD/MM/YYYY",flat:"",square:""},null,8,["modelValue"]),t(D,{modelValue:a(l).hiring_end_at,"onUpdate:modelValue":o[8]||(o[8]=s=>a(l).hiring_end_at=s),mask:"DD/MM/YYYY",format24h:"",flat:"",square:""},{default:n(()=>[e("div",Me,[z(t(f,{label:"Ok",color:"primary",flat:""},null,512),[[C]])])]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue","bottom-slots"])]),Pe,e("div",je,[t(m,{outlined:"",modelValue:a(l).student.id,"onUpdate:modelValue":o[10]||(o[10]=s=>a(l).student.id=s),label:"ID do aluno",disable:""},null,8,["modelValue"])]),e("div",Fe,[t(m,{outlined:"",modelValue:a(l).student.name,"onUpdate:modelValue":o[11]||(o[11]=s=>a(l).student.name=s),label:"Nome do aluno",disable:""},null,8,["modelValue"])]),e("div",ze,[t(m,{outlined:"",modelValue:a(l).student.cpf,"onUpdate:modelValue":o[12]||(o[12]=s=>a(l).student.cpf=s),label:"CPF do aluno",mask:"###.###.###-##",disable:""},null,8,["modelValue"])]),e("div",Be,[t(m,{outlined:"",modelValue:a(l).student.email,"onUpdate:modelValue":o[13]||(o[13]=s=>a(l).student.email=s),label:"E-mail do aluno",disable:""},null,8,["modelValue"])]),e("div",Oe,[t(m,{outlined:"",modelValue:a(l).student.phone,"onUpdate:modelValue":o[14]||(o[14]=s=>a(l).student.phone=s),label:"Telefone do aluno",mask:"(##) #########",disable:""},null,8,["modelValue"])]),e("div",Se,[t(m,{outlined:"",label:"Produto",disable:""})]),e("div",Ae,[t(q,{options:T.value,"option-value":"id","option-label":"name","emit-value":"","map-options":"",outlined:"",modelValue:a(l).campaign_id,"onUpdate:modelValue":o[15]||(o[15]=s=>a(l).campaign_id=s),label:"Campanha",disable:""},{"selected-item":n(s=>[t(w,{class:"adm-chip-primary q-my-none",label:s.opt.name,dense:""},{default:n(()=>[t(_,{name:"cancel",size:"xs",onClick:M=>s.removeAtIndex(s.index),class:"q-ml-xs cursor-pointer"},null,8,["onClick"])]),_:2},1032,["label"])]),_:1},8,["options","modelValue"])]),e("div",Te,[t(m,{outlined:"",modelValue:a(l).id,"onUpdate:modelValue":o[16]||(o[16]=s=>a(l).id=s),label:"Pedido",disable:""},null,8,["modelValue"])]),$e,e("div",Ne,[t(m,{outlined:"",modelValue:a(l).student.customer_cpf,"onUpdate:modelValue":o[17]||(o[17]=s=>a(l).student.customer_cpf=s),label:"CPF do cliente",mask:"###.###.###-##",disable:""},null,8,["modelValue"])]),e("div",Re,[t(m,{outlined:"",modelValue:a(l).student.customer_phone,"onUpdate:modelValue":o[18]||(o[18]=s=>a(l).student.customer_phone=s),label:"Telefone do cliente",mask:"(##) #########",disable:""},null,8,["modelValue"])]),e("div",Ee,[t(I,{modelValue:a(l).student.equal_data,"onUpdate:modelValue":o[19]||(o[19]=s=>a(l).student.equal_data=s),label:"Dados iguais para cliente e aluno",disable:""},null,8,["modelValue"])])])]),e("div",He,[Ie,e("div",Le,[(h(!0),y(O,null,B(u.installments,(s,M)=>(h(),F(X,{flat:"",bordered:"",class:"q-mt-sm bg-blue-grey-1"},{default:n(()=>[t(W,{class:"q-pa-none"},{default:n(()=>[t(K,{"header-class":"q-pa-none"},{header:n(()=>[e("div",Qe,[e("div",Ge," Ano: "+r(M),1),e("div",Je," Parcelas: "+r(s.length),1),Ke])]),default:n(()=>[e("div",We,[t(J,{class:"text-grey-8",flat:"",dense:""},{default:n(()=>[Xe,e("tbody",null,[(h(!0),y(O,null,B(s,p=>(h(),y("tr",null,[e("td",Ze,r(p.id),1),e("td",et,r(p.payment_method),1),e("td",tt,r(p.status),1),e("td",null,r(p.intstallment_number),1),e("td",null,"R$ "+r(E(p.payment_value)),1),e("td",null,r(v(p.created_at)),1),e("td",null,r(v(p.expiration_at)),1),e("td",null,r(v(p.expiration_original_at)),1),e("td",null,r(p.payday_at?v(p.payday_at):"-"),1),e("td",ot,[t(f,{icon:"more_vert",flat:""},{default:n(()=>[t(G,null,{default:n(()=>[t(Q,null,{default:n(()=>[t(Y,{clickable:"",class:"text-grey-7 flex flex-center",onClick:o[20]||(o[20]=()=>{})},{default:n(()=>[t(_,{name:"edit",size:"xs"}),st]),_:1}),t(L),t(Y,{clickable:"",class:"text-grey-7 flex flex-center",onClick:o[21]||(o[21]=()=>{})},{default:n(()=>[t(_,{name:"close",size:"xs"}),at]),_:1})]),_:1})]),_:1})]),_:1})])]))),256))])]),_:2},1024)])]),_:2},1024)]),_:2},1024)]),_:2},1024))),256))])])]),_:1})}}};export{it as default};
