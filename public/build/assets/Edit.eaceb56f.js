import{_ as K}from"./AuthenticatedLayout.0bc0b363.js";import{h as M,u as V,m as X,j as Y,c as $,w as r,k as Z,r as c,o as f,a as d,b as t,H as ee,d as s,s as A,t as n,q as se,f as F,n as oe}from"./app.cc606831.js";import{_ as te}from"./DialogConfirm.f96873bf.js";const le={class:"row q-mb-lg"},de={class:"column col-12 col-md-6 justify-center"},ae=s("div",{class:"app-fs-28 app-fw-700 app-lh-32 text-grey-8"}," Editar usu\xE1rio ",-1),re={class:"col-12 col-md-6 flex justify-end items-center"},ie=s("div",{class:"q-ml-sm app-fw-500 app-fs-14 app-lh-20"}," Excluir usu\xE1rio ",-1),ne=s("div",{class:"q-ml-sm app-fw-500 app-fs-14 app-lh-20"}," Salvar ",-1),me={class:"bg-white q-py-lg q-px-lg app-br-16"},ce={class:"row q-col-gutter-lg"},ue=s("div",{class:"col-12 items-center q-mt-xs"},[s("div",{class:"q-ml-sm text-grey-8 app-fw-700 app-lh-32 app-fs-23"}," Dados do usu\xE1rio ")],-1),pe={class:"col-12 col-md-2"},be={class:"col-12 col-md-4"},ve={class:"text-red"},_e={class:"col-12 col-md-3"},he={class:"text-red"},Ve={class:"col-12 col-md-3"},fe={class:"text-red"},ye={class:"col-12 col-md-9"},xe={class:"text-red"},qe={class:"col-12 col-md-3"},ge={class:"text-red"},ke={class:"col-12 col-md-4"},Ue={class:"text-red"},we={class:"col-12 col-md-6"},Be={class:"text-red"},Ce={class:"col-12 col-md-2"},Ee={class:"text-red"},Se={class:"col-12 col-md-4"},Pe={class:"text-red"},ze={class:"col-12 col-md-4"},je={class:"text-red"},Ne={class:"col-12 col-md-4"},De={class:"text-red"},Re={class:"col-12 col-md-12"},Le={class:"text-red"},Oe={class:"col-12 col-md-9"},Te={class:"text-red"},$e={class:"col-12 col-md-3 flex flex-center"},Ae=s("div",{class:"q-ml-sm app-fw-500 app-fs-14 app-lh-20"}," Enviar email para redefini\xE7\xE3o de senha ",-1),Fe={class:"col-12"},He={class:"col-12"},Ie={key:0,class:"col-12"},Ge={class:"text-red"},Qe={class:"col-12"},Xe={__name:"Edit",props:{user:Object,errors:Object,roles:Array,canUserDestroy:Boolean},setup(a){var q,g,k,U,w,B,C,E;const i=a,u=M(),o=V({id:i.user.id,name:i.user.name,email:i.user.email,cpf:i.user.cpf,phone:i.user.phone,whereby_link:i.user.whereby_link,is_system_user:i.user.is_system_user,is_teacher:i.user.is_teacher,is_partner:i.user.is_partner,address:{cep:(q=i.user.address)==null?void 0:q.cep,street:(g=i.user.address)==null?void 0:g.street,number:(k=i.user.address)==null?void 0:k.number,district:(U=i.user.address)==null?void 0:U.district,complement:(w=i.user.address)==null?void 0:w.complement,city:(B=i.user.address)==null?void 0:B.city,state:(C=i.user.address)==null?void 0:C.state,country:(E=i.user.address)==null?void 0:E.country},link:i.user.link,active:i.user.active,role_ids:i.user.role_ids}),H=()=>{o.put(route("admin.user.update",o.id),{preserveState:!0,preserveScroll:!0,onSuccess:()=>{u.notify({type:"positive",message:"Usu\xE1rio atualizado com sucesso",position:"top"})}})};function I(){u.dialog({component:te,componentProps:{title:"Excluir usu\xE1rio",message:"Tem certeza que deseja excluir esse usu\xE1rio?"}}).onOk(()=>{V().delete(route("admin.user.destroy",o.id),{onSuccess:()=>{u.notify({type:"positive",message:"Usu\xE1rio exclu\xEDdo com sucesso",position:"top"})}})})}const y=X(i.roles),G=(S,l,p)=>{l(()=>y.value=i.roles.filter(v=>v.name.toLowerCase().indexOf(S.toLowerCase())>-1))},x=V({email:i.user.email}),Q=()=>{x.post(route("admin.auth.forgot-password-send-link"),{preserveState:!0,preserveScroll:!0,onSuccess:()=>{u.notify({type:"positive",message:"Email enviado com sucesso",position:"top"})},onError:()=>{u.notify({type:"negative",message:"Erro ao enviar e-mail. Tente novamente.",position:"top"})}})},W=Y(()=>Z().props.value.auth.user);return(S,l)=>{const p=c("q-breadcrumbs-el"),v=c("q-breadcrumbs"),b=c("q-icon"),_=c("q-btn"),m=c("q-input"),P=c("q-chip"),z=c("q-select"),J=c("q-spinner-oval"),h=c("q-checkbox");return f(),$(K,null,{default:r(()=>{var j,N,D,R,L,O,T;return[d(t(ee),{title:"Usu\xE1rio | Editar"}),s("div",le,[s("div",de,[ae,d(v,{class:"text-grey q-mt-sm app-fs-13 app-fw-400 app-lh-16",gutter:"xs"},{default:r(()=>[d(p,{label:"Home",class:"text-grey"}),d(p,{label:"Usu\xE1rios",class:"text-grey"}),d(p,{label:"Editar usu\xE1rio",class:"text-primary"})]),_:1})]),s("div",re,[a.canUserDestroy&&a.user.id!==t(W).id?(f(),$(_,{key:0,color:"negative",class:"q-mr-md",rounded:"","no-caps":"",outline:"",onClick:I},{default:r(()=>[d(b,{name:"close",size:"xs"}),ie]),_:1})):A("",!0),d(_,{color:"primary",rounded:"","no-caps":"",onClick:H,disabled:t(o).processing},{default:r(()=>[d(b,{name:"check",size:"xs"}),ne]),_:1},8,["disabled"])])]),s("div",me,[s("div",ce,[ue,s("div",pe,[d(m,{outlined:"",modelValue:t(o).id,"onUpdate:modelValue":l[0]||(l[0]=e=>t(o).id=e),label:"ID do usu\xE1rio",disable:""},null,8,["modelValue"])]),s("div",be,[d(m,{outlined:"",modelValue:t(o).name,"onUpdate:modelValue":l[1]||(l[1]=e=>t(o).name=e),label:"Nome do usu\xE1rio *","bottom-slots":Boolean(a.errors.name)},{hint:r(()=>[s("div",ve,n(a.errors.name),1)]),_:1},8,["modelValue","bottom-slots"])]),s("div",_e,[d(m,{outlined:"",modelValue:t(o).cpf,"onUpdate:modelValue":l[2]||(l[2]=e=>t(o).cpf=e),label:"CPF do usu\xE1rio","bottom-slots":Boolean(a.errors.cpf),mask:"###.###.###-##"},{hint:r(()=>[s("div",he,n(a.errors.cpf),1)]),_:1},8,["modelValue","bottom-slots"])]),s("div",Ve,[d(z,{options:[{label:"Ativo",value:!0},{label:"Inativo",value:!1}],outlined:"",modelValue:t(o).active,"onUpdate:modelValue":l[3]||(l[3]=e=>t(o).active=e),label:"Status","bottom-slots":Boolean(a.errors.active),"map-options":"","emit-value":""},{hint:r(()=>[s("div",fe,n(a.errors.active),1)]),"selected-item":r(e=>[d(P,{tabindex:e.tabindex,"text-color":"white",class:se([{"adm-bg-positive":e.opt.value,"adm-bg-negative":!e.opt.value},"q-my-none"]),dense:""},{default:r(()=>[F(n(e.opt.label),1)]),_:2},1032,["tabindex","class"])]),_:1},8,["modelValue","bottom-slots"])]),s("div",ye,[d(m,{outlined:"",modelValue:t(o).email,"onUpdate:modelValue":l[4]||(l[4]=e=>t(o).email=e),label:"E-mail do usu\xE1rio *","bottom-slots":Boolean(a.errors.email)},{hint:r(()=>[s("div",xe,n(a.errors.email),1)]),_:1},8,["modelValue","bottom-slots"])]),s("div",qe,[d(m,{outlined:"",modelValue:t(o).phone,"onUpdate:modelValue":l[5]||(l[5]=e=>t(o).phone=e),label:"Telefone do usu\xE1rio","bottom-slots":Boolean(a.errors.phone),mask:"(##) #########"},{hint:r(()=>[s("div",ge,n(a.errors.phone),1)]),_:1},8,["modelValue","bottom-slots"])]),s("div",ke,[d(m,{outlined:"",modelValue:t(o).address.cep,"onUpdate:modelValue":l[6]||(l[6]=e=>t(o).address.cep=e),label:"CEP","bottom-slots":Boolean((j=a.errors.address)==null?void 0:j.cep)},{hint:r(()=>{var e;return[s("div",Ue,n((e=a.errors.address)==null?void 0:e.cep),1)]}),_:1},8,["modelValue","bottom-slots"])]),s("div",we,[d(m,{outlined:"",modelValue:t(o).address.street,"onUpdate:modelValue":l[7]||(l[7]=e=>t(o).address.street=e),label:"Rua","bottom-slots":Boolean((N=a.errors.address)==null?void 0:N.street)},{hint:r(()=>{var e;return[s("div",Be,n((e=a.errors.address)==null?void 0:e.street),1)]}),_:1},8,["modelValue","bottom-slots"])]),s("div",Ce,[d(m,{outlined:"",modelValue:t(o).address.number,"onUpdate:modelValue":l[8]||(l[8]=e=>t(o).address.number=e),label:"N\xFAmero","bottom-slots":Boolean((D=a.errors.address)==null?void 0:D.number)},{hint:r(()=>{var e;return[s("div",Ee,n((e=a.errors.address)==null?void 0:e.number),1)]}),_:1},8,["modelValue","bottom-slots"])]),s("div",Se,[d(m,{outlined:"",modelValue:t(o).address.district,"onUpdate:modelValue":l[9]||(l[9]=e=>t(o).address.district=e),label:"Bairro","bottom-slots":Boolean((R=a.errors.address)==null?void 0:R.district)},{hint:r(()=>{var e;return[s("div",Pe,n((e=a.errors.address)==null?void 0:e.district),1)]}),_:1},8,["modelValue","bottom-slots"])]),s("div",ze,[d(m,{outlined:"",modelValue:t(o).address.city,"onUpdate:modelValue":l[10]||(l[10]=e=>t(o).address.city=e),label:"Cidade","bottom-slots":Boolean((L=a.errors.address)==null?void 0:L.city)},{hint:r(()=>{var e;return[s("div",je,n((e=a.errors.address)==null?void 0:e.city),1)]}),_:1},8,["modelValue","bottom-slots"])]),s("div",Ne,[d(m,{outlined:"",modelValue:t(o).address.country,"onUpdate:modelValue":l[11]||(l[11]=e=>t(o).address.country=e),label:"Pa\xEDs","bottom-slots":Boolean((O=a.errors.address)==null?void 0:O.country)},{hint:r(()=>{var e;return[s("div",De,n((e=a.errors.address)==null?void 0:e.country),1)]}),_:1},8,["modelValue","bottom-slots"])]),s("div",Re,[d(m,{outlined:"",modelValue:t(o).address.complement,"onUpdate:modelValue":l[12]||(l[12]=e=>t(o).address.complement=e),label:"Complemento","bottom-slots":Boolean((T=a.errors.address)==null?void 0:T.complement)},{hint:r(()=>{var e;return[s("div",Le,n((e=a.errors.address)==null?void 0:e.complement),1)]}),_:1},8,["modelValue","bottom-slots"])]),s("div",Oe,[d(z,{options:y.value,"option-value":"id","option-label":"name","emit-value":"","map-options":"",outlined:"",modelValue:t(o).role_ids,"onUpdate:modelValue":l[13]||(l[13]=e=>t(o).role_ids=e),label:"Grupos de permiss\xE3o","bottom-slots":Boolean(a.errors.role_ids),clearable:"","use-input":"",onFilter:G,multiple:""},{hint:r(()=>[s("div",Te,n(a.errors.role_ids),1)]),"selected-item":r(e=>[d(P,{class:"adm-chip-primary q-my-none",label:e.opt.name,dense:""},{default:r(()=>[d(b,{name:"cancel",size:"xs",onClick:We=>e.removeAtIndex(e.index),class:"q-ml-xs cursor-pointer"},null,8,["onClick"])]),_:2},1032,["label"])]),_:1},8,["options","modelValue","bottom-slots"])]),s("div",$e,[d(_,{color:"primary",flat:"","no-caps":"",onClick:Q,loading:t(x).processing},{loading:r(()=>[d(J,{class:"q-mr-md",size:"xs"}),F(" Enviando email... ")]),default:r(()=>[d(b,{name:"send",size:"xs"}),Ae]),_:1},8,["loading"])]),s("div",Fe,[d(h,{modelValue:t(o).is_system_user,"onUpdate:modelValue":l[14]||(l[14]=e=>t(o).is_system_user=e),label:"Usu\xE1rio de sistema"},null,8,["modelValue"])]),s("div",He,[d(h,{modelValue:t(o).is_teacher,"onUpdate:modelValue":l[15]||(l[15]=e=>t(o).is_teacher=e),label:"Professor"},null,8,["modelValue"])]),t(o).is_teacher?(f(),oe("div",Ie,[d(m,{outlined:"",modelValue:t(o).whereby_link,"onUpdate:modelValue":l[16]||(l[16]=e=>t(o).whereby_link=e),label:"Whereby","bottom-slots":Boolean(a.errors.whereby_link)},{hint:r(()=>[s("div",Ge,n(a.errors.whereby_link),1)]),_:1},8,["modelValue","bottom-slots"])])):A("",!0),s("div",Qe,[d(h,{modelValue:t(o).is_partner,"onUpdate:modelValue":l[17]||(l[17]=e=>t(o).is_partner=e),label:"Parceiro"},null,8,["modelValue"])])])])]}),_:1})}}};export{Xe as default};
