import{_ as _e}from"./AuthenticatedLayout.0bc0b363.js";import{h as fe,u as X,j as V,m as C,c as B,w as n,r as p,i as be,o as m,a as l,b as o,H as ve,d as a,t as c,n as _,s as b,e as Z,f as w,B as Y,C as A,D as L,p as he,F as ye}from"./app.cc606831.js";import{u as G}from"./index.common.8f199d34.js";const ge={class:"row q-mb-lg"},ke={class:"column col-12 col-md-6 justify-center"},xe=a("div",{class:"app-fs-28 app-fw-700 app-lh-32 text-grey-8"}," Novo encontro ",-1),qe={class:"bg-white q-py-lg q-px-lg app-br-16"},Ve={class:"row q-col-gutter-lg"},Ce=a("div",{class:"col-12 items-center q-mt-xs"},[a("div",{class:"q-ml-sm text-grey-8 app-fw-700 app-lh-32 app-fs-23"}," Informa\xE7\xF5es ")],-1),we={class:"col-12 col-md-4"},Ue={class:"text-red"},ze={class:"col-12 col-md-4"},De={class:"text-red"},Oe={class:"col-12 col-md-4"},Be={class:"text-red"},Ye={class:"col-12 col-xl-4 col-md-6"},Ae={class:"text-red"},Le={class:"col-12 col-md-4"},Se=a("div",null," Para adicionar uma tag, digite o valor e aperte enter. ",-1),je={key:0,class:"text-red"},Me={class:"col-12 col-xl-2 col-md-6"},Ie={class:"text-red"},Pe={class:"row items-center justify-end"},Te={class:"col-12 col-xl-2 col-md-6"},He={class:"text-red"},Re={class:"row items-center justify-end"},Ne={class:"col-12 col-md-12"},$e={class:"text-red"},Ee={class:"col-12"},Fe={key:0,class:"col-12 col-md-4"},Qe={class:"text-red"},Xe={key:1,class:"col-12 col-md-4"},Ze={class:"text-red"},Ge={key:2,class:"col-12 col-md-4"},Je={class:"text-red"},Ke={class:"col-12 items-center q-mt-xs"},We={class:"q-ml-sm text-grey-8 app-fw-700 app-lh-32 app-fs-23"},et={key:3,class:"col-12 col-md-12"},tt={class:"absolute-bottom text-subtitle2 row items-center"},ot={key:4,class:"col-12"},st=a("div",{class:"q-mt-sm"}," Clique aqui ou arraste sua imagem ",-1),lt=a("div",{class:"col-12 items-center"},[a("div",{class:"q-ml-sm text-grey-8 app-fw-700 app-lh-32 app-fs-23"}," Material ")],-1),at={class:"absolute-bottom text-subtitle2 row items-center"},nt={class:"column"},it={class:"text-caption"},rt={class:"text-caption"},dt={class:"col-12"},ct={key:0,class:"q-mt-sm"},mt={key:1,class:"q-mt-sm"},ut={class:"col-12"},pt={key:5,class:"col-12 col-md-5"},_t={class:"text-red"},ft={key:6,class:"col-12 col-md-7"},bt={class:"text-red"},vt={key:7,class:"col-12"},ht={class:"text-red"},yt={class:"col-12 flex justify-end items-center"},gt=a("div",{class:"q-ml-sm app-fw-500 app-fs-14 app-lh-20"}," Voltar ",-1),kt=a("div",{class:"q-ml-sm app-fw-500 app-fs-14 app-lh-20"}," Criar encontro ",-1),Ct={__name:"Create",props:{errors:Object,types:Object,teachers:Array,students:Array,groups:Array,linkableTypes:Object,contents:Array,seasonsOrChapters:Array},setup(i){const f=i,S=fe(),e=X({id:null,name:null,description:null,type:"individual",tags:[],group_ids:[],student_ids:[],teacher_id:null,number_of_students:1,start_at:null,end_at:null,has_live_offer:!1,name_offer:null,description_offer:null,embed_offer:null,materials:[],image:null,linkable_id:null,linkable_type:"content",content_id:null,has_link_with_content:!1}),U=G({onDrop:(r,s)=>{e.image=r[0],s.length>0&&S.notify({message:"Insira apenas uma imagem",position:"center"})},accept:["image/*"],maxFiles:1}),j=V(()=>e.image?typeof e.image=="object"?URL.createObjectURL(e.image):e.image:""),J=()=>e.image=null,{getRootProps:K,getInputProps:W,isDragActive:ee}=G({onDrop:(r,s)=>{for(var d=0;d<r.length;d++)e.materials.push({id:null,name:r[d].name,size:r[d].size,link:URL.createObjectURL(r[d]),uploadedFile:r[d],is_image:r[d].type.includes("image")})}}),te=r=>{e.materials=[...e.materials.slice(0,r),...e.materials.slice(r+1)]},oe="https://i.pinimg.com/564x/04/54/7c/04547c2b354abb70a85ed8a2d1b33e5f.jpg",se=()=>{e.post(route("admin.meeting.store"),{onSuccess:()=>{S.notify({type:"positive",message:"Encontro cadastrado com sucesso",position:"top"})}})},M=V(()=>e.type=="individual"||e.type=="agendamento"),le=()=>{M.value&&(e.number_of_students=1)},I=C(f.teachers),ae=(r,s,d)=>{s(()=>I.value=f.teachers.filter(y=>y.name.toLowerCase().indexOf(r.toLowerCase())>-1))},ne=V(()=>{let r=new Array;for(const s in f.types)r.push({label:f.types[s],value:s});return r}),P=C(f.contents),ie=(r,s,d)=>{s(()=>P.value=f.contents.filter(y=>y.name.toLowerCase().indexOf(r.toLowerCase())>-1))},re=V(()=>e.linkable_type==="season"?h.value?"Carregando epis\xF3dios":k.value.length===0?"Conte\xFAdo n\xE3o possu\xED temporadas":"Selecione a temporada":e.linkable_type==="chapter"?h.value?"Carregando epis\xF3dios":k.value.length===0?"Conte\xFAdo n\xE3o possu\xED epis\xF3dios":"Selecione o epis\xF3dio":"Selecione"),z=C(f.seasonsOrChapters),k=C(f.seasonsOrChapters),h=C(!1),de=(r,s,d)=>{s(()=>z.value=k.value.filter(y=>y.name.toLowerCase().indexOf(r.toLowerCase())>-1))},T=()=>{if(e.linkable_id=null,z.value=[],k.value=[],h.value=!0,e.linkable_type!=="content"){let r=route("admin.quizz.linkables",{content:e.content_id,type:e.linkable_type});axios.get(r).then(s=>{s.data.items.forEach(d=>{z.value.push({id:d.id,name:d.name}),k.value.push({id:d.id,name:d.name})}),h.value=!1})}else h.value=!1},ce=V(()=>{let r=new Array;for(const s in f.linkableTypes)r.push({label:f.linkableTypes[s],value:s});return r}),me=()=>X().get(route("admin.meeting.index")),ue=r=>{const s=document.createElement("a");s.href=r.link,s.setAttribute("download",r.name),s.click()};return(r,s)=>{const d=p("q-breadcrumbs-el"),y=p("q-breadcrumbs"),v=p("q-input"),x=p("q-select"),u=p("q-icon"),D=p("q-chip"),H=p("q-date"),g=p("q-btn"),R=p("q-time"),N=p("q-popup-proxy"),$=p("q-checkbox"),O=p("q-tooltip"),E=p("q-img"),F=be("close-popup");return m(),B(_e,null,{default:n(()=>[l(o(ve),{title:"Encontro | Adicionar"}),a("div",ge,[a("div",ke,[xe,l(y,{class:"text-grey q-mt-sm app-fs-13 app-fw-400 app-lh-16",gutter:"xs"},{default:n(()=>[l(d,{label:"Home",class:"text-grey"}),l(d,{label:"Encontros",class:"text-grey"}),l(d,{label:"Novo encontro",class:"text-primary"})]),_:1})])]),a("div",qe,[a("div",Ve,[Ce,a("div",we,[l(v,{outlined:"",modelValue:o(e).name,"onUpdate:modelValue":s[0]||(s[0]=t=>o(e).name=t),label:"Nome do encontro *","bottom-slots":Boolean(i.errors.name)},{hint:n(()=>[a("div",Ue,c(i.errors.name),1)]),_:1},8,["modelValue","bottom-slots"])]),a("div",ze,[l(x,{options:o(ne),"emit-value":"","map-options":"",outlined:"",modelValue:o(e).type,"onUpdate:modelValue":[s[1]||(s[1]=t=>o(e).type=t),le],label:"Tipo *","bottom-slots":Boolean(i.errors.type)},{hint:n(()=>[a("div",De,c(i.errors.type),1)]),_:1},8,["options","modelValue","bottom-slots"])]),a("div",Oe,[l(v,{outlined:"",modelValue:o(e).number_of_students,"onUpdate:modelValue":s[2]||(s[2]=t=>o(e).number_of_students=t),modelModifiers:{number:!0},label:"Quantidade de alunos","bottom-slots":Boolean(i.errors.number_of_students),disable:o(M),mask:"########"},{hint:n(()=>[a("div",Be,c(i.errors.number_of_students),1)]),_:1},8,["modelValue","bottom-slots","disable"])]),a("div",Ye,[l(x,{options:I.value,"option-value":"id","option-label":"name","emit-value":"","map-options":"",outlined:"",modelValue:o(e).teacher_id,"onUpdate:modelValue":s[3]||(s[3]=t=>o(e).teacher_id=t),label:"Professor *","bottom-slots":Boolean(i.errors.teacher_id),clearable:"","use-input":"",onFilter:ae},{hint:n(()=>[a("div",Ae,c(i.errors.teacher_id),1)]),"selected-item":n(t=>[l(D,{class:"adm-chip-primary q-my-none",label:t.opt.name,dense:""},{default:n(()=>[l(u,{name:"cancel",size:"xs",onClick:q=>t.removeAtIndex(t.index),class:"q-ml-xs cursor-pointer"},null,8,["onClick"])]),_:2},1032,["label"])]),_:1},8,["options","modelValue","bottom-slots"])]),a("div",Le,[l(x,{label:"Palavras-chave",outlined:"",modelValue:o(e).tags,"onUpdate:modelValue":s[4]||(s[4]=t=>o(e).tags=t),"use-input":"",multiple:"","hide-dropdown-icon":"","input-debounce":"0","new-value-mode":"add-unique","bottom-slots":""},{"selected-item":n(t=>[l(D,{class:"adm-chip-primary q-my-none",label:t.opt,dense:""},{default:n(()=>[l(u,{name:"cancel",size:"xs",onClick:q=>t.removeAtIndex(t.index),class:"q-ml-xs cursor-pointer"},null,8,["onClick"])]),_:2},1032,["label"])]),hint:n(()=>[Se,i.errors.tags?(m(),_("div",je,c(i.errors.tags),1)):b("",!0)]),_:1},8,["modelValue"])]),a("div",Me,[l(v,{outlined:"",modelValue:o(e).start_at,"onUpdate:modelValue":s[7]||(s[7]=t=>o(e).start_at=t),mask:"##/##/#### ##:##",label:"Data e hora de inicio *","bottom-slots":Boolean(i.errors.start_at),clearable:""},{prepend:n(()=>[l(u,{name:"o_calendar_today"})]),hint:n(()=>[a("div",Ie,c(i.errors.start_at),1)]),default:n(()=>[l(N,{class:"row"},{default:n(()=>[l(H,{modelValue:o(e).start_at,"onUpdate:modelValue":s[5]||(s[5]=t=>o(e).start_at=t),mask:"DD/MM/YYYY HH:mm",flat:"",square:""},null,8,["modelValue"]),l(R,{modelValue:o(e).start_at,"onUpdate:modelValue":s[6]||(s[6]=t=>o(e).start_at=t),mask:"DD/MM/YYYY HH:mm",format24h:"",flat:"",square:""},{default:n(()=>[a("div",Pe,[Z(l(g,{label:"Ok",color:"primary",flat:""},null,512),[[F]])])]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue","bottom-slots"])]),a("div",Te,[l(v,{outlined:"",modelValue:o(e).end_at,"onUpdate:modelValue":s[10]||(s[10]=t=>o(e).end_at=t),mask:"##/##/#### ##:##",label:"Data e hora de t\xE9rmino *","bottom-slots":Boolean(i.errors.end_at),clearable:""},{prepend:n(()=>[l(u,{name:"o_calendar_today"})]),hint:n(()=>[a("div",He,c(i.errors.end_at),1)]),default:n(()=>[l(N,{class:"row"},{default:n(()=>[l(H,{modelValue:o(e).end_at,"onUpdate:modelValue":s[8]||(s[8]=t=>o(e).end_at=t),mask:"DD/MM/YYYY HH:mm",flat:"",square:""},null,8,["modelValue"]),l(R,{modelValue:o(e).end_at,"onUpdate:modelValue":s[9]||(s[9]=t=>o(e).end_at=t),mask:"DD/MM/YYYY HH:mm",format24h:"",flat:"",square:""},{default:n(()=>[a("div",Re,[Z(l(g,{label:"Ok",color:"primary",flat:""},null,512),[[F]])])]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue","bottom-slots"])]),a("div",Ne,[l(v,{outlined:"",modelValue:o(e).description,"onUpdate:modelValue":s[11]||(s[11]=t=>o(e).description=t),label:"Descri\xE7\xE3o","bottom-slots":Boolean(i.errors.description)},{hint:n(()=>[a("div",$e,c(i.errors.description),1)]),_:1},8,["modelValue","bottom-slots"])]),a("div",Ee,[l($,{modelValue:o(e).has_link_with_content,"onUpdate:modelValue":s[12]||(s[12]=t=>o(e).has_link_with_content=t),label:"Vincular encontro \xE0 um conte\xFAdo"},null,8,["modelValue"])]),o(e).has_link_with_content?(m(),_("div",Fe,[l(x,{options:P.value,"option-value":"id","option-label":"name","emit-value":"","map-options":"",outlined:"",modelValue:o(e).content_id,"onUpdate:modelValue":[s[13]||(s[13]=t=>o(e).content_id=t),T],label:"Vincular ao conte\xFAdo","bottom-slots":Boolean(i.errors.content_id),clearable:"","use-input":"",onFilter:ie},{hint:n(()=>[a("div",Qe,c(i.errors.content_id),1)]),"selected-item":n(t=>[l(D,{class:"adm-chip-primary q-my-none",label:t.opt.name,dense:""},{default:n(()=>[l(u,{name:"cancel",size:"xs",onClick:q=>t.removeAtIndex(t.index),class:"q-ml-xs cursor-pointer"},null,8,["onClick"])]),_:2},1032,["label"])]),_:1},8,["options","modelValue","bottom-slots"])])):b("",!0),o(e).has_link_with_content?(m(),_("div",Xe,[o(e).content_id?(m(),B(x,{key:0,options:o(ce),"emit-value":"","map-options":"",outlined:"",modelValue:o(e).linkable_type,"onUpdate:modelValue":[s[14]||(s[14]=t=>o(e).linkable_type=t),T],label:"Momento de vincula\xE7\xE3o do evento","bottom-slots":Boolean(i.errors.linkable_type)},{hint:n(()=>[a("div",Ze,c(i.errors.linkable_type),1)]),_:1},8,["options","modelValue","bottom-slots"])):b("",!0)])):b("",!0),o(e).has_link_with_content?(m(),_("div",Ge,[o(e).linkable_type!=="content"?(m(),B(x,{key:0,options:z.value,"option-value":"id","option-label":"name","emit-value":"","map-options":"",outlined:"",modelValue:o(e).linkable_id,"onUpdate:modelValue":s[15]||(s[15]=t=>o(e).linkable_id=t),label:o(re),"bottom-slots":Boolean(i.errors.linkable_id),onFilter:de,"use-input":"",loading:h.value,disable:h.value||k.value.length===0},{hint:n(()=>[a("div",Je,c(i.errors.linkable_id),1)]),"selected-item":n(t=>[l(D,{class:"adm-chip-primary q-my-none",label:t.opt.name,dense:""},{default:n(()=>[l(u,{name:"cancel",size:"xs",onClick:q=>t.removeAtIndex(t.index),class:"q-ml-xs cursor-pointer"},null,8,["onClick"])]),_:2},1032,["label"])]),_:1},8,["options","modelValue","label","bottom-slots","loading","disable"])):b("",!0)])):b("",!0),a("div",Ke,[a("div",We,[w(" Imagem de capa "),l(u,{name:"help_outline",size:"xs",class:"cursor-pointer"},{default:n(()=>[l(O,{anchor:"center right",self:"center left",offset:[10,10],class:"text-body2 bg-grey-10"},{default:n(()=>[w(" Tamanho recomendado: 800px X 600px ")]),_:1})]),_:1})])]),o(j)?(m(),_("div",et,[l(E,{src:o(j),style:{height:"400px"},class:"app-br-16"},{default:n(()=>[a("div",tt,[l(u,{name:"o_photo",size:"md",class:"q-mr-md"}),l(g,{color:"white",class:"absolute",style:{top:"8px",right:"8px"},flat:"",icon:"close",size:"md",onClick:J}),a("div",Y({class:"flex cursor-pointer"},o(U).getRootProps()),[a("input",A(L(o(U).getInputProps())),null,16),w(" Alterar imagem ")],16)])]),_:1},8,["src"])])):(m(),_("div",ot,[a("div",Y(o(U).getRootProps(),{class:"column flex-center q-py-lg text-grey adm-border-dashed-blue app-br-16"}),[a("input",A(L(o(U).getInputProps())),null,16),l(u,{name:"o_photo",size:"md"}),st],16)])),lt,(m(!0),_(ye,null,he(o(e).materials,(t,q)=>(m(),_("div",{class:"col-12 col-md-3",key:`material-${q}}}`},[l(E,{src:t.is_image?t.link:oe,style:{height:"240px"},class:"app-br-16"},{default:n(()=>{var Q;return[a("div",at,[l(u,{name:"attach_file",size:"md",class:"rotate-225 q-mr-md"}),a("div",nt,[a("span",it,c(t.name.length>25?t.name.slice(0,25)+"...":t.name),1),a("span",rt," ("+c((Q=t.size)!=null?Q:0)+" kb) ",1)]),l(g,{color:"white",class:"absolute",style:{top:"8px",right:"40px"},flat:"",icon:"file_download",size:"md",onClick:pe=>ue(t),dense:""},{default:n(()=>[l(O,{anchor:"center left",self:"center right",offset:[10,10],class:"text-body2 bg-grey-10"},{default:n(()=>[w(" Clique para fazer o download ")]),_:1})]),_:2},1032,["onClick"]),l(g,{color:"white",class:"absolute",style:{top:"8px",right:"8px"},flat:"",icon:"close",size:"md",onClick:pe=>te(q),dense:""},{default:n(()=>[l(O,{anchor:"center left",self:"center right",offset:[10,10],class:"text-body2 bg-grey-10"},{default:n(()=>[w(" Remover "+c(t.is_image?"imagem":"arquivo"),1)]),_:2},1024)]),_:2},1032,["onClick"])])]}),_:2},1032,["src"])]))),128)),a("div",dt,[a("div",Y(o(K)(),{class:"column flex-center q-py-lg text-grey adm-border-dashed-blue app-br-16"}),[a("input",A(L(o(W)())),null,16),l(u,{name:"attach_file",size:"md",class:"rotate-225"}),o(ee)?(m(),_("div",ct," Selecionando... ")):(m(),_("div",mt," Clique aqui ou arraste seus arquivos "))],16)]),a("div",ut,[l($,{modelValue:o(e).has_live_offer,"onUpdate:modelValue":s[16]||(s[16]=t=>o(e).has_live_offer=t),label:"Oferta ao vivo"},null,8,["modelValue"])]),o(e).has_live_offer?(m(),_("div",pt,[l(v,{outlined:"",modelValue:o(e).name_offer,"onUpdate:modelValue":s[17]||(s[17]=t=>o(e).name_offer=t),label:"Nome da oferta","bottom-slots":Boolean(i.errors.name_offer)},{hint:n(()=>[a("div",_t,c(i.errors.name_offer),1)]),_:1},8,["modelValue","bottom-slots"])])):b("",!0),o(e).has_live_offer?(m(),_("div",ft,[l(v,{outlined:"",modelValue:o(e).embed_offer,"onUpdate:modelValue":s[18]||(s[18]=t=>o(e).embed_offer=t),label:"Link da oferta","bottom-slots":Boolean(i.errors.embed_offer)},{hint:n(()=>[a("div",bt,c(i.errors.embed_offer),1)]),_:1},8,["modelValue","bottom-slots"])])):b("",!0),o(e).has_live_offer?(m(),_("div",vt,[l(v,{outlined:"",modelValue:o(e).description_offer,"onUpdate:modelValue":s[19]||(s[19]=t=>o(e).description_offer=t),label:"Descri\xE7\xE3o da oferta","bottom-slots":Boolean(i.errors.description_offer)},{hint:n(()=>[a("div",ht,c(i.errors.description_offer),1)]),_:1},8,["modelValue","bottom-slots"])])):b("",!0),a("div",yt,[l(g,{color:"primary",class:"q-mr-md",rounded:"","no-caps":"",outline:"",onClick:me},{default:n(()=>[l(u,{name:"chevron_left",size:"xs"}),gt]),_:1}),l(g,{color:"primary",rounded:"","no-caps":"",onClick:se,disabled:o(e).processing},{default:n(()=>[l(u,{name:"add",size:"xs"}),kt]),_:1},8,["disabled"])])])])]),_:1})}}};export{Ct as default};
