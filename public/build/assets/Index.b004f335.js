import{h as ne,u,m as V,j as re,c as f,w as t,r as s,o as m,a as e,b as i,H as ce,d as l,s as x,n as N,f as O,t as S}from"./app.cc606831.js";import{_ as ie}from"./AuthenticatedLayout.0bc0b363.js";import{_ as E}from"./DialogConfirm.f96873bf.js";const de={class:"row q-pb-xl"},ue={class:"column col-12 col-md-6 justify-center"},me=l("div",{class:"app-fs-28 app-fw-700 app-lh-32 text-grey-8"}," Grupos ",-1),pe={class:"col-12 col-md-6 flex justify-end items-center"},_e=l("div",{class:"q-ml-sm app-fw-500 app-fs-14 app-lh-20"}," Excluir selecionados ",-1),qe=l("div",{class:"q-ml-sm app-fw-500 app-fs-14 app-lh-20"}," Novo grupo ",-1),fe={class:"row q-col-gutter-sm"},ge={class:"col-12"},ye={class:"flex flex-center q-pt-lg q-pa-md q-gutter-sm"},be=l("div",{class:"q-ml-sm app-fw-500 app-fs-14 app-lh-20"}," Filtrar ",-1),xe=l("div",{class:"q-ml-sm app-fw-500 app-fs-14 app-lh-20 m-4"}," Limpar ",-1),ve={class:"row items-center app-fw-700 app-fs-16"},we=["onClick"],ke={key:1},he=l("div",{class:"q-ml-sm"}," Editar ",-1),Ve=l("div",{class:"q-ml-sm"}," Visualizar ",-1),Ce=l("div",{class:"q-ml-sm"}," Excluir ",-1),Pe={class:"row items-center text-grey"},je={class:"row items-center text-grey"},$e={__name:"Index",props:{groups:Object,errors:Object,query:Object},setup(d){const _=d,b=ne(),F=[{name:"name",align:"left",label:"Nome",field:"name",sorteable:!0},{name:"actions",align:"center",label:"A\xE7\xE3o"}],a=u({orderBy:_.query.orderBy,sort:_.query.sort,page:_.query.page,rowsPerPage:_.query.rowsPerPage,filters:{name:_.query.filters.name}}),G=n=>{a.orderBy===n?a.sort=a.sort=="desc"?"asc":"desc":a.sort=="asc",a.orderBy=n,a.page=1,g()},A=n=>{a.filters[n]=null,g()},g=()=>{a.get(route("admin.group.index"),{preserveState:!0,preserveScroll:!0,onSuccess:()=>v.value=!1})},D=()=>u().get(route("admin.group.create")),H=n=>u().get(route("admin.group.edit",n)),T=n=>u().get(route("admin.group.show",n));function I(n){b.dialog({component:E,componentProps:{title:"Excluir grupo",message:"Tem certeza que deseja excluir esse grupo?"}}).onOk(()=>{u().delete(route("admin.group.destroy",n),{onSuccess:()=>{b.notify({type:"positive",message:"Grupo exclu\xEDdo com sucesso",position:"top"})}})})}function L(){b.dialog({component:E,componentProps:{title:"Excluir selecionados",message:"Tem certeza que deseja excluir grupos selecionados?"}}).onOk(()=>{u({ids:y.value.map(n=>n.id)}).post(route("admin.group.destroy-multiples"),{onSuccess:()=>{y.value=[],b.notify({type:"positive",message:"Grupos exclu\xEDdos com sucesso",position:"top"})}})})}const y=V([]),C=re(()=>Object.values(_.query.filters).filter(n=>n).length),v=V(!1),P=V("groups"),Q=()=>u().get(route("admin.student.index")),R=()=>u().get(route("admin.group.index"));return(n,r)=>{const j=s("q-breadcrumbs-el"),J=s("q-breadcrumbs"),c=s("q-icon"),q=s("q-btn"),z=s("q-tab"),K=s("q-tabs"),M=s("q-chip"),B=s("q-space"),W=s("q-badge"),X=s("q-input"),U=s("q-menu"),w=s("q-card-section"),k=s("q-separator"),$=s("q-checkbox"),Y=s("q-th"),h=s("q-item"),Z=s("q-list"),ee=s("q-td"),oe=s("q-table"),te=s("q-select"),se=s("q-pagination"),le=s("q-card");return m(),f(ie,null,{default:t(()=>[e(i(ce),{title:"Grupos"}),l("div",de,[l("div",ue,[me,e(J,{class:"text-grey q-mt-sm app-fs-13 app-fw-400 app-lh-16",gutter:"xs"},{default:t(()=>[e(j,{label:"Home",class:"text-grey"}),e(j,{label:"Grupos",class:"text-primary"})]),_:1})]),l("div",pe,[y.value.length>0?(m(),f(q,{key:0,color:"negative",class:"q-mr-md",rounded:"","no-caps":"",outline:"",onClick:L},{default:t(()=>[e(c,{name:"close",size:"xs"}),_e]),_:1})):x("",!0),e(q,{color:"primary",rounded:"","no-caps":"",onClick:D},{default:t(()=>[e(c,{name:"add",size:"xs"}),qe]),_:1})])]),e(le,{flat:"",class:"app-br-16"},{default:t(()=>[e(K,{modelValue:P.value,"onUpdate:modelValue":r[0]||(r[0]=o=>P.value=o),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify","no-caps":""},{default:t(()=>[e(z,{name:"students",label:"Alunos",class:"q-py-md",onClick:Q}),e(z,{name:"groups",label:"Grupos de alunos",class:"q-py-md"})]),_:1},8,["modelValue"]),e(w,{class:"row items-center q-py-sm q-px-lg"},{default:t(()=>[d.query.filters.name?(m(),f(M,{key:0,class:"adm-chip-primary",label:`Nome = ${d.query.filters.name}`},{default:t(()=>[e(c,{name:"cancel",size:"xs",onClick:r[1]||(r[1]=o=>A("name")),class:"q-ml-xs cursor-pointer"})]),_:1},8,["label"])):x("",!0),e(B),e(q,{round:"",dense:"",flat:"",color:"primary"},{default:t(()=>[i(C)?(m(),f(W,{key:0,color:"primary",floating:"",rounded:"",label:i(C)},null,8,["label"])):x("",!0),e(c,{name:"tune",class:"rotate-90"}),e(U,{style:{"min-width":"500px"},"max-width":"500px",class:"bg-white q-pa-md app-br-16",modelValue:v.value,"onUpdate:modelValue":r[3]||(r[3]=o=>v.value=o)},{default:t(()=>[l("div",fe,[l("div",ge,[e(X,{outlined:"",modelValue:i(a).filters.name,"onUpdate:modelValue":r[2]||(r[2]=o=>i(a).filters.name=o),label:"Nome do grupo"},null,8,["modelValue"])])]),l("div",ye,[e(q,{color:"primary",rounded:"","no-caps":"",onClick:g},{default:t(()=>[e(c,{name:"check",size:"xs"}),be]),_:1}),e(q,{color:"primary",rounded:"",outline:"","no-caps":"",onClick:R},{default:t(()=>[e(c,{name:"close",size:"xs"}),xe]),_:1})])]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(w,{class:"q-py-none"},{default:t(()=>[e(k,{color:"grey-3"})]),_:1}),e(w,{class:"q-py-none"},{default:t(()=>[e(oe,{rows:d.groups.data,columns:F,flat:"",class:"text-grey-8",selected:y.value,"onUpdate:selected":r[4]||(r[4]=o=>y.value=o),selection:"multiple","hide-pagination":"",pagination:{rowsPerPage:i(a).rowsPerPage}},{"header-selection":t(o=>[e($,{modelValue:o.selected,"onUpdate:modelValue":p=>o.selected=p},null,8,["modelValue","onUpdate:modelValue"])]),"body-selection":t(o=>[e($,{"model-value":o.selected,"onUpdate:modelValue":(p,ae)=>{Object.getOwnPropertyDescriptor(o,"selected").set(p,ae)}},null,8,["model-value","onUpdate:modelValue"])]),"header-cell":t(o=>[e(Y,{props:o},{default:t(()=>[l("div",ve,[o.col.sorteable?(m(),N("div",{key:0,onClick:p=>G(o.col.name),class:"cursor-pointer"},[O(S(o.col.label)+" ",1),o.col.name===d.query.orderBy&&d.query.sort=="desc"?(m(),f(c,{key:0,name:"keyboard_arrow_up"})):o.col.name===d.query.orderBy&&d.query.sort=="asc"?(m(),f(c,{key:1,name:"keyboard_arrow_down"})):x("",!0)],8,we)):(m(),N("div",ke,S(o.col.label),1))])]),_:2},1032,["props"])]),"body-cell-actions":t(o=>[e(ee,{props:o,"auto-width":""},{default:t(()=>[e(q,{icon:"more_vert",flat:""},{default:t(()=>[e(U,null,{default:t(()=>[e(Z,null,{default:t(()=>[e(h,{clickable:"",onClick:p=>H(o.row.id),class:"text-grey-7 flex flex-center"},{default:t(()=>[e(c,{name:"edit",size:"xs"}),he]),_:2},1032,["onClick"]),e(k),e(h,{clickable:"",onClick:p=>T(o.row.id),class:"text-grey-7 flex flex-center"},{default:t(()=>[e(c,{name:"visibility",size:"xs"}),Ve]),_:2},1032,["onClick"]),e(k),e(h,{clickable:"",onClick:p=>I(o.row.id),class:"text-grey-7 flex flex-center"},{default:t(()=>[e(c,{name:"close",size:"xs"}),Ce]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["rows","selected","pagination"]),l("div",Pe,[e(B),l("div",je,[O(" Resultado por p\xE1gina "),e(te,{options:[5,10,15],modelValue:i(a).rowsPerPage,"onUpdate:modelValue":[r[5]||(r[5]=o=>i(a).rowsPerPage=o),g],borderless:"",class:"q-ml-md"},null,8,["modelValue"])]),e(se,{modelValue:i(a).page,"onUpdate:modelValue":[r[6]||(r[6]=o=>i(a).page=o),g],max:d.groups.meta.last_page,"direction-links":"","boundary-links":"",color:"grey",input:"","icon-first":"keyboard_double_arrow_left","icon-last":"keyboard_double_arrow_right"},null,8,["modelValue","max"])])]),_:1})]),_:1})]),_:1})}}};export{$e as default};
