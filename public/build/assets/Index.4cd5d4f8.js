import{h as ce,u as y,m as D,j as O,c as u,w as o,r as s,o as p,a as e,b as d,H as ie,d as n,s as g,f as w,t as U}from"./app.cc606831.js";import{_ as re}from"./AuthenticatedLayout.0bc0b363.js";import{_ as E}from"./DialogConfirm.f96873bf.js";const de={class:"row q-pb-xl"},me={class:"column col-12 col-md-6 justify-center"},ue=n("div",{class:"app-fs-28 app-fw-700 app-lh-32 text-grey-8"}," Se\xE7\xF5es ",-1),pe={class:"col-12 col-md-6 flex justify-end items-center"},_e=n("div",{class:"q-ml-sm app-fw-500 app-fs-14 app-lh-20"}," Excluir selecionados ",-1),fe=n("div",{class:"q-ml-sm app-fw-500 app-fs-14 app-lh-20"}," Novo se\xE7\xE3o ",-1),qe={class:"row q-col-gutter-sm"},ye={class:"col-12"},ge={class:"flex flex-center q-pt-lg q-pa-md q-gutter-sm"},xe=n("div",{class:"q-ml-sm app-fw-500 app-fs-14 app-lh-20"}," Filtrar ",-1),be=n("div",{class:"q-ml-sm app-fw-500 app-fs-14 app-lh-20 m-4"}," Limpar ",-1),ve=["onClick"],we={class:"app-fw-700 app-fs-16"},he=n("div",{class:"q-ml-sm"}," Editar ",-1),ke=n("div",{class:"q-ml-sm"}," Visualizar ",-1),Se=n("div",{class:"q-ml-sm"}," Excluir ",-1),Ve=n("div",{class:"q-ml-sm"}," Visualizar ",-1),Ce={class:"row items-center text-grey"},Be={class:"row items-center text-grey"},je={__name:"Index",props:{sections:Object,errors:Object,query:Object,canSectionStore:Boolean,canSectionEdit:Boolean,canSectionDestroy:Boolean},setup(i){const x=i,v=ce(),N=[{name:"name",align:"left",label:"Nome",field:"name",style:"width: 100%"},{name:"actions",label:"A\xE7\xE3o"}],l=y({orderBy:x.query.orderBy,sort:x.query.sort,page:x.query.page,rowsPerPage:x.query.rowsPerPage,filters:{name:x.query.filters.name}}),A=a=>{l.orderBy===a?l.sort=l.sort=="desc"?"asc":"desc":l.sort=="asc",l.orderBy=a,l.page=1,b()},F=a=>{l.filters[a]=null,b()},b=()=>{l.get(route("admin.section.index"),{preserveState:!0,preserveScroll:!0,onSuccess:()=>h.value=!1})},T=()=>y().get(route("admin.section.create")),H=a=>y().get(route("admin.section.edit",a)),B=a=>y().get(route("admin.section.show",a)),I=()=>y().get(route("admin.section.sort-index")),L=a=>{v.dialog({component:E,componentProps:{title:"Excluir se\xE7\xE3o",message:"Ao excluir a se\xE7\xE3o, todos os v\xEDnculos com conte\xFAdos ser\xE3o desfeitos. Deseja realmente excluir?"}}).onOk(()=>{y().delete(route("admin.section.destroy",a),{onSuccess:()=>{v.notify({type:"positive",message:"Se\xE7\xE3o exclu\xEDdo com sucesso",position:"top"})}})})},Q=()=>{v.dialog({component:E,componentProps:{title:"Excluir selecionados",message:"Ao excluir se\xE7\xF5es selecionadas, elas ser\xE3o desvinculadas dos conte\xFAdos. Tem certeza que deseja excluir se\xE7\xF5es selecionadas?"}}).onOk(()=>{y({ids:m.value.map(a=>a.id)}).post(route("admin.section.destroy-multiples"),{onSuccess:()=>{m.value=[],v.notify({type:"positive",message:"Se\xE7\xF5es exclu\xEDdas com sucesso",position:"top"})}})})},m=D([]),P=O(()=>Object.values(x.query.filters).filter(a=>a).length),h=D(!1),R=()=>y().get(route("admin.section.index")),G=O(()=>{let c=m.value.filter(_=>!_.can_delete).map(_=>_.name).join(" e ");return m.value.filter(_=>!_.can_delete).length>1?`As se\xE7\xF5es ${c} n\xE3o podem ser apagadas`:`A se\xE7\xE3o ${c} n\xE3o pode ser apagada`});return(a,c)=>{const _=s("q-breadcrumbs-el"),J=s("q-breadcrumbs"),r=s("q-icon"),f=s("q-btn"),K=s("q-banner"),M=s("q-chip"),z=s("q-space"),W=s("q-tooltip"),X=s("q-badge"),Y=s("q-input"),$=s("q-menu"),k=s("q-card-section"),S=s("q-separator"),j=s("q-checkbox"),Z=s("q-th"),V=s("q-item-section"),C=s("q-item"),ee=s("q-list"),te=s("q-td"),oe=s("q-table"),se=s("q-select"),ne=s("q-pagination"),ae=s("q-card");return p(),u(re,null,{default:o(()=>[e(d(ie),{title:"Se\xE7\xF5es"}),n("div",de,[n("div",me,[ue,e(J,{class:"text-grey q-mt-sm app-fs-13 app-fw-400 app-lh-16",gutter:"xs"},{default:o(()=>[e(_,{label:"Home",class:"text-grey"}),e(_,{label:"Se\xE7\xF5es",class:"text-primary"})]),_:1})]),n("div",pe,[m.value.length>0&&m.value.every(t=>t.can_delete)&&i.canSectionDestroy?(p(),u(f,{key:0,color:"negative",class:"q-mr-md",rounded:"","no-caps":"",outline:"",onClick:Q},{default:o(()=>[e(r,{name:"close",size:"xs"}),_e]),_:1})):g("",!0),e(f,{color:"primary",rounded:"","no-caps":"",onClick:T},{default:o(()=>[e(r,{name:"add",size:"xs"}),fe]),_:1})])]),m.value.length>0&&m.value.some(t=>!t.can_delete)&&i.canSectionDestroy?(p(),u(K,{key:0,"inline-actions":"",class:"text-white bg-negative q-mb-lg app-br-16"},{default:o(()=>[w(U(d(G)),1)]),_:1})):g("",!0),e(ae,{flat:"",class:"app-br-16"},{default:o(()=>[e(k,{class:"row items-center q-py-sm q-px-lg"},{default:o(()=>[i.query.filters.name?(p(),u(M,{key:0,class:"adm-chip-primary",label:`Nome = ${i.query.filters.name}`},{default:o(()=>[e(r,{name:"cancel",size:"xs",onClick:c[0]||(c[0]=t=>F("name")),class:"q-ml-xs cursor-pointer"})]),_:1},8,["label"])):g("",!0),e(z),e(f,{round:"",dense:"",flat:"",color:"primary",onClick:I},{default:o(()=>[e(r,{name:"format_list_numbered"}),e(W,null,{default:o(()=>[w(" Ordenar ")]),_:1})]),_:1}),e(f,{round:"",dense:"",flat:"",color:"primary"},{default:o(()=>[d(P)?(p(),u(X,{key:0,color:"primary",floating:"",rounded:"",label:d(P)},null,8,["label"])):g("",!0),e(r,{name:"tune",class:"rotate-90"}),e($,{style:{"min-width":"500px"},"max-width":"500px",class:"bg-white q-pa-md app-br-16",modelValue:h.value,"onUpdate:modelValue":c[2]||(c[2]=t=>h.value=t)},{default:o(()=>[n("div",qe,[n("div",ye,[e(Y,{outlined:"",modelValue:d(l).filters.name,"onUpdate:modelValue":c[1]||(c[1]=t=>d(l).filters.name=t),label:"Nome da se\xE7\xE3o"},null,8,["modelValue"])])]),n("div",ge,[e(f,{color:"primary",rounded:"","no-caps":"",onClick:b},{default:o(()=>[e(r,{name:"check",size:"xs"}),xe]),_:1}),e(f,{color:"primary",rounded:"",outline:"","no-caps":"",onClick:R},{default:o(()=>[e(r,{name:"close",size:"xs"}),be]),_:1})])]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(k,{class:"q-py-none"},{default:o(()=>[e(S,{color:"grey-3"})]),_:1}),e(k,{class:"q-py-none"},{default:o(()=>[e(oe,{rows:i.sections.data,columns:N,flat:"",class:"text-grey-8",selected:m.value,"onUpdate:selected":c[3]||(c[3]=t=>m.value=t),selection:"multiple","hide-pagination":"",pagination:{rowsPerPage:d(l).rowsPerPage}},{"header-selection":o(t=>[e(j,{modelValue:t.selected,"onUpdate:modelValue":q=>t.selected=q},null,8,["modelValue","onUpdate:modelValue"])]),"body-selection":o(t=>[e(j,{"model-value":t.selected,"onUpdate:modelValue":(q,le)=>{Object.getOwnPropertyDescriptor(t,"selected").set(q,le)}},null,8,["model-value","onUpdate:modelValue"])]),"header-cell":o(t=>[e(Z,{props:t},{default:o(()=>[n("div",{class:"app-fw-700 app-fs-16 cursor-pointer",onClick:q=>A(t.col.name)},[w(U(t.col.label)+" ",1),t.col.name===i.query.orderBy?(p(),u(r,{key:0,name:i.query.sort=="desc"?"keyboard_arrow_up":"keyboard_arrow_down"},null,8,["name"])):g("",!0)],8,ve)]),_:2},1032,["props"])]),"body-cell-actions":o(t=>[e(te,{props:t},{default:o(()=>[n("div",we,[i.canSectionEdit||i.canSectionDestroy?(p(),u(f,{key:0,icon:"more_vert",flat:""},{default:o(()=>[e($,{offset:[65,0]},{default:o(()=>[e(ee,null,{default:o(()=>[i.canSectionEdit?(p(),u(C,{key:0,clickable:"",onClick:q=>H(t.row.id),class:"text-grey-7 flex items-center"},{default:o(()=>[e(r,{name:"edit",size:"xs"}),e(V,{"no-wrap":""},{default:o(()=>[he]),_:1})]),_:2},1032,["onClick"])):g("",!0),e(S),e(C,{clickable:"",onClick:q=>B(t.row.id),class:"text-grey-7 flex items-center"},{default:o(()=>[e(r,{name:"visibility",size:"xs"}),e(V,{"no-wrap":""},{default:o(()=>[ke]),_:1})]),_:2},1032,["onClick"]),e(S),i.canSectionDestroy&&t.row.can_delete?(p(),u(C,{key:1,clickable:"",onClick:q=>L(t.row.id),class:"text-grey-7 flex flex-center"},{default:o(()=>[e(r,{name:"close",size:"xs"}),e(V,{"no-wrap":""},{default:o(()=>[Se]),_:1})]),_:2},1032,["onClick"])):g("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):(p(),u(f,{key:1,onClick:q=>B(t.row.id),class:"text-grey-7 flex flex-center text-no-wrap",flat:"","no-caps":""},{default:o(()=>[e(r,{name:"visibility",size:"xs"}),Ve]),_:2},1032,["onClick"]))])]),_:2},1032,["props"])]),_:1},8,["rows","selected","pagination"]),n("div",Ce,[e(z),n("div",Be,[w(" Resultado por p\xE1gina "),e(se,{options:[5,10,15],modelValue:d(l).rowsPerPage,"onUpdate:modelValue":[c[4]||(c[4]=t=>d(l).rowsPerPage=t),b],borderless:"",class:"q-ml-md"},null,8,["modelValue"])]),e(ne,{modelValue:d(l).page,"onUpdate:modelValue":[c[5]||(c[5]=t=>d(l).page=t),b],max:i.sections.meta.last_page,"direction-links":"","boundary-links":"",color:"grey",input:"","icon-first":"keyboard_double_arrow_left","icon-last":"keyboard_double_arrow_right"},null,8,["modelValue","max"])])]),_:1})]),_:1})]),_:1})}}};export{je as default};
