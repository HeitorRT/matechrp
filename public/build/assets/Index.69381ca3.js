import{h as ce,u as v,m as B,j as ue,c as u,w as o,r as i,i as pe,o as p,a as e,b as n,H as me,d as a,s as m,t as w,e as L,q as _e,f as S}from"./app.cc606831.js";import{_ as fe}from"./AuthenticatedLayout.0bc0b363.js";import{_ as Q}from"./DialogConfirm.f96873bf.js";const qe={class:"row q-pb-xl"},ye={class:"column col-12 col-md-6 justify-center"},ve=a("div",{class:"app-fs-28 app-fw-700 app-lh-32 text-grey-8"}," Pop-ups ",-1),be={class:"col-12 col-md-6 flex justify-end items-center"},xe=a("div",{class:"q-ml-sm app-fw-500 app-fs-14 app-lh-20"}," Excluir selecionados ",-1),ge=a("div",{class:"q-ml-sm app-fw-500 app-fs-14 app-lh-20"}," Novo pop-up ",-1),ke={class:"row q-col-gutter-sm"},we={class:"col-12"},Ve={class:"col-12"},he={class:"col-12"},Ce={class:"text-red"},Pe={class:"row items-center justify-end"},De={class:"col-12"},ze={class:"text-red"},$e={class:"row items-center justify-end"},Ue={class:"col-12"},Ye={class:"flex flex-center q-pt-lg q-pa-md q-gutter-sm"},Be=a("div",{class:"q-ml-sm app-fw-500 app-fs-14 app-lh-20"}," Filtrar ",-1),Se=a("div",{class:"q-ml-sm app-fw-500 app-fs-14 app-lh-20 m-4"}," Limpar ",-1),je=["onClick"],He={class:"app-fw-700 app-fs-16"},Oe=a("div",{class:"q-ml-sm"}," Editar ",-1),Ae=a("div",{class:"q-ml-sm"}," Visualizar ",-1),Ee=a("div",{class:"q-ml-sm"}," Excluir ",-1),Me=a("div",{class:"q-ml-sm"}," Visualizar ",-1),Fe={class:"row items-center text-grey"},Ie={class:"row items-center text-grey"},Qe={__name:"Index",props:{popups:Object,errors:Object,query:Object,contents:Array,canPopupStore:Boolean,canPopupEdit:Boolean,canPopupDestroy:Boolean},setup(r){const q=r,g=ce(),R=[{name:"description",align:"left",label:"Descri\xE7\xE3o",field:"description",style:"width: 40%"},{name:"start_at",align:"left",label:"In\xEDcio",field:"start_at",style:"width: 25%"},{name:"end_at",align:"left",label:"T\xE9rmino",field:"end_at",style:"width: 25%"},{name:"actions",label:"A\xE7\xE3o"}],s=v({orderBy:q.query.orderBy,sort:q.query.sort,page:q.query.page,rowsPerPage:q.query.rowsPerPage,filters:{description:q.query.filters.description}}),G=d=>{s.orderBy===d?s.sort=s.sort=="desc"?"asc":"desc":s.sort=="asc",s.orderBy=d,s.page=1,x()},b=d=>{s.filters[d]=null,x()},x=()=>{s.get(route("admin.popup.index"),{preserveState:!0,preserveScroll:!0,onSuccess:()=>V.value=!1})},J=()=>v().get(route("admin.popup.create")),K=d=>v().get(route("admin.popup.edit",d)),j=d=>v().get(route("admin.popup.show",d)),W=d=>{g.dialog({component:Q,componentProps:{title:"Excluir pop-up",message:"Ao excluir pop-up, ela ser\xE1 desvinculada dos conte\xFAdos. Tem certeza que deseja excluir pop-up?"}}).onOk(()=>{v().delete(route("admin.popup.destroy",d),{onSuccess:()=>{g.notify({type:"positive",message:"Popup exclu\xEDdo com sucesso",position:"top"})}})})},X=()=>{g.dialog({component:Q,componentProps:{title:"Excluir selecionados",message:"Ao excluir popups selecionadas, elas ser\xE3o desvinculadas dos conte\xFAdos. Tem certeza que deseja excluir popups selecionadas?"}}).onOk(()=>{v({ids:k.value.map(d=>d.id)}).post(route("admin.popup.destroy-multiples"),{onSuccess:()=>{k.value=[],g.notify({type:"positive",message:"Popups exclu\xEDdas com sucesso",position:"top"})}})})},k=B([]),H=ue(()=>Object.values(q.query.filters).filter(d=>d).length),V=B(!1),Z=()=>v().get(route("admin.popup.index")),O=B(q.contents),ee=(d,l,h)=>{l(()=>O.value=q.contents.filter(C=>C.name.toLowerCase().indexOf(d.toLowerCase())>-1))},te=d=>{switch(d){case"ativo":return"adm-bg-positive";case"inativo":return"adm-bg-negative";case"a_exibir":return"adm-bg-caution";default:return"bg-white"}};return(d,l)=>{const h=i("q-breadcrumbs-el"),C=i("q-breadcrumbs"),c=i("q-icon"),_=i("q-btn"),y=i("q-chip"),A=i("q-space"),oe=i("q-badge"),P=i("q-input"),D=i("q-select"),E=i("q-date"),M=i("q-time"),F=i("q-popup-proxy"),I=i("q-menu"),z=i("q-card-popup"),$=i("q-separator"),N=i("q-checkbox"),le=i("q-th"),U=i("q-item-popup"),Y=i("q-item"),se=i("q-list"),ae=i("q-td"),ne=i("q-table"),ie=i("q-pagination"),re=i("q-card"),T=pe("close-popup");return p(),u(fe,null,{default:o(()=>[e(n(me),{title:"Pop-ups"}),a("div",qe,[a("div",ye,[ve,e(C,{class:"text-grey q-mt-sm app-fs-13 app-fw-400 app-lh-16",gutter:"xs"},{default:o(()=>[e(h,{label:"Home",class:"text-grey"}),e(h,{label:"Pop-ups",class:"text-primary"})]),_:1})]),a("div",be,[r.canPopupDestroy?(p(),u(_,{key:0,color:"negative",class:"q-mr-md",rounded:"","no-caps":"",outline:"",onClick:X},{default:o(()=>[e(c,{name:"close",size:"xs"}),xe]),_:1})):m("",!0),e(_,{color:"primary",rounded:"","no-caps":"",onClick:J},{default:o(()=>[e(c,{name:"add",size:"xs"}),ge]),_:1})])]),e(re,{flat:"",class:"app-br-16"},{default:o(()=>[e(z,{class:"row items-center q-py-sm q-px-lg"},{default:o(()=>[r.query.filters.description?(p(),u(y,{key:0,class:"adm-chip-primary",label:`Descri\xE7\xE3o = ${r.query.filters.description}`},{default:o(()=>[e(c,{name:"cancel",size:"xs",onClick:l[0]||(l[0]=t=>b("description")),class:"q-ml-xs cursor-pointer"})]),_:1},8,["label"])):m("",!0),r.query.filters.start_at?(p(),u(y,{key:1,class:"adm-chip-primary",label:`Data e hora de in\xEDcio = ${r.query.filters.start_at}`},{default:o(()=>[e(c,{name:"cancel",size:"xs",onClick:l[1]||(l[1]=t=>b("start_at")),class:"q-ml-xs cursor-pointer"})]),_:1},8,["label"])):m("",!0),r.query.filters.end_at?(p(),u(y,{key:2,class:"adm-chip-primary",label:`Data e hora de t\xE9rmino = ${r.query.filters.end_at}`},{default:o(()=>[e(c,{name:"cancel",size:"xs",onClick:l[2]||(l[2]=t=>b("end_at")),class:"q-ml-xs cursor-pointer"})]),_:1},8,["label"])):m("",!0),r.query.filters.active=="ativo"?(p(),u(y,{key:3,class:"adm-chip-primary",label:"Status = Ativo"},{default:o(()=>[e(c,{name:"cancel",size:"xs",onClick:l[3]||(l[3]=t=>b("active")),class:"q-ml-xs cursor-pointer"})]),_:1})):m("",!0),r.query.filters.active=="inativo"?(p(),u(y,{key:4,class:"adm-chip-primary",label:"Status = Inativo"},{default:o(()=>[e(c,{name:"cancel",size:"xs",onClick:l[4]||(l[4]=t=>b("active")),class:"q-ml-xs cursor-pointer"})]),_:1})):m("",!0),r.query.filters.active=="a_exibir"?(p(),u(y,{key:5,class:"adm-chip-primary",label:"Status = A exibir"},{default:o(()=>[e(c,{name:"cancel",size:"xs",onClick:l[5]||(l[5]=t=>b("active")),class:"q-ml-xs cursor-pointer"})]),_:1})):m("",!0),e(A),e(_,{round:"",dense:"",flat:"",color:"primary"},{default:o(()=>[n(H)?(p(),u(oe,{key:0,color:"primary",floating:"",rounded:"",label:n(H)},null,8,["label"])):m("",!0),e(c,{name:"tune",class:"rotate-90"}),e(I,{style:{"min-width":"500px"},"max-width":"500px",class:"bg-white q-pa-md app-br-16",modelValue:V.value,"onUpdate:modelValue":l[15]||(l[15]=t=>V.value=t)},{default:o(()=>[a("div",ke,[a("div",we,[e(P,{outlined:"",modelValue:n(s).filters.description,"onUpdate:modelValue":l[6]||(l[6]=t=>n(s).filters.description=t),label:"Descri\xE7\xE3o do pop-up"},null,8,["modelValue"])]),a("div",Ve,[e(D,{options:O.value,"option-value":"id","option-label":"name","emit-value":"","map-options":"",outlined:"",modelValue:n(s).filters.content_id,"onUpdate:modelValue":l[7]||(l[7]=t=>n(s).filters.content_id=t),label:"Conte\xFAdo",clearable:"","use-input":"",onFilter:ee},{"selected-item":o(t=>[e(y,{class:"adm-chip-primary q-my-none",label:t.opt.name,dense:""},{default:o(()=>[e(c,{name:"cancel",size:"xs",onClick:f=>t.removeAtIndex(t.index),class:"q-ml-xs cursor-pointer"},null,8,["onClick"])]),_:2},1032,["label"])]),_:1},8,["options","modelValue"])]),a("div",he,[e(P,{outlined:"",modelValue:n(s).filters.start_at,"onUpdate:modelValue":l[10]||(l[10]=t=>n(s).filters.start_at=t),mask:"##/##/#### ##:##",label:"Data e hora de in\xEDcio",placeholder:"dia/m\xEAs/ano hora:min","bottom-slots":Boolean(r.errors["filters.start_at"]),clearable:""},{hint:o(()=>[a("div",Ce,w(r.errors["filters.start_at"]),1)]),prepend:o(()=>[e(c,{name:"o_calendar_today"})]),default:o(()=>[e(F,{class:"row"},{default:o(()=>[e(E,{modelValue:n(s).filters.start_at,"onUpdate:modelValue":l[8]||(l[8]=t=>n(s).filters.start_at=t),mask:"DD/MM/YYYY HH:mm",flat:"",square:""},null,8,["modelValue"]),e(M,{modelValue:n(s).filters.start_at,"onUpdate:modelValue":l[9]||(l[9]=t=>n(s).filters.start_at=t),mask:"DD/MM/YYYY HH:mm",format24h:"",flat:"",square:""},{default:o(()=>[a("div",Pe,[L(e(_,{label:"Ok",color:"primary",flat:""},null,512),[[T]])])]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue","bottom-slots"])]),a("div",De,[e(P,{outlined:"",modelValue:n(s).filters.end_at,"onUpdate:modelValue":l[13]||(l[13]=t=>n(s).filters.end_at=t),mask:"##/##/#### ##:##",label:"Data e hora de t\xE9rmino","bottom-slots":Boolean(r.errors["filters.end_at"]),placeholder:"dia/m\xEAs/ano hora:min",clearable:""},{hint:o(()=>[a("div",ze,w(r.errors["filters.end_at"]),1)]),prepend:o(()=>[e(c,{name:"o_calendar_today"})]),default:o(()=>[e(F,{class:"row"},{default:o(()=>[e(E,{modelValue:n(s).filters.end_at,"onUpdate:modelValue":l[11]||(l[11]=t=>n(s).filters.end_at=t),mask:"DD/MM/YYYY HH:mm",flat:"",square:""},null,8,["modelValue"]),e(M,{modelValue:n(s).filters.end_at,"onUpdate:modelValue":l[12]||(l[12]=t=>n(s).filters.end_at=t),mask:"DD/MM/YYYY HH:mm",format24h:"",flat:"",square:""},{default:o(()=>[a("div",$e,[L(e(_,{label:"Ok",color:"primary",flat:""},null,512),[[T]])])]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue","bottom-slots"])]),a("div",Ue,[e(D,{options:[{label:"Ativo",value:"ativo"},{label:"Inativo",value:"inativo"},{label:"A exibir",value:"a_exibir"}],outlined:"",modelValue:n(s).filters.active,"onUpdate:modelValue":l[14]||(l[14]=t=>n(s).filters.active=t),label:"Status","map-options":"","emit-value":""},{"selected-item":o(t=>[e(y,{tabindex:t.tabindex,"text-color":"white",class:_e([te(t.opt.value),"q-my-none"]),dense:""},{default:o(()=>[S(w(t.opt.label),1)]),_:2},1032,["tabindex","class"])]),_:1},8,["modelValue"])])]),a("div",Ye,[e(_,{color:"primary",rounded:"","no-caps":"",onClick:x},{default:o(()=>[e(c,{name:"check",size:"xs"}),Be]),_:1}),e(_,{color:"primary",rounded:"",outline:"","no-caps":"",onClick:Z},{default:o(()=>[e(c,{name:"close",size:"xs"}),Se]),_:1})])]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(z,{class:"q-py-none"},{default:o(()=>[e($,{color:"grey-3"})]),_:1}),e(z,{class:"q-py-none"},{default:o(()=>[e(ne,{rows:r.popups.data,columns:R,flat:"",class:"text-grey-8",selected:k.value,"onUpdate:selected":l[16]||(l[16]=t=>k.value=t),selection:"multiple","hide-pagination":"",pagination:{rowsPerPage:n(s).rowsPerPage}},{"header-selection":o(t=>[e(N,{modelValue:t.selected,"onUpdate:modelValue":f=>t.selected=f},null,8,["modelValue","onUpdate:modelValue"])]),"body-selection":o(t=>[e(N,{"model-value":t.selected,"onUpdate:modelValue":(f,de)=>{Object.getOwnPropertyDescriptor(t,"selected").set(f,de)}},null,8,["model-value","onUpdate:modelValue"])]),"header-cell":o(t=>[e(le,{props:t},{default:o(()=>[a("div",{class:"app-fw-700 app-fs-16 cursor-pointer",onClick:f=>G(t.col.name)},[S(w(t.col.label)+" ",1),t.col.name===r.query.orderBy?(p(),u(c,{key:0,name:r.query.sort=="desc"?"keyboard_arrow_up":"keyboard_arrow_down"},null,8,["name"])):m("",!0)],8,je)]),_:2},1032,["props"])]),"body-cell-actions":o(t=>[e(ae,{props:t},{default:o(()=>[a("div",He,[r.canPopupEdit||r.canPopupDestroy?(p(),u(_,{key:0,icon:"more_vert",flat:""},{default:o(()=>[e(I,{offset:[65,0]},{default:o(()=>[e(se,null,{default:o(()=>[r.canPopupEdit?(p(),u(Y,{key:0,clickable:"",onClick:f=>K(t.row.id),class:"text-grey-7 flex items-center"},{default:o(()=>[e(c,{name:"edit",size:"xs"}),e(U,{"no-wrap":""},{default:o(()=>[Oe]),_:1})]),_:2},1032,["onClick"])):m("",!0),e($),e(Y,{clickable:"",onClick:f=>j(t.row.id),class:"text-grey-7 flex items-center"},{default:o(()=>[e(c,{name:"visibility",size:"xs"}),e(U,{"no-wrap":""},{default:o(()=>[Ae]),_:1})]),_:2},1032,["onClick"]),e($),r.canPopupDestroy?(p(),u(Y,{key:1,clickable:"",onClick:f=>W(t.row.id),class:"text-grey-7 flex flex-center"},{default:o(()=>[e(c,{name:"close",size:"xs"}),e(U,{"no-wrap":""},{default:o(()=>[Ee]),_:1})]),_:2},1032,["onClick"])):m("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):(p(),u(_,{key:1,onClick:f=>j(t.row.id),class:"text-grey-7 flex flex-center text-no-wrap",flat:"","no-caps":""},{default:o(()=>[e(c,{name:"visibility",size:"xs"}),Me]),_:2},1032,["onClick"]))])]),_:2},1032,["props"])]),_:1},8,["rows","selected","pagination"]),a("div",Fe,[e(A),a("div",Ie,[S(" Resultado por p\xE1gina "),e(D,{options:[5,10,15],modelValue:n(s).rowsPerPage,"onUpdate:modelValue":[l[17]||(l[17]=t=>n(s).rowsPerPage=t),x],borderless:"",class:"q-ml-md"},null,8,["modelValue"])]),e(ie,{modelValue:n(s).page,"onUpdate:modelValue":[l[18]||(l[18]=t=>n(s).page=t),x],max:r.popups.meta.last_page,"direction-links":"","boundary-links":"",color:"grey",input:"","icon-first":"keyboard_double_arrow_left","icon-last":"keyboard_double_arrow_right"},null,8,["modelValue","max"])])]),_:1})]),_:1})]),_:1})}}};export{Qe as default};
