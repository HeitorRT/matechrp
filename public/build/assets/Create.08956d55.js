import{_ as ce}from"./AuthenticatedLayout.0bc0b363.js";import{h as ue,u as Q,j as D,m as V,c as O,w as n,r as p,i as pe,o as m,a,b as t,H as _e,d as l,t as c,e as X,n as _,s as h,f as z,B,C as L,D as Y,p as be,F as ve}from"./app.cc606831.js";import{u as Z}from"./index.common.8f199d34.js";const fe={class:"row q-mb-lg"},he={class:"column col-12 col-md-6 justify-center"},ge=l("div",{class:"app-fs-28 app-fw-700 app-lh-32 text-grey-8"}," Novo evento ao vivo ",-1),ye={class:"bg-white q-py-lg q-px-lg app-br-16"},xe={class:"row q-col-gutter-lg"},ke=l("div",{class:"col-12 items-center q-mt-xs"},[l("div",{class:"q-ml-sm text-grey-8 app-fw-700 app-lh-32 app-fs-23"}," Informa\xE7\xF5es ")],-1),Ve={class:"col-12 col-xl-6"},qe={class:"text-red"},Ce={class:"col-12 col-xl-2 col-md-4"},we={class:"text-red"},Ue={class:"row items-center justify-end"},De={class:"col-12 col-xl-2 col-md-4"},Oe={class:"text-red"},ze={class:"row items-center justify-end"},Be={class:"col-12 col-xl-2 col-md-4"},Le={class:"col-12 col-md-12"},Ye={class:"text-red"},Se={class:"col-12 col-md-6"},je={class:"text-red"},Ae={class:"col-12 col-md-6"},Ie={class:"text-red"},Re={class:"col-12"},He={class:"text-red"},Me={class:"col-12"},Ne={key:0,class:"col-12 col-md-5"},Pe={class:"text-red"},Te={key:1,class:"col-12 col-md-4"},$e={class:"text-red"},Fe={key:2,class:"col-12 col-md-3"},Ee={class:"text-red"},Qe={class:"col-12 items-center q-mt-xs"},Xe={class:"q-ml-sm text-grey-8 app-fw-700 app-lh-32 app-fs-23"},Ze={key:3,class:"col-12 col-md-12"},Ge={class:"absolute-bottom text-subtitle2 row items-center"},Je={key:4,class:"col-12"},Ke=l("div",{class:"q-mt-sm"}," Clique aqui ou arraste sua imagem ",-1),We=l("div",{class:"col-12 items-center"},[l("div",{class:"q-ml-sm text-grey-8 app-fw-700 app-lh-32 app-fs-23"}," Material ")],-1),eo={class:"absolute-bottom text-subtitle2 row items-center"},oo={class:"column"},to={class:"text-caption"},so={class:"text-caption"},lo={class:"col-12"},ao={key:0,class:"q-mt-sm"},no={key:1,class:"q-mt-sm"},io={class:"col-12"},ro={key:5,class:"col-12 col-md-5"},mo={class:"text-red"},co={key:6,class:"col-12 col-md-7"},uo={class:"text-red"},po={key:7,class:"col-12"},_o={class:"text-red"},bo={class:"col-12 flex justify-end items-center"},vo=l("div",{class:"q-ml-sm app-fw-500 app-fs-14 app-lh-20"}," Voltar ",-1),fo=l("div",{class:"q-ml-sm app-fw-500 app-fs-14 app-lh-20"}," Criar evento ao vivo ",-1),ko={__name:"Create",props:{errors:Object,responsible:Array,campaigns:Array,linkableTypes:Object,contents:Array,seasonsOrChapters:Array},setup(i){const b=i,S=ue(),e=Q({id:null,name:null,description:null,event_type:"live",embed:null,has_live_offer:!1,name_offer:null,description_offer:null,embed_offer:null,responsible_id:null,number_of_students:1,start_at:null,end_at:null,group_ids:[],student_ids:[],campaign_ids:[],materials:[],image:null,linkable_id:null,linkable_type:"content",content_id:null,has_link_with_content:!1}),C=Z({onDrop:(d,s)=>{e.image=d[0],s.length>0&&S.notify({message:"Insira apenas uma imagem",position:"center"})},accept:["image/*"],maxFiles:1}),j=D(()=>e.image?typeof e.image=="object"?URL.createObjectURL(e.image):e.image:""),G=()=>e.image=null,{getRootProps:J,getInputProps:K,isDragActive:W}=Z({onDrop:(d,s)=>{for(var r=0;r<d.length;r++)e.materials.push({id:null,name:d[r].name,size:d[r].size,link:URL.createObjectURL(d[r]),uploadedFile:d[r],is_image:d[r].type.includes("image")})}}),ee=d=>{e.materials=[...e.materials.slice(0,d),...e.materials.slice(d+1)]},oe="https://i.pinimg.com/564x/04/54/7c/04547c2b354abb70a85ed8a2d1b33e5f.jpg",te=()=>{e.post(route("admin.live-event.store"),{onSuccess:()=>{S.notify({type:"positive",message:"Evento cadastrado com sucesso",position:"top"})}})},A=V(b.responsible),se=(d,s,r)=>{s(()=>A.value=b.responsible.filter(v=>v.name.toLowerCase().indexOf(d.toLowerCase())>-1))},I=V(b.campaigns),le=(d,s,r)=>{s(()=>I.value=b.campaigns.filter(v=>v.name.toLowerCase().indexOf(d.toLowerCase())>-1))},R=V(b.contents),ae=(d,s,r)=>{s(()=>R.value=b.contents.filter(v=>v.name.toLowerCase().indexOf(d.toLowerCase())>-1))},ne=D(()=>e.linkable_type==="season"?g.value?"Carregando epis\xF3dios":y.value.length===0?"Conte\xFAdo n\xE3o possu\xED temporadas":"Selecione a temporada":e.linkable_type==="chapter"?g.value?"Carregando epis\xF3dios":y.value.length===0?"Conte\xFAdo n\xE3o possu\xED epis\xF3dios":"Selecione o epis\xF3dio":"Selecione"),w=V(b.seasonsOrChapters),y=V(b.seasonsOrChapters),g=V(!1),ie=(d,s,r)=>{s(()=>w.value=y.value.filter(v=>v.name.toLowerCase().indexOf(d.toLowerCase())>-1))},H=()=>{if(e.linkable_id=null,w.value=[],y.value=[],g.value=!0,e.linkable_type!=="content"){let d=route("admin.quizz.linkables",{content:e.content_id,type:e.linkable_type});axios.get(d).then(s=>{s.data.items.forEach(r=>{w.value.push({id:r.id,name:r.name}),y.value.push({id:r.id,name:r.name})}),g.value=!1})}else g.value=!1},de=D(()=>{let d=new Array;for(const s in b.linkableTypes)d.push({label:b.linkableTypes[s],value:s});return d}),re=()=>Q().get(route("admin.live-event.index"));return(d,s)=>{const r=p("q-breadcrumbs-el"),v=p("q-breadcrumbs"),f=p("q-input"),u=p("q-icon"),M=p("q-date"),x=p("q-btn"),N=p("q-time"),P=p("q-popup-proxy"),U=p("q-chip"),q=p("q-select"),T=p("q-checkbox"),me=p("q-tooltip"),$=p("q-img"),F=pe("close-popup");return m(),O(ce,null,{default:n(()=>[a(t(_e),{title:"Evento ao vivo | Adicionar"}),l("div",fe,[l("div",he,[ge,a(v,{class:"text-grey q-mt-sm app-fs-13 app-fw-400 app-lh-16",gutter:"xs"},{default:n(()=>[a(r,{label:"Home",class:"text-grey"}),a(r,{label:"Eventos ao vivo",class:"text-grey"}),a(r,{label:"Novo evento ao vivo",class:"text-primary"})]),_:1})])]),l("div",ye,[l("div",xe,[ke,l("div",Ve,[a(f,{outlined:"",modelValue:t(e).name,"onUpdate:modelValue":s[0]||(s[0]=o=>t(e).name=o),label:"Nome do evento *","bottom-slots":Boolean(i.errors.name)},{hint:n(()=>[l("div",qe,c(i.errors.name),1)]),_:1},8,["modelValue","bottom-slots"])]),l("div",Ce,[a(f,{outlined:"",modelValue:t(e).start_at,"onUpdate:modelValue":s[3]||(s[3]=o=>t(e).start_at=o),mask:"##/##/#### ##:##",label:"Data e hora de inicio *","bottom-slots":Boolean(i.errors.start_at),clearable:""},{prepend:n(()=>[a(u,{name:"o_calendar_today"})]),hint:n(()=>[l("div",we,c(i.errors.start_at),1)]),default:n(()=>[a(P,{class:"row"},{default:n(()=>[a(M,{modelValue:t(e).start_at,"onUpdate:modelValue":s[1]||(s[1]=o=>t(e).start_at=o),mask:"DD/MM/YYYY HH:mm",flat:"",square:""},null,8,["modelValue"]),a(N,{modelValue:t(e).start_at,"onUpdate:modelValue":s[2]||(s[2]=o=>t(e).start_at=o),mask:"DD/MM/YYYY HH:mm",format24h:"",flat:"",square:""},{default:n(()=>[l("div",Ue,[X(a(x,{label:"Ok",color:"primary",flat:""},null,512),[[F]])])]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue","bottom-slots"])]),l("div",De,[a(f,{outlined:"",modelValue:t(e).end_at,"onUpdate:modelValue":s[6]||(s[6]=o=>t(e).end_at=o),mask:"##/##/#### ##:##",label:"Data e hora de t\xE9rmino *","bottom-slots":Boolean(i.errors.end_at),clearable:""},{prepend:n(()=>[a(u,{name:"o_calendar_today"})]),hint:n(()=>[l("div",Oe,c(i.errors.end_at),1)]),default:n(()=>[a(P,{class:"row"},{default:n(()=>[a(M,{modelValue:t(e).end_at,"onUpdate:modelValue":s[4]||(s[4]=o=>t(e).end_at=o),mask:"DD/MM/YYYY HH:mm",flat:"",square:""},null,8,["modelValue"]),a(N,{modelValue:t(e).end_at,"onUpdate:modelValue":s[5]||(s[5]=o=>t(e).end_at=o),mask:"DD/MM/YYYY HH:mm",format24h:"",flat:"",square:""},{default:n(()=>[l("div",ze,[X(a(x,{label:"Ok",color:"primary",flat:""},null,512),[[F]])])]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue","bottom-slots"])]),l("div",Be,[a(f,{outlined:"",modelValue:t(e).event_type,"onUpdate:modelValue":s[7]||(s[7]=o=>t(e).event_type=o),label:"Tipo",disable:""},null,8,["modelValue"])]),l("div",Le,[a(f,{outlined:"",modelValue:t(e).description,"onUpdate:modelValue":s[8]||(s[8]=o=>t(e).description=o),label:"Descri\xE7\xE3o do evento","bottom-slots":Boolean(i.errors.description)},{hint:n(()=>[l("div",Ye,c(i.errors.description),1)]),_:1},8,["modelValue","bottom-slots"])]),l("div",Se,[a(q,{options:A.value,"option-value":"id","option-label":"name","emit-value":"","map-options":"",outlined:"",modelValue:t(e).responsible_id,"onUpdate:modelValue":s[9]||(s[9]=o=>t(e).responsible_id=o),label:"Respons\xE1vel pelo evento *","bottom-slots":Boolean(i.errors.responsible_id),clearable:"","use-input":"",onFilter:se,"stack-label":""},{hint:n(()=>[l("div",je,c(i.errors.responsible_id),1)]),"selected-item":n(o=>[a(U,{class:"adm-chip-primary q-my-none",label:o.opt.name,dense:""},{default:n(()=>[a(u,{name:"cancel",size:"xs",onClick:k=>o.removeAtIndex(o.index),class:"q-ml-xs cursor-pointer"},null,8,["onClick"])]),_:2},1032,["label"])]),_:1},8,["options","modelValue","bottom-slots"])]),l("div",Ae,[a(q,{options:I.value,"option-value":"id","option-label":"name","emit-value":"","map-options":"",outlined:"",modelValue:t(e).campaign_ids,"onUpdate:modelValue":s[10]||(s[10]=o=>t(e).campaign_ids=o),label:"Campanhas","bottom-slots":Boolean(i.errors.campaign_ids),multiple:"",clearable:"","use-chips":"","use-input":"",onFilter:le},{hint:n(()=>[l("div",Ie,c(i.errors.campaign_ids),1)]),"selected-item":n(o=>[a(U,{class:"adm-chip-primary q-my-none",label:o.opt.name,dense:""},{default:n(()=>[a(u,{name:"cancel",size:"xs",onClick:k=>o.removeAtIndex(o.index),class:"q-ml-xs cursor-pointer"},null,8,["onClick"])]),_:2},1032,["label"])]),_:1},8,["options","modelValue","bottom-slots"])]),l("div",Re,[a(f,{outlined:"",modelValue:t(e).embed,"onUpdate:modelValue":s[11]||(s[11]=o=>t(e).embed=o),label:"Link embed *","bottom-slots":Boolean(i.errors.embed)},{hint:n(()=>[l("div",He,c(i.errors.embed),1)]),_:1},8,["modelValue","bottom-slots"])]),l("div",Me,[a(T,{modelValue:t(e).has_link_with_content,"onUpdate:modelValue":s[12]||(s[12]=o=>t(e).has_link_with_content=o),label:"Vincular encontro \xE0 um conte\xFAdo"},null,8,["modelValue"])]),t(e).has_link_with_content?(m(),_("div",Ne,[a(q,{options:R.value,"option-value":"id","option-label":"name","emit-value":"","map-options":"",outlined:"",modelValue:t(e).content_id,"onUpdate:modelValue":[s[13]||(s[13]=o=>t(e).content_id=o),H],label:"Vincular ao conte\xFAdo","bottom-slots":Boolean(i.errors.content_id),clearable:"","use-input":"",onFilter:ae},{hint:n(()=>[l("div",Pe,c(i.errors.content_id),1)]),"selected-item":n(o=>[a(U,{class:"adm-chip-primary q-my-none",label:o.opt.name,dense:""},{default:n(()=>[a(u,{name:"cancel",size:"xs",onClick:k=>o.removeAtIndex(o.index),class:"q-ml-xs cursor-pointer"},null,8,["onClick"])]),_:2},1032,["label"])]),_:1},8,["options","modelValue","bottom-slots"])])):h("",!0),t(e).has_link_with_content?(m(),_("div",Te,[t(e).content_id?(m(),O(q,{key:0,options:t(de),"emit-value":"","map-options":"",outlined:"",modelValue:t(e).linkable_type,"onUpdate:modelValue":[s[14]||(s[14]=o=>t(e).linkable_type=o),H],label:"Momento de vincula\xE7\xE3o do evento","bottom-slots":Boolean(i.errors.linkable_type)},{hint:n(()=>[l("div",$e,c(i.errors.linkable_type),1)]),_:1},8,["options","modelValue","bottom-slots"])):h("",!0)])):h("",!0),t(e).has_link_with_content?(m(),_("div",Fe,[t(e).linkable_type!=="content"?(m(),O(q,{key:0,options:w.value,"option-value":"id","option-label":"name","emit-value":"","map-options":"",outlined:"",modelValue:t(e).linkable_id,"onUpdate:modelValue":s[15]||(s[15]=o=>t(e).linkable_id=o),label:t(ne),"bottom-slots":Boolean(i.errors.linkable_id),onFilter:ie,"use-input":"",loading:g.value,disable:g.value||y.value.length===0},{hint:n(()=>[l("div",Ee,c(i.errors.linkable_id),1)]),"selected-item":n(o=>[a(U,{class:"adm-chip-primary q-my-none",label:o.opt.name,dense:""},{default:n(()=>[a(u,{name:"cancel",size:"xs",onClick:k=>o.removeAtIndex(o.index),class:"q-ml-xs cursor-pointer"},null,8,["onClick"])]),_:2},1032,["label"])]),_:1},8,["options","modelValue","label","bottom-slots","loading","disable"])):h("",!0)])):h("",!0),l("div",Qe,[l("div",Xe,[z(" Imagem de capa "),a(u,{name:"help_outline",size:"xs",class:"cursor-pointer"},{default:n(()=>[a(me,{anchor:"center right",self:"center left",offset:[10,10],class:"text-body2 bg-grey-10"},{default:n(()=>[z(" Tamanho recomendado: 800px X 600px ")]),_:1})]),_:1})])]),t(j)?(m(),_("div",Ze,[a($,{src:t(j),style:{height:"400px"},class:"app-br-16"},{default:n(()=>[l("div",Ge,[a(u,{name:"o_photo",size:"md",class:"q-mr-md"}),a(x,{color:"white",class:"absolute",style:{top:"8px",right:"8px"},flat:"",icon:"close",size:"md",onClick:G}),l("div",B({class:"flex cursor-pointer"},t(C).getRootProps()),[l("input",L(Y(t(C).getInputProps())),null,16),z(" Alterar imagem ")],16)])]),_:1},8,["src"])])):(m(),_("div",Je,[l("div",B(t(C).getRootProps(),{class:"column flex-center q-py-lg text-grey adm-border-dashed-blue app-br-16"}),[l("input",L(Y(t(C).getInputProps())),null,16),a(u,{name:"o_photo",size:"md"}),Ke],16)])),We,(m(!0),_(ve,null,be(t(e).materials,(o,k)=>(m(),_("div",{class:"col-12 col-md-3",key:`material-${k}}}`},[a($,{src:o.is_image?o.link:oe,style:{height:"240px"},class:"app-br-16"},{default:n(()=>{var E;return[l("div",eo,[a(u,{name:"attach_file",size:"md",class:"rotate-225 q-mr-md"}),l("div",oo,[l("span",to,c(o.name.length>25?o.name.slice(0,25)+"...":o.name),1),l("span",so," ("+c((E=o.size)!=null?E:0)+" kb) ",1)]),a(x,{color:"white",class:"absolute",style:{top:"8px",right:"8px"},flat:"",icon:"close",size:"md",onClick:ho=>ee(k)},null,8,["onClick"])])]}),_:2},1032,["src"])]))),128)),l("div",lo,[l("div",B(t(J)(),{class:"column flex-center q-py-lg text-grey adm-border-dashed-blue app-br-16"}),[l("input",L(Y(t(K)())),null,16),a(u,{name:"attach_file",size:"md",class:"rotate-225"}),t(W)?(m(),_("div",ao," Selecionando... ")):(m(),_("div",no," Clique aqui ou arraste seus arquivos "))],16)]),l("div",io,[a(T,{modelValue:t(e).has_live_offer,"onUpdate:modelValue":s[16]||(s[16]=o=>t(e).has_live_offer=o),label:"Oferta ao vivo"},null,8,["modelValue"])]),t(e).has_live_offer?(m(),_("div",ro,[a(f,{outlined:"",modelValue:t(e).name_offer,"onUpdate:modelValue":s[17]||(s[17]=o=>t(e).name_offer=o),label:"Nome da oferta","bottom-slots":Boolean(i.errors.name_offer)},{hint:n(()=>[l("div",mo,c(i.errors.name_offer),1)]),_:1},8,["modelValue","bottom-slots"])])):h("",!0),t(e).has_live_offer?(m(),_("div",co,[a(f,{outlined:"",modelValue:t(e).embed_offer,"onUpdate:modelValue":s[18]||(s[18]=o=>t(e).embed_offer=o),label:"Link da oferta","bottom-slots":Boolean(i.errors.embed_offer)},{hint:n(()=>[l("div",uo,c(i.errors.embed_offer),1)]),_:1},8,["modelValue","bottom-slots"])])):h("",!0),t(e).has_live_offer?(m(),_("div",po,[a(f,{outlined:"",modelValue:t(e).description_offer,"onUpdate:modelValue":s[19]||(s[19]=o=>t(e).description_offer=o),label:"Descri\xE7\xE3o da oferta","bottom-slots":Boolean(i.errors.description_offer)},{hint:n(()=>[l("div",_o,c(i.errors.description_offer),1)]),_:1},8,["modelValue","bottom-slots"])])):h("",!0),l("div",bo,[a(x,{color:"primary",class:"q-mr-md",rounded:"","no-caps":"",outline:"",onClick:re},{default:n(()=>[a(u,{name:"chevron_left",size:"xs"}),vo]),_:1}),a(x,{color:"primary",rounded:"","no-caps":"",onClick:te,disabled:t(e).processing},{default:n(()=>[a(u,{name:"add",size:"xs"}),fo]),_:1},8,["disabled"])])])])]),_:1})}}};export{ko as default};
