import{h as oe,u as f,m as S,j as se,c as d,w as o,r as s,o as m,a as e,b as u,H as ae,d as a,s as y,f as U,t as E}from"./app.cc606831.js";import{_ as le}from"./AuthenticatedLayout.0bc0b363.js";import{_ as N}from"./DialogConfirm.f96873bf.js";const ne={class:"row q-pb-xl"},ce={class:"column col-12 col-md-6 justify-center"},re=a("div",{class:"app-fs-28 app-fw-700 app-lh-32 text-grey-8"}," Categorias ",-1),ie={class:"col-12 col-md-6 flex justify-end items-center"},de=a("div",{class:"q-ml-sm app-fw-500 app-fs-14 app-lh-20"}," Excluir selecionados ",-1),me=a("div",{class:"q-ml-sm app-fw-500 app-fs-14 app-lh-20"}," Novo categoria ",-1),ue={class:"row q-col-gutter-sm"},pe={class:"col-12"},_e={class:"flex flex-center q-pt-lg q-pa-md q-gutter-sm"},fe=a("div",{class:"q-ml-sm app-fw-500 app-fs-14 app-lh-20"}," Filtrar ",-1),ye=a("div",{class:"q-ml-sm app-fw-500 app-fs-14 app-lh-20 m-4"}," Limpar ",-1),ge=["onClick"],qe={class:"flex flex-center app-fw-700 app-fs-16"},xe={class:"app-fw-700 app-fs-16"},be=a("div",{class:"q-ml-sm"}," Editar ",-1),ve=a("div",{class:"q-ml-sm"}," Visualizar ",-1),we=a("div",{class:"q-ml-sm"}," Excluir ",-1),he=a("div",{class:"q-ml-sm"}," Visualizar ",-1),ke={class:"row items-center text-grey"},Ce={class:"row items-center text-grey"},ze={__name:"Index",props:{categories:Object,errors:Object,query:Object,canCategoryStore:Boolean,canCategoryEdit:Boolean,canCategoryDestroy:Boolean},setup(c){const g=c,b=oe(),O=[{name:"name",align:"left",label:"Nome",field:"name",style:"width: 100%"},{name:"actions",label:"A\xE7\xE3o"}],l=f({orderBy:g.query.orderBy,sort:g.query.sort,page:g.query.page,rowsPerPage:g.query.rowsPerPage,filters:{name:g.query.filters.name}}),F=n=>{l.orderBy===n?l.sort=l.sort=="desc"?"asc":"desc":l.sort=="asc",l.orderBy=n,l.page=1,q()},A=n=>{l.filters[n]=null,q()},q=()=>{l.get(route("admin.category.index"),{preserveState:!0,preserveScroll:!0,onSuccess:()=>v.value=!1})},H=()=>f().get(route("admin.category.create")),I=n=>f().get(route("admin.category.edit",n)),V=n=>f().get(route("admin.category.show",n));function L(n){b.dialog({component:N,componentProps:{title:"Excluir categoria",message:"Ao excluir a categoria, todos os v\xEDnculos com conte\xFAdos ser\xE3o desfeitos. Deseja realmente excluir?"}}).onOk(()=>{f().delete(route("admin.category.destroy",n),{onSuccess:()=>{b.notify({type:"positive",message:"Categoria exclu\xEDdo com sucesso",position:"top"})}})})}function Q(){b.dialog({component:N,componentProps:{title:"Excluir selecionados",message:"Ao excluir as categorias selecionadas, todos os conte\xFAdos vinculados, ser\xE3o desvinculados. Deseja realmente excluir?"}}).onOk(()=>{f({ids:x.value.map(n=>n.id)}).post(route("admin.category.destroy-multiples"),{onSuccess:()=>{x.value=[],b.notify({type:"positive",message:"Categorias exclu\xEDdas com sucesso",position:"top"})}})})}const x=S([]),P=se(()=>Object.values(g.query.filters).filter(n=>n).length),v=S(!1),R=()=>f().get(route("admin.category.index"));return(n,r)=>{const B=s("q-breadcrumbs-el"),T=s("q-breadcrumbs"),i=s("q-icon"),_=s("q-btn"),G=s("q-chip"),z=s("q-space"),J=s("q-badge"),K=s("q-input"),j=s("q-menu"),w=s("q-card-section"),h=s("q-separator"),$=s("q-checkbox"),D=s("q-th"),k=s("q-item-section"),C=s("q-item"),M=s("q-list"),W=s("q-td"),X=s("q-table"),Y=s("q-select"),Z=s("q-pagination"),ee=s("q-card");return m(),d(le,null,{default:o(()=>[e(u(ae),{title:"Categorias"}),a("div",ne,[a("div",ce,[re,e(T,{class:"text-grey q-mt-sm app-fs-13 app-fw-400 app-lh-16",gutter:"xs"},{default:o(()=>[e(B,{label:"Home",class:"text-grey"}),e(B,{label:"Categorias",class:"text-primary"})]),_:1})]),a("div",ie,[x.value.length>0&&c.canCategoryDestroy?(m(),d(_,{key:0,color:"negative",class:"q-mr-md",rounded:"","no-caps":"",outline:"",onClick:Q},{default:o(()=>[e(i,{name:"close",size:"xs"}),de]),_:1})):y("",!0),c.canCategoryStore?(m(),d(_,{key:1,color:"primary",rounded:"","no-caps":"",onClick:H},{default:o(()=>[e(i,{name:"add",size:"xs"}),me]),_:1})):y("",!0)])]),e(ee,{flat:"",class:"app-br-16"},{default:o(()=>[e(w,{class:"row items-center q-py-sm q-px-lg"},{default:o(()=>[c.query.filters.name?(m(),d(G,{key:0,class:"adm-chip-primary",label:`Nome = ${c.query.filters.name}`},{default:o(()=>[e(i,{name:"cancel",size:"xs",onClick:r[0]||(r[0]=t=>A("name")),class:"q-ml-xs cursor-pointer"})]),_:1},8,["label"])):y("",!0),e(z),e(_,{round:"",dense:"",flat:"",color:"primary"},{default:o(()=>[u(P)?(m(),d(J,{key:0,color:"primary",floating:"",rounded:"",label:u(P)},null,8,["label"])):y("",!0),e(i,{name:"tune",class:"rotate-90"}),e(j,{style:{"min-width":"500px"},"max-width":"500px",class:"bg-white q-pa-md app-br-16",modelValue:v.value,"onUpdate:modelValue":r[2]||(r[2]=t=>v.value=t)},{default:o(()=>[a("div",ue,[a("div",pe,[e(K,{outlined:"",modelValue:u(l).filters.name,"onUpdate:modelValue":r[1]||(r[1]=t=>u(l).filters.name=t),label:"Nome da categoria"},null,8,["modelValue"])])]),a("div",_e,[e(_,{color:"primary",rounded:"","no-caps":"",onClick:q},{default:o(()=>[e(i,{name:"check",size:"xs"}),fe]),_:1}),e(_,{color:"primary",rounded:"",outline:"","no-caps":"",onClick:R},{default:o(()=>[e(i,{name:"close",size:"xs"}),ye]),_:1})])]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(w,{class:"q-py-none"},{default:o(()=>[e(h,{color:"grey-3"})]),_:1}),e(w,{class:"q-py-none"},{default:o(()=>[e(X,{rows:c.categories.data,columns:O,flat:"",class:"text-grey-8",selected:x.value,"onUpdate:selected":r[3]||(r[3]=t=>x.value=t),selection:"multiple","hide-pagination":"",pagination:{rowsPerPage:u(l).rowsPerPage}},{"header-selection":o(t=>[e($,{modelValue:t.selected,"onUpdate:modelValue":p=>t.selected=p},null,8,["modelValue","onUpdate:modelValue"])]),"body-selection":o(t=>[e($,{"model-value":t.selected,"onUpdate:modelValue":(p,te)=>{Object.getOwnPropertyDescriptor(t,"selected").set(p,te)}},null,8,["model-value","onUpdate:modelValue"])]),"header-cell":o(t=>[e(D,{props:t},{default:o(()=>[a("div",{class:"app-fw-700 app-fs-16 cursor-pointer",onClick:p=>F(t.col.name)},[U(E(t.col.label)+" ",1),t.col.name===c.query.orderBy?(m(),d(i,{key:0,name:c.query.sort=="desc"?"keyboard_arrow_up":"keyboard_arrow_down"},null,8,["name"])):y("",!0)],8,ge)]),_:2},1032,["props"])]),"header-cell-actions":o(t=>[e(D,{props:t,"auto-width":""},{default:o(()=>[a("div",qe,E(t.col.label),1)]),_:2},1032,["props"])]),"body-cell-actions":o(t=>[e(W,{props:t},{default:o(()=>[a("div",xe,[c.canCategoryEdit||c.canCategoryDestroy?(m(),d(_,{key:0,icon:"more_vert",flat:""},{default:o(()=>[e(j,{offset:[65,0]},{default:o(()=>[e(M,null,{default:o(()=>[c.canCategoryEdit&&!t.row.is_permanent?(m(),d(C,{key:0,clickable:"",onClick:p=>I(t.row.id),class:"text-grey-7 flex items-center"},{default:o(()=>[e(i,{name:"edit",size:"xs"}),e(k,{"no-wrap":""},{default:o(()=>[be]),_:1})]),_:2},1032,["onClick"])):y("",!0),e(h),e(C,{clickable:"",onClick:p=>V(t.row.id),class:"text-grey-7 flex items-center"},{default:o(()=>[e(i,{name:"visibility",size:"xs"}),e(k,{"no-wrap":""},{default:o(()=>[ve]),_:1})]),_:2},1032,["onClick"]),e(h),c.canCategoryDestroy&&!t.row.is_permanent?(m(),d(C,{key:1,clickable:"",onClick:p=>L(t.row.id),class:"text-grey-7 flex flex-center"},{default:o(()=>[e(i,{name:"close",size:"xs"}),e(k,{"no-wrap":""},{default:o(()=>[we]),_:1})]),_:2},1032,["onClick"])):y("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):(m(),d(_,{key:1,onClick:p=>V(t.row.id),class:"text-grey-7 flex flex-center text-no-wrap",flat:"","no-caps":""},{default:o(()=>[e(i,{name:"visibility",size:"xs"}),he]),_:2},1032,["onClick"]))])]),_:2},1032,["props"])]),_:1},8,["rows","selected","pagination"]),a("div",ke,[e(z),a("div",Ce,[U(" Resultado por p\xE1gina "),e(Y,{options:[5,10,15],modelValue:u(l).rowsPerPage,"onUpdate:modelValue":[r[4]||(r[4]=t=>u(l).rowsPerPage=t),q],borderless:"",class:"q-ml-md"},null,8,["modelValue"])]),e(Z,{modelValue:u(l).page,"onUpdate:modelValue":[r[5]||(r[5]=t=>u(l).page=t),q],max:c.categories.meta.last_page,"direction-links":"","boundary-links":"",color:"grey",input:"","icon-first":"keyboard_double_arrow_left","icon-last":"keyboard_double_arrow_right"},null,8,["modelValue","max"])])]),_:1})]),_:1})]),_:1})}}};export{ze as default};
