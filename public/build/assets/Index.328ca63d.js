import{h as se,u as _,m as U,j as le,c as f,w as o,r as s,o as m,a as e,b as d,H as ae,d as n,s as b,n as $,f as N,t as O}from"./app.cc606831.js";import{_ as ne}from"./AuthenticatedLayout.0bc0b363.js";import{_ as F}from"./DialogConfirm.f96873bf.js";const re={class:"row q-pb-xl"},ce={class:"column col-12 col-md-6 justify-center"},de=n("div",{class:"app-fs-28 app-fw-700 app-lh-32 text-grey-8"}," Produtos ",-1),ie={class:"col-12 col-md-6 flex justify-end items-center"},me=n("div",{class:"q-ml-sm app-fw-500 app-fs-14 app-lh-20"}," Excluir selecionados ",-1),ue=n("div",{class:"q-ml-sm app-fw-500 app-fs-14 app-lh-20"}," Novo produto ",-1),pe={class:"row q-col-gutter-sm"},_e={class:"col-12"},fe={class:"flex flex-center q-pt-lg q-pa-md q-gutter-sm"},qe=n("div",{class:"q-ml-sm app-fw-500 app-fs-14 app-lh-20"}," Filtrar ",-1),ye=n("div",{class:"q-ml-sm app-fw-500 app-fs-14 app-lh-20 m-4"}," Limpar ",-1),ge={class:"row items-center app-fw-700 app-fs-16"},be=["onClick"],xe={key:1},ve=n("div",{class:"q-ml-sm"}," Editar ",-1),he=n("div",{class:"q-ml-sm"}," Visualizar ",-1),we=n("div",{class:"q-ml-sm"}," Excluir ",-1),ke={class:"row items-center text-grey"},Ve={class:"row items-center text-grey"},je={__name:"Index",props:{products:Object,errors:Object,query:Object},setup(i){const u=i,x=se(),S=[{name:"image",align:"left",label:"Imagem",field:"image"},{name:"name",align:"left",label:"Nome do produto",field:"name",sorteable:!0},{name:"description",align:"left",label:"Descri\xE7\xE3o",field:"description",sorteable:!0},{name:"payment_methods",align:"left",label:"Formas de pagamento",field:l=>{let a=[];return l.credit_card_accept&&a.push("Cart\xE3o de cr\xE9dito"),l.boleto_accept&&a.push("Boleto"),l.pix_accept&&a.push("PIX"),a.join(", ")},sorteable:!0},{name:"actions",align:"center",label:"A\xE7\xE3o"}],r=_({orderBy:u.query.orderBy,sort:u.query.sort,page:u.query.page,rowsPerPage:u.query.rowsPerPage,filters:{name:u.query.filters.name,start_at:u.query.filters.start_at,end_at:u.query.filters.end_at}}),E=l=>{r.orderBy===l?r.sort=r.sort=="desc"?"asc":"desc":r.sort=="asc",r.orderBy=l,r.page=1,y()},D=l=>{r.filters[l]=null,y()},y=()=>{r.get(route("admin.product.index"),{preserveState:!0,preserveScroll:!0,onSuccess:()=>v.value=!1})},H=()=>_().get(route("admin.product.create")),I=l=>_().get(route("admin.product.edit",l)),T=l=>_().get(route("admin.product.show",l));function A(l){x.dialog({component:F,componentProps:{title:"Excluir Produto",message:"Tem certeza que deseja excluir esse produto?"}}).onOk(()=>{_().delete(route("admin.product.destroy",l),{onSuccess:()=>{x.notify({type:"positive",message:"Produto exclu\xEDdo com sucesso",position:"top"})}})})}function L(){x.dialog({component:F,componentProps:{title:"Excluir selecionados",message:"Tem certeza que deseja excluir produtos selecionadas?"}}).onOk(()=>{_({ids:g.value.map(l=>l.id)}).post(route("admin.product.destroy-multiples"),{onSuccess:()=>{g.value=[],x.notify({type:"positive",message:"Produtos exclu\xEDdos com sucesso",position:"top"})}})})}const g=U([]),V=le(()=>Object.values(u.query.filters).filter(l=>l).length),v=U(!1),Q=()=>_().get(route("admin.product.index"));return(l,a)=>{const P=s("q-breadcrumbs-el"),R=s("q-breadcrumbs"),c=s("q-icon"),q=s("q-btn"),X=s("q-chip"),C=s("q-space"),G=s("q-badge"),J=s("q-input"),B=s("q-menu"),h=s("q-card-section"),w=s("q-separator"),j=s("q-checkbox"),K=s("q-th"),M=s("q-img"),z=s("q-td"),k=s("q-item"),W=s("q-list"),Y=s("q-table"),Z=s("q-select"),ee=s("q-pagination"),te=s("q-card");return m(),f(ne,null,{default:o(()=>[e(d(ae),{title:"Produtos"}),n("div",re,[n("div",ce,[de,e(R,{class:"text-grey q-mt-sm app-fs-13 app-fw-400 app-lh-16",gutter:"xs"},{default:o(()=>[e(P,{label:"Home",class:"text-grey"}),e(P,{label:"Produtos",class:"text-primary"})]),_:1})]),n("div",ie,[g.value.length>0?(m(),f(q,{key:0,color:"negative",class:"q-mr-md",rounded:"","no-caps":"",outline:"",onClick:L},{default:o(()=>[e(c,{name:"close",size:"xs"}),me]),_:1})):b("",!0),e(q,{color:"primary",rounded:"","no-caps":"",onClick:H},{default:o(()=>[e(c,{name:"add",size:"xs"}),ue]),_:1})])]),e(te,{flat:"",class:"app-br-16"},{default:o(()=>[e(h,{class:"row items-center q-py-sm q-px-lg"},{default:o(()=>[i.query.filters.name?(m(),f(X,{key:0,class:"adm-chip-primary",label:`Nome = ${i.query.filters.name}`},{default:o(()=>[e(c,{name:"cancel",size:"xs",onClick:a[0]||(a[0]=t=>D("name")),class:"q-ml-xs cursor-pointer"})]),_:1},8,["label"])):b("",!0),e(C),e(q,{round:"",dense:"",flat:"",color:"primary"},{default:o(()=>[d(V)?(m(),f(G,{key:0,color:"primary",floating:"",rounded:"",label:d(V)},null,8,["label"])):b("",!0),e(c,{name:"tune",class:"rotate-90"}),e(B,{style:{"min-width":"500px"},"max-width":"500px",class:"bg-white q-pa-md app-br-16",modelValue:v.value,"onUpdate:modelValue":a[2]||(a[2]=t=>v.value=t)},{default:o(()=>[n("div",pe,[n("div",_e,[e(J,{outlined:"",modelValue:d(r).filters.name,"onUpdate:modelValue":a[1]||(a[1]=t=>d(r).filters.name=t),label:"Nome do produto"},null,8,["modelValue"])])]),n("div",fe,[e(q,{color:"primary",rounded:"","no-caps":"",onClick:y},{default:o(()=>[e(c,{name:"check",size:"xs"}),qe]),_:1}),e(q,{color:"primary",rounded:"",outline:"","no-caps":"",onClick:Q},{default:o(()=>[e(c,{name:"close",size:"xs"}),ye]),_:1})])]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(h,{class:"q-py-none"},{default:o(()=>[e(w,{color:"grey-3"})]),_:1}),e(h,{class:"q-py-none"},{default:o(()=>[e(Y,{rows:i.products.data,columns:S,flat:"",class:"text-grey-8",selected:g.value,"onUpdate:selected":a[3]||(a[3]=t=>g.value=t),selection:"multiple","hide-pagination":"",pagination:{rowsPerPage:d(r).rowsPerPage}},{"header-selection":o(t=>[e(j,{modelValue:t.selected,"onUpdate:modelValue":p=>t.selected=p},null,8,["modelValue","onUpdate:modelValue"])]),"body-selection":o(t=>[e(j,{"model-value":t.selected,"onUpdate:modelValue":(p,oe)=>{Object.getOwnPropertyDescriptor(t,"selected").set(p,oe)}},null,8,["model-value","onUpdate:modelValue"])]),"header-cell":o(t=>[e(K,{props:t},{default:o(()=>[n("div",ge,[t.col.sorteable?(m(),$("div",{key:0,onClick:p=>E(t.col.name),class:"cursor-pointer"},[N(O(t.col.label)+" ",1),t.col.name===i.query.orderBy&&i.query.sort=="desc"?(m(),f(c,{key:0,name:"keyboard_arrow_up"})):t.col.name===i.query.orderBy&&i.query.sort=="asc"?(m(),f(c,{key:1,name:"keyboard_arrow_down"})):b("",!0)],8,be)):(m(),$("div",xe,O(t.col.label),1))])]),_:2},1032,["props"])]),"body-cell-image":o(t=>[e(z,{props:t},{default:o(()=>[t.row.image?(m(),f(M,{key:0,src:t.row.image,height:"56px"},null,8,["src"])):b("",!0)]),_:2},1032,["props"])]),"body-cell-actions":o(t=>[e(z,{props:t,"auto-width":""},{default:o(()=>[e(q,{icon:"more_vert",flat:""},{default:o(()=>[e(B,null,{default:o(()=>[e(W,null,{default:o(()=>[e(k,{clickable:"",onClick:p=>I(t.row.id),class:"text-grey-7 flex flex-center"},{default:o(()=>[e(c,{name:"edit",size:"xs"}),ve]),_:2},1032,["onClick"]),e(w),e(k,{clickable:"",onClick:p=>T(t.row.id),class:"text-grey-7 flex flex-center"},{default:o(()=>[e(c,{name:"visibility",size:"xs"}),he]),_:2},1032,["onClick"]),e(w),e(k,{clickable:"",onClick:p=>A(t.row.id),class:"text-grey-7 flex flex-center"},{default:o(()=>[e(c,{name:"close",size:"xs"}),we]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["rows","selected","pagination"]),n("div",ke,[e(C),n("div",Ve,[N(" Resultado por p\xE1gina "),e(Z,{options:[5,10,15],modelValue:d(r).rowsPerPage,"onUpdate:modelValue":[a[4]||(a[4]=t=>d(r).rowsPerPage=t),y],borderless:"",class:"q-ml-md"},null,8,["modelValue"])]),e(ee,{modelValue:d(r).page,"onUpdate:modelValue":[a[5]||(a[5]=t=>d(r).page=t),y],max:i.products.meta.last_page,"direction-links":"","boundary-links":"",color:"grey",input:"","icon-first":"keyboard_double_arrow_left","icon-last":"keyboard_double_arrow_right"},null,8,["modelValue","max"])])]),_:1})]),_:1})]),_:1})}}};export{je as default};
